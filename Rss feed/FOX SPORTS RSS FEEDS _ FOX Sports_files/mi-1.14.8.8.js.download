var _min=("undefined"!=typeof __min?__min:null)||_min||{};_min=function(min){"use strict";function EmitterService(e,t,n){function i(e,t){var n=null;switch(t=r(e,t),e){case consts.Emitter.NEW_VIDEO_EVENT:n=d();break;case consts.Emitter.NEW_SCRAPE_EVENT:n=h();break;case consts.Emitter.CLICK:case consts.Emitter.VIEWPORT:n=u();break;case consts.Emitter.URL_REPORT:case consts.Emitter.DAILY_USER:n=p();break;case consts.Emitter.VIDEO_VIEWS:n=l();break;case consts.Emitter.CUSTOM_EVENTS:n=c();break;case consts.Emitter.CROWD_SOURCE:n=s()}n.push(e,t)}function r(t,n){switch(t){case consts.Emitter.VIDEO_VIEWS:n.hadImpressionSession=e.parseBool(n.hadImpressionSession),n.hadImpressionSession?visibilityAnalyticsService.setHadImpressionSession():n.hadImpressionSession=visibilityAnalyticsService.hadImpressionSession()}return n}function o(){a.forEach(function(e){e.flush()})}var a=[],s=function(){var i=new Emitter(e,t,n.UrlReporter,(!0));return i.setMasQueueLength(1),i.init(),a.push(i),function(){return i}}(),l=function(){var i=new Emitter(e,t,n.UrlReporter,(!0));return i.init(),a.push(i),function(){return i}}(),c=function(){var i=new Emitter(e,t,n.UrlReporter,(!0));return i.init(),a.push(i),function(){return i}}(),u=function(){var i=new Emitter(e,t,n.UrlReporter,(!0));return i.enableStorage("_minEE1"),i.init(),a.push(i),function(){return i}}(),p=function(){var i=new Emitter(e,t,n.UrlReporter,(!0));return i.init(),a.push(i),function(){return i}}(),d=function(){var i=new Emitter(e,t,n.VideoData,(!1),consts.ReportMethods.GET);return i.init(),a.push(i),function(){return i.setValidator(e.validateScraperURL),i}}(),h=function(){var i=new Emitter(e,t,n.UrlReporter,(!1));return i.init(),a.push(i),function(){return i}}();return{getVideoViewsReporter:l,getCounterServerReporter:u,getPlayerContent:d,getPlayerContentDelayed:h,send:i,flushAll:o}}function extractQadtFromString(e,t,n){var i=n;if(""!==i){e[EnumDebugData.QUERY_PARAMS_SOURCE]+=i+" ",0===i.indexOf(t)&&(i=i.slice(1));for(var r,o,a=i.split("&"),s=/^qadt([\d\w]+)$/,l=0;l<a.length;l++)r=a[l].split("="),o=r[0],s.test(o)&&(o=o.replace(s,"$1"),e[o]=r[1])}}function ClickLogManager(e,t,n,i){function r(t){t||(t=!1);var n=s(),i=e.getlistAsArray(n[y]);i=o(i),i.length>0&&u([i],t),n[y]=[],l(n)}function o(e){if(e.length<=1)return e;var t=[];e.forEach(function(e,n,i){t.push(JSON.stringify(e))});var n=t.filter(function(e,n){return t.indexOf(e)===n});return t=[],n.forEach(function(e,n,i){t.push(JSON.parse(e))}),t}function a(t,n){var i,r=s();r[n]=e.getlistAsArray(r[n]),i=r[n],i.push(t),l(r)}function s(){var e=t.getItem(E);if(e){if(e=JSON.parse(e),e.clicks)for(var n=0;n<e.clicks.length;n++)e.clicks[n]=i.extract(e.clicks[n]);if(e.clicksDelay)for(var n=0;n<e.clicksDelay.length;n++)e.clicksDelay[n]=i.extract(e.clicksDelay[n])}else e={};return e}function l(e){if(e.clicks)for(var n=0;n<e.clicks.length;n++)e.clicks[n]=i.compress(e.clicks[n]);if(e.clicksDelay)for(var n=0;n<e.clicksDelay.length;n++)e.clicksDelay[n]=i.compress(e.clicksDelay[n]);t.setItem(E,JSON.stringify(e))}function c(e,t){var n,i,r=typeof e;if("string"===r||"number"===r){if(n=s(),n[t]=n[t]||[],i=n[t],0===i.length)return null;for(var o=0;o<i.length;o++)if(i[o].id===e)return i[o];return null}}function u(t,i,r){if(!e.isArray(t))return void e.log("Report not an array");for(var o,a="Test:"+testGroupService.getGroupCode(),s=0;s<t.length;s++){o=e.isArray(t[s])?t[s]:[t[s]];for(var l=0;l<o.length;l++){var c=JSON.parse(JSON.stringify(o[l]));if(n.send(consts.Emitter.CLICK,c),r){var u={url:c.url,user_agent:navigator.userAgent,source:compatibility.getAnalyticsSource(),publisher:configuration.getPublisherIdNumber(),category:"rightClick",action:"sendLogDelayById",label:"highlight_id",value:c.highlight_id};n.send(consts.Emitter.CUSTOM_EVENTS,u)}c=e.cloneObject(c),a+=","+c.id+":PClick:"+(c.product||"0");var p=sessionAnalyticsUsherFactory.get(c.id,consts.Emitter.CLICK_TYPE_CLICK,consts.Emitter.CLICK_TYPE_CLICK,c.test_mode,c.product);p.isSent()||(c.uniq=!0,n.send(consts.Emitter.CLICK,c),p.setAnalyticState(),a+=","+c.id+":UClick:"+(c.product||"0")),globalEvent.dispatchEvent(consts.Events.DomWindow.CLICK)}}(configuration.getCanReportImmediately()||i)&&n.getCounterServerReporter().flush()}function p(){r(),globalEvent.addEventListener(consts.Events.PLAYER_VIDEO_CHANGED,r,this),globalEvent.addEventListener(consts.Events.PLAYER_PLAYING,d,this)}function d(){setTimeout(r,0,!0)}function h(e){a(e,y),e.product==consts.Emitter.PRODUCT_IN_ARTICLE?r():A.start()}function g(e){a(e,_)}function m(e,t){var n,i,r=typeof e;if(("string"===r||"number"===r)&&(n=s(),n[t]=n[t]||[],i=n[t],0!==i.length)){for(var o=0;o<i.length;o++)if(i[o].id===e){i.splice(o,1);break}l(n)}}function v(e){m(e,_)}function f(e){var t=c(e,_);t&&(t.type=consts.Emitter.ANALYTICS_CLICK_EVENT,u([t],null,!0),v(e))}var E="minAnalytics",y="clicks",_="clicksDelay",A=new com.utils.Debounce(consts.FLUSH_ANALYTICS,r);return{init:p,log:h,logDelay:g,removeLogDelayById:v,sendLogDelayById:f}}function ClickByPointService(e,t,n){function i(){if(e.isClickByPointEnabled()){var t=function(e){for(var t=n.getAllActiveApv(),i=0;i<t.length;i++){var r=t[i];if(r.getMinuteLogo()){var o=r.getMinuteLogo().getLogoElement();if(o.offsetParent){var a=o.getBoundingClientRect();0!=a.left&&0!=a.top&&0!=a.width&&(0==e.x||0==e.y&&e.target==window.document.body||Math.abs(a.left-e.x)<=a.width&&Math.abs(a.top-e.y)<=a.width&&globalEvent.dispatchEvent(consts.Events.CLICK_FROM_POINT,{containerUnique:r._containerUnique}))}}}};document&&document.body?document.body.addEventListener("click",t,!0):document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",t,!0)},!1)}}return{init:i}}function IntervalService(){function e(){setInterval(function(){globalEvent.dispatchEvent(consts.Events.ONE_SECONDS_INTERVAL,{interval:1e3}),location.href!=t&&(t=location.href,globalEvent.dispatchEvent(consts.Events.URL_MANIPULATION_INTERVAL_SERVICE,{interval:1e3}))},1e3),setInterval(function(){globalEvent.dispatchEvent(consts.Events.THREE_SECONDS_INTERVAL)},3e3)}var t=location.href;return{init:e}}if(_min.debug)window._minAlreadyLoaded=!1;else{if(window._minAlreadyLoaded)return void console.warn("Minute.ly already loaded");window._minAlreadyLoaded=!0}var EventDispatcher=function(){function e(e){return Array.prototype.slice.call(e)}var t=function(){this.listeners=Object.create(null)};return t.prototype.addEventListener=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,isOnce:!1,args:r})},t.prototype.addEventListenerOnce=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,isOnce:!0,args:r})},t.prototype.removeEventListener=function(e,t,n){if(this.listeners[e]){for(var i=this.listeners[e].length,r=[],o=0;o<i;o++){var a=this.listeners[e][o];a.context===n&&a.callback===t||r.push(a)}this.listeners[e]=r}},t.prototype.removeAllEventListener=function(){this.listeners={}},t.prototype.dispatchEvent=function(t,n){var i,r,o=0,a={type:t,data:n},s=e(arguments).slice(2);s=[a].concat(s);var l=this.listeners[t];if(l){var c=l.length;for(i=0;i<c;i++)if(r=l[i],r&&r.callback){var u=s.concat(r.args);r.callback.apply(r.context,u),o+=1}for(i=c-1;i>=0;i--)r=l[i],r&&r.isOnce&&l.splice(i,1)}},t}(),consts={};consts.Urls=function(){var e="https:"==window.location.protocol?1:0;return{ServerData:["http://data.minute.ly/","https://z2d7c5q4.ssl.hwcdn.net/"][e],ServerAnalytics:["http://data.minute.ly/","https://z2d7c5q4.ssl.hwcdn.net/"][e],UrlReporter:["http://counter.snackly.co/","https://counter.snackly.co/"][e],VideoData:["http://vdata.minute.ly/","https://b3g8i8r3.ssl.hwcdn.net/"][e],Configuration:["http://apv.configuration.minute.ly/","https://r7c2k6b3.ssl.hwcdn.net/"][e],Logger:["http://logger.snackly.co/","https://logger.snackly.co/"][e],Error:["http://errors.snackly.co/","https://errors.snackly.co/"][e]}}(),consts.styles={},consts.styles.OBJECT_FIT="object-fit",consts.values={},consts.values.RELATIVE="relative",consts.values.ABSOLUTE="absolute",consts.values.HIDDEN="hidden",consts.values.COVER="cover",consts.values.NONE="none",consts.values.BLOCK="block",consts.values.HUNDRED_PERCENT="100%",consts.APVStates={Disposed:"disposed",New:"new",Blocked:"blocked",Disabled:"disabled",Active:"active"},consts.config={},consts.config.WindowIntervals={SCROLL:"scroll",RESIZE:"resize",URL:"url",ECHO_TIME:"echoTime",ECHO_REPEAT:"echoRepeat"},consts.FLUSH_ANALYTICS=5e3,consts.WindowKeys={COMPATIBILITY:"compatibility"},consts.Events={WINDOW_DISPOSE:"windowDispose",TEST_MODE_READY:"testModeReady",WINDOW_SERVICE_READY:"windowServiceReady",POST_MESSAGE_RESPONSE:"postMessageResponse",VIDEOS_UPDATE:"videosUpdate",APV_DISPOSED:"apvDisposed",PLAYER_VIDEO_VIEW_CLICK:"playerVideoViewClick",APV_LOGO_CLICK:"apvLogoClick",PLAYER_FOUND:"playerFound",PLAYER_PLACEHOLDER_FOUND:"playerPlaceholderFound",PLAYER_PLAYING:"playerPlaying",PLAYER_VIDEO_CHANGED:"playerVideoChanged",IMPRESSION:"impressionAnalytics",CLIENT_INIT_ANALYTICS:"clientInitAnalyticsEvent",DAILY_USER:"dailyUserCreated",FIRST_VIDEO_VIEW:"firstVideoView",SYSTEM_RUNNING:"systemRunning",NEW_VIDEO_DATE:"newVideoData",LOAD_MORE_FOUND:"loadmorefound",AUXCLICK_EVENT:"auxclick",MESSAGE_EVENT:"message",FORCE_FIND_ELMS:"forceFindElements",INARTICLE_CLICK:"inArticleClick",MOUSE_UP:"mouseup",REGULAR_CLICK:"regularClick",CONFIG_READY:"configReady",CLICK_FROM_POINT:"clickFromPoint",URL_MANIPULATION_INTERVAL_SERVICE:"URLManipulationIntervalService",ONE_SECONDS_INTERVAL:"ONE_SECOND",THREE_SECONDS_INTERVAL:"THREE_SECONDS",IN_ARTICLE_PLACER_DISPOSED:"IN_ARTICLE_PLACER_DISPOSED"},consts.playmode={VIEWPORT:"viewport",HOVER:"hover",BLOCKINGHOVER:"blockinghover"},consts.Events.Element={VISIBLE:"elmVisible",NON_VISIBLE:"elmNonVisible",ANALYTICS_VISIBLE:"elmVisibleAnalytics",CLICK:"elmClick",CONTEXT_MENU_OPEN:"elmContextMenuOpen",CONTEXT_MENU_CLOSE:"elmContextMenuClose",MUTANT:"elmMutant",MOUSE_ENTER:"mouseenter",FIRST_MOUSE_ENTER:"firstmouseenter",MOUSE_LEAVE:"mouseleave",READY:"ready",UPDATE_CAROUSEL_ELEMENT:"updateCarouselContainer"},consts.Events.Players={PLAYING:"playing",PAUSED:"paused",LOADED:"loaded",ENDED:"ended",ERROR:"error",AD_EVENT:"adEvent"},consts.Events.DomWindow={SCROLL:"scroll",FOCUS:"focus",SAFARI_FOCUS:"safariFocus",BLUR:"blur",RESIZE:"resize",CLICK:"click",VISIBILITY_CHANGE:"visibilitychange",ORIENTATION_CHANGE:"orientationchange"},consts.UrlStructure={Origin:"origin",PathName:"pathname",Search:"search",Hash:"hash"},consts.NEW_VIDEO_SOURCE={MINUTE_SNIPPET:0},consts.Emitter={NEW_VIDEO_EVENT:2,VIDEO_VIEWS:42,CLICK:94,DAILY_USER:93,VIEWPORT:95,NEW_SCRAPE_EVENT:97,URL_REPORT:98,CUSTOM_EVENTS:"custom_analytic",CROWD_SOURCE:"crowd_source",CONTEXT_MENU_OPEN_EVENT:4,ANALYTICS_CLICK_EVENT:0,ANALYTICS_IMPRESSION_EVENT:1,ANALYTICS_BLOCKING_DISTANCE_POTENTIAL:2,ANALYTICS_SOURCE_WEB_VIEW_ANDROID:10,ANALYTICS_SOURCE_WEB_VIEW_IOS:11,ANALYTICS_SOURCE_WEB_MOBILE:2,ANALYTICS_SOURCE_WEB_DESKTOP:1,PRODUCT_APV:0,PRODUCT_IN_ARTICLE:1,CLICK_TYPE_NONE:"n",CLICK_TYPE_CLICK:"c",MINUTE_VIEWPORT_EVENT:"minute_impression"},consts.Placements={VIEWPORT_IMPRESSION:1,HOVER_IMPRESSION:2},consts.ReportMethods={GIF:"gif",GET:"get",POST:"post"},consts.OriginalSrc={PATH:"path",ATTR:"attr"},consts.integrationDataSet={ENABLE:"data-min-enable",ANCHOR:"data-min-anchor",PREVIEW:"data-min-preview",SIZE:"data-min-size",VIEWPORT_MASK:"data-min-mask",VIEWPORT_OBSERVER:"data-min-observer",METHOD:"data-min-method",SOURCE_MOBILE:"mobile",SOURCE_DESKTOP:"desktop"},consts.integrationDataSetElm={METHOD:"minMethod"},consts.sizeSelector={CONTAINER:"CONTAINER"},min.debug?consts.Events.MINUTE_READY="minuteReady_debug":consts.Events.MINUTE_READY="minuteReady",consts.logoPositions={"top-left":{left:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"top-right":{right:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-left":{left:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-right":{right:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"}},consts.StorageKeys={DAILY_DATA_OBJ:"minDaily",SESSION_DATA_OBJ:"minSession",BUFFER_DATA_OBJ:"minBuffer",VERSION_DATA_OBJ:"minVersion",UNIQUE_DATA_OBJ:"minUniq"},consts.StorageSubKeys={dailyUser:"dailyUser",testMode:"testMode",_minEE0:"_minEE0",_minEE1:"_minEE1",sessionUniqs:"sessionUniqs",minSessionSent:"minSessionSent",minSID:"minSID",minAnalytics:"minAnalytics",minFlavor:"minFlavor",experiment:"experiment",minUID:"minUID",minFromCamp:"minFromCamp",viewedHlts:"viewedHlts",hadImp:"hadImp"},consts.SESSION_TTL=18e5,consts.minuteClasses={},consts.minuteClasses.CONTAINER="minute-container",consts.WELCOME_TO_MINUTE_SIZE={SMALL:"small",BIG:"big",OFF:"off"},consts.cookiesKeysTable=function(){var e={};return e[consts.StorageKeys.DAILY_DATA_OBJ]={expiration:"daily",keys:[consts.StorageSubKeys.dailyUser,consts.StorageSubKeys.testMode]},e[consts.StorageKeys.SESSION_DATA_OBJ]={expiration:"session",keys:[consts.StorageSubKeys.sessionUniqs,consts.StorageSubKeys.minSessionSent,consts.StorageSubKeys.minSID,consts.StorageSubKeys.hadImp]},e[consts.StorageKeys.BUFFER_DATA_OBJ]={expiration:null,keys:[consts.StorageSubKeys._minEE0,consts.StorageSubKeys._minEE1,consts.StorageSubKeys.minAnalytics]},e[consts.StorageKeys.VERSION_DATA_OBJ]={expiration:null,keys:[consts.StorageSubKeys.experiment,consts.StorageSubKeys.minFlavor]},e[consts.StorageKeys.UNIQUE_DATA_OBJ]={expiration:null,keys:[consts.StorageSubKeys.minUID,consts.StorageSubKeys.minFromCamp,consts.StorageSubKeys.viewedHlts]},e}(),min=min,min.ver="1.14.8.8",min._publisher=min._publisher||"",min._publisherDebugUrl=min._publisherDebugUrl||"";var com={};com.publisher={},com.publisher.utils=com.publisher.utils||{};var utils={};utils.getDateNow=function(){return new Date},utils.getTimeNow=function(){return utils.getDateNow().getTime()};var factory={},__env="production",__MinuteGenesis=utils.getTimeNow(),__genesis=window.performance?window.performance.timing.navigationStart:__MinuteGenesis,globalEvent=new EventDispatcher,isSystemRunning=function(){var e=!1;return globalEvent.addEventListenerOnce(consts.Events.SYSTEM_RUNNING,function(){e=!0}),function(){return e}}(),_cookieDomain="/";"/"==_cookieDomain&&(_cookieDomain=location.hostname),function(){try{return Array.prototype.slice.call([1]),void(utils.cloneArray=function(e){return Array.prototype.slice.call(e)})}catch(e){}var t=[];utils.cloneArray=function(e){return t.slice.call(e)}}(),utils.cloneObject=function(e){var t={};for(var n in e)if(utils.isArray(e[n]))t[n]=utils.cloneArray(e[n]);else if(null!==e[n])switch(typeof e[n]){case"boolean":case"number":case"string":case"undefined":t[n]=e[n];break;case"object":t[n]=utils.cloneObject(e[n])}else t[n]=null;return t},utils.extentObject=function(e,t){for(var n in e)if(null!==e[n]&&void 0!==e[n]||null===t[n])if(utils.isArray(e[n]))t[n]=utils.cloneArray(e[n]);else if(void 0!==t[n])switch(typeof e[n]){case"boolean":case"number":case"string":t[n]=e[n];break;case"object":t[n]=utils.extentObject(e[n],t[n])}else t[n]=e[n];return t},utils.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},com.utils=com.utils||{},com.utils.Signal=function(){function e(e,t,n,i,r){this._listener=t,this._isOnce=n,this.context=i,this._signal=e,this._priority=r||0}function t(e,t){if("function"!=typeof e)return void utils.logError("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function n(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){n.prototype.dispatch.apply(e,arguments)}}return e.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,n,i,r){var o,a=this._indexOfListener(t,i);if(a!==-1){if(o=this._bindings[a],o.isOnce()!==n)return void utils.logError("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,n,i,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===e&&n.context===t)return i;return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,n,i){return t(e,"add"),this._registerListener(e,!1,n,i)},addOnce:function(e,n,i){return t(e,"addOnce"),this._registerListener(e,!0,n,i)},remove:function(e,n){t(e,"remove");var i=this._indexOfListener(e,n);return i!==-1&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},n}();var timingPage=function(){function e(){return 0===o&&(o=r(__MinuteGenesis-__genesis)),o}function t(){return 0===a&&(a=r(utils.getTimeNow()-__genesis)),a}function n(){return r(utils.getTimeNow()-__genesis)}function i(){return r(utils.getTimeNow()-__MinuteGenesis)}function r(e){return 100*Math.floor(e/100)}var o=0,a=0;return{getScriptTime:e,getConfigTime:t,getTimeFromGenesis:n,getTimeFromMinuteGenesis:i}}(),EnumDebugTools={HIGHLIGHT_APVS:"highlightAPV",ENABLE_DEBUG:"enableDebug",FORCE_TEST:"forceTest",FORCE_YOUTUBE_API:"forceYtApi",DISABLE_PROD:"disableProd",BYPASS_WINDOW_LOAD:"bypassWindowLoad",ACTIVE_ALL:"activeAll",PREVENT_PAGE_LOAD:"preventPageLoad",ENABLE_BLOCKING_DISTANCE:"enableBD",ENABLE_BLOCKING_DISTANCE_DEBUG:"enableBDDebug",MINUTE_UI_TEST:"uiTest",DEBUG_VISIBILITY:"debugVisibility",FORCE_ENABLE:"forceEnable",FORCE_CONTENT_CHANGED:"forceContentChanged"},EnumDebugData={QUERY_PARAMS_SOURCE:"queryParams",SCRIPT_HOSTNAME:"scriptHostname",IS_PROCUTION:"isProduction"};min.debugParams={},com.utils=com.utils||{},com.utils.Debounce=function(e,t,n){function i(e){E=e||h,d("enableFilter(time="+E+")")}function r(e,t){d("setEcho(time="+e+", repeat="+t+")"),_=e||h,A=t||A}function o(){d("start");var e=arguments.length>0?utils.cloneArray(arguments):v;b(e),C(e)}function a(){d("stop"),c(),y=0}function s(){d("kill"),c(),g=null,m=null,v=null,I=!0}function l(){return f>0}function c(){d("_clear"),l()&&(clearTimeout(f),f=0)}function u(e){P=e}function p(){D=!0,d("debug")}function d(e){D&&utils.log("Deboucer >> "+P+" >> "+e)}var h=e,g=t,m=n||null,v=utils.cloneArray(arguments).slice(3),f=0,E=0,y=0,_=0,A=1,S=0,P="",D=!1,I=!1,b=function(e){if(d("_checkTimeFilter"),!(E<=0)){var t=utils.getTimeNow();0===y&&(y=t);var n=t>y+E;if(n){if(d("****** callback by _checkTimeFilter!"),I)return;if(!g)return void utils.log("Debounce is dead, and timer is running... exiting");g.apply(m,e),y=t}}},C=function(e){d("_startEcho");var t=utils.cloneArray(e);c(),S=0,f=setTimeout(function n(){if(S+1===A&&(t=t.concat(!0)),d("****** callback by echo!"),!I){if(!g)return void utils.log("Debounce is dead, and timer is running... exiting");g.apply(m,t),S++,S<A&&setTimeout(n,h),a()}},h)};return{enableFilter:i,setEcho:r,start:o,stop:a,kill:s,isRunning:l,setName:u,debug:p}},com.utils=com.utils||{},com.utils.Timer=function(e,t,n){function i(){if(0===f){var e=arguments.length>0?utils.cloneArray(arguments):v;S(e)}}function r(e){y=e||0}function o(){_=0}function a(){A=null,d()}function s(){d(),g=null,m=null,v=null,A=null,E.removeAllEventListener()}function l(){return 0!==f}function c(){E.addEventListener.apply(E,utils.cloneArray(arguments))}function u(){E.removeEventListener.apply(E,utils.cloneArray(arguments))}function p(e){g&&g.apply(m,e),0===y||_<y?(_++,E.dispatchEvent(com.utils.Timer.Tick)):d()}function d(){f>0&&(clearInterval(f),f=0)}var h=e,g=t,m=n||null,v=utils.cloneArray(arguments).slice(3),f=0,E=new EventDispatcher,y=0,_=0,A=null,S=function(e){A=e,d(),f=setInterval(function(){p(A)},h)};return{start:i,stop:a,kill:s,reset:o,isRunning:l,setCounterLimit:r,addEventListener:c,removeEventListener:u}},com.utils.Timer.Tick="timerTick",com.utils.Timer.start=function(e){var t=new com.utils.Timer(e);return t.start(),t},function(){function e(e,t){function n(e){e=e||{},g=!!e.isTrackAlsoDisplay,m=e.parentElement||null}function i(){d.start()}function r(){d.stop()}function o(){l=null,d.kill(),d=null,u.removeAll(),u=null,p.removeAll(),p=null}function a(){return g?!!l.offsetParent:(m||document.body).contains(l)}function s(){var e=a();h!==e&&(h=e,h?(c.added&&c.added(),u.dispatch()):(c.removed&&c.removed(),p.dispatch()))}var l=e,c=t||{},u=new com.utils.Signal,p=new com.utils.Signal,d=new com.utils.Timer(500,s),h=a(),g=!1,m=null;return{start:i,stop:r,dispose:o,onAddToDom:u,onRemovedFromDom:p,setTrackingOptions:n}}com.utils.DomElementTracker=e}();var Emitter=function(e,t,n,i,r){function o(e){D=e,I=!!t}function a(n){i&&(n.session=sessionService.getId(),n.user=sessionService.getUserId()),n.url=n.url||e.urls.getCurrentCanonicalURL(),n.stor=!!t}function s(e){E=e}function l(t,n){if(S){if(e.isArray(n))for(var i=0;i<n.length;i++)a(n[i]);else a(n);var r={ver:min.ver,flavor:min.flavor.name,type:t,payload:n};A&&(r.timestamp=e.getTimeNow()),I&&d(r),f.push(r),f.length>=E&&u()}}function c(){S=!1}function u(){if(document&&document.body){if(I&&(f=h(),m([])),0===f.length||P&&!P())return void(f=[]);var t,n=f.slice();f=[];var i=!0;if("string"==typeof n&&""!==n?t=0===n.indexOf('"[{\\"')?JSON.parse(n):n:e.isArray(n)&&n.length>0?t=JSON.stringify(n):e.isArray(n)&&0===n.length?i=!1:(e.sendErrorReport("EmitterEventsCorrupt"),i=!1),!articlesManager.isDebug()&&i&&!articlesManager.isActiveAll()){var r="data="+encodeURIComponent(e.b64EncodeUnicode(t));e.sendReportByUrl(y,r,_)}e.log("Emitter Send: "+JSON.stringify(n)),e.log(n)}}function p(e){P=e}function d(e){var t=h();t.push(e),m(t)}function h(){var t=g(D);return t&&0!==JSON.parse(t).length||!b||e.logWarning("Another chrome tab or IFrame, sent your emitters! Try closing other chrome tabs."),t=t?JSON.parse(t):[],b=!1,t}function g(e){if(!t)return null;try{return t.getItem(e)}catch(n){}return null}function m(e){e.length&&(b=!0),t&&t.setItem(D,JSON.stringify(e))}function v(){globalEvent.addEventListener(consts.Events.THREE_SECONDS_INTERVAL,u,this)}var f=[],E=2,y=n||consts.Urls.ServerData,_=r,A=e.parseBool(i,!0),S=!0,P=null,D=null,I=!1,b=!1;return{enableStorage:o,push:l,disable:c,flush:u,setValidator:p,init:v,setMasQueueLength:s}};!function(){com.reports={},com.reports.Levels={Debug:"debug",Info:"info",Warning:"warning",Error:"error"},utils.sendReportByUrl=function(e,t,n){reportTransactionManager.send(e,t,n)},utils.sendLoggerReport=function(e){var t={ver:min.ver,env:__env,publisher_id:min._publisher,source:compatibility.getAnalyticsSource(),user_id:sessionService.getUserId(),session_id:sessionService.getId(),url:utils.urls.getLocationUrl(),level:e.level||com.reports.Levels.Info,category:e.category||"general",message:"string"==typeof e?e:e.message};e.stack&&(t.stack=e.stack);var n=JSON.stringify(t);reportTransactionManager.sendLog(n),utils.log("Send report: "+n)},utils.sendUserAgentLoggerReport=function(e){reportTransactionManager.sendLog(e)},utils.sendErrorReport=function(e){if(configuration.getIsEnableErrorReport()){var t={};"string"==typeof e?t.message=e||"empty":t.message=e.message||"empty",e.stack&&(t.stack=e.stack),t.level=com.reports.Levels.Error,utils.sendLoggerReport(t)}}}(),function(){utils.urls={},utils.urls.removeTrailingSlash=function(e){return e&&e.length>0&&"/"==e.charAt(e.length-1)?e.substring(0,e.length-1):e},utils.urls.getStructuredRawByUrl=function(){var e=document.createElement("a");return function(t,n){e.href=t;var i="",r=n||com.publisher&&com.publisher.utils&&com.publisher.utils.URL_STRUCT||[consts.UrlStructure.Origin,consts.UrlStructure.PathName];if(0===r.length)return t;for(var o=0;o<r.length;o++)i+=r[o]!==consts.UrlStructure.Origin||e.origin?r[o]!==consts.UrlStructure.PathName||"/"===e[r[o]].charAt(0)?e[r[o]]:"/"+e[r[o]]:window.location.origin;return i}}(),utils.urls.defaultParser=function(e){if(e&&(0===e.indexOf("http")||0===e.indexOf("/"))){var t=utils.urls.getStructuredRawByUrl(e,[consts.UrlStructure.PathName]);return utils.urls.removeTrailingSlash(t)}return null},utils.urls.getCanonicalURL=function(e){for(var t,n,i=com.publisher.getParsers&&com.publisher.getParsers()||[utils.urls.defaultParser],r=0;r<i.length&&(n=i[r],!(t=n(e)));r++);return t||e},utils.urls.getCurrentCanonicalURL=function(){return utils.urls.getCanonicalURL(utils.urls.getLocationUrl())},utils.urls.getRawByUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},utils.urls.parseQueryString=function(e){var t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,i,r){t[n]=r}),t},utils.urls.isUrlHomePage=function(){return"/"==location.pathname},utils.urls.getLocationUrl=function(){return window.self===window.top?window.location.href:document.referrer},utils.urls.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}}(),function(){utils.cleanWindowInstance=function(){var e=document.createElement("iframe");return e.style.display="none",document.head.appendChild(e),e.contentWindow}()}(),function(){var e=function(){function e(e){c=e}function t(){for(var e=0,n=arguments.length;e<n;e++)if(utils.isArray(arguments[e]))for(var i=0,n=arguments[e].length;i<n;i++)t(arguments[e][i]);else 500===u.length&&u.shift(),u.push(arguments[0])}function n(){if(t(arguments[0]),min.debug===!0){var e=c?" [Test Group]":"";if("string"==typeof arguments[0]&&(arguments[0]=e+" "+(utils.getTimeNow()-__genesis)+"ms >> "+arguments[0]),window.self!==window.top&&"string"==typeof arguments[0]){var n=arguments.length>1&&"string"==typeof arguments[1]&&0===arguments[1].indexOf("color:#");arguments[0]=(n?"":"%c ")+"IFrame "+p.id+e+": "+arguments[0];var i=n?arguments[1]:"color:#"+p.color+";",r="undefined"!=typeof arguments[1]&&"string"!=typeof arguments[1]?arguments[1]:"";utils.consoleNative.log(arguments[0],i,r)}else utils.consoleNative.log.apply(console,arguments)}}function i(){min.debug===!0&&utils.consoleNative.log.apply(console,arguments)}function r(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FFAD33;font-weight: bold;font-size:13px";utils.log(t,n)}function o(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FF0000;font-weight: bold;font-size:14px";utils.log(t,n)}function a(e,t,n){l.addEventListener(e,t,n)}function s(){return u}var l=new EventDispatcher,c=null,u=[],p={id:Math.floor(1e3*Math.random()),color:function(){function e(){return Math.floor((Math.ceil(256*Math.random())+(/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(navigator.userAgent)?0:255))/2)}return e().toString(16)+e().toString(16)+e().toString(16)}()};return{log:n,logObject:i,logWarning:r,logError:o,setTestGroup:e,addEventListener:a,getBuffer:s}};com.utils=com.utils||{},com.utils.logger=new e,min.logger=com.utils.logger}(),utils.log=com.utils.logger.log,utils.logObject=com.utils.logger.logObject,utils.logWarning=com.utils.logger.logWarning,utils.logError=com.utils.logger.logError,utils.setTestGroup=com.utils.logger.setTestGroup,utils.consoleNative=utils.cleanWindowInstance.console,function(){!function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}()}(),utils.globalTasks={},utils.globalTasks.listenToWindowErrors=function(){window.addEventListener&&window.addEventListener("error",function(e){e.error&&utils.reportErrorIfNeeded(e.error)})},utils.isDebugEnabled=function(){return utils.debugParamsOverrides(),min.debug},utils.isNative=function(e){return/\{\s*\[native code]\s*}/.test(""+e)},utils.reportErrorIfNeeded=function(e){var t=/(mi-[\d.]*\.js)/i;if(e&&e.stack&&t.test(e.stack)){utils.log("Error found!");var n={ver:min.ver,flavor:min.flavor.name,message:e.message,stack:e.stack};utils.sendErrorReport(n)}},utils.sendBeaconNative=function(){return navigator.sendBeacon||utils.cleanWindowInstance.navigator.sendBeacon?utils.isNative(navigator.sendBeacon)?navigator.sendBeacon:utils.isNative(utils.cleanWindowInstance.navigator.sendBeacon)?utils.cleanWindowInstance.navigator.sendBeacon:null:null}(),utils.generateUID=function(){function e(){return Math.floor((1+Math.random())*utils.getTimeNow()).toString(16).substring(1)}return e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},utils.b64EncodeUnicode=function(e){function t(e){function t(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}var n,i,r,o,a,s,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",p=0;for(e=t(e);p<e.length;)n=e.charCodeAt(p++),i=e.charCodeAt(p++),r=e.charCodeAt(p++),o=n>>2,a=(3&n)<<4|i>>4,s=(15&i)<<2|r>>6,l=63&r,isNaN(i)?s=l=64:isNaN(r)&&(l=64),u=u+c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return u}return(window.btoa||t)(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},utils.timeRounder=function(e){return Math.round(10*e)/10},utils.getComputedStyle=function(e){return window.getComputedStyle(e)},utils.extendObject=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},utils.setMediaElementSize=function(e,t,n){t=t||e.videoWidth||e.naturalWidth,n=n||e.videoHeight||e.naturalHeight,e.setAttribute("data-media_dimensions",t+","+n)},utils.extractElementSize=function(e){var t=e.getBoundingClientRect(),n=parseFloat(t.width),i=parseFloat(t.height);return{width:n,height:i,error:""}},utils.getMediaElementSize=function(e){var t=e.getAttribute("data-media_dimensions");return t?(t=t.split(","),t.length<0&&(t[0]*=1,t[1]*=1),t):null},utils.ElementObjectFit=function(){function e(e){var t="0% 0%";e.style.transformOrigin=t,e.style.webkitTransformOrigin=t,e.style.msTransformOrigin=t,e.style.mozTransformOrigin=t,e.style.oTransformOrigin=t,e.style.maxWidth="none",e.style.maxHeight="none";var n=e.parentNode,i=e.style.borderRadius;0!=i&&(n.style.borderRadius=i,n.style.overflow="hidden")}function t(t,n){if(t.parentNode){var i=utils.getMediaElementSize(t);if(i){var r,o=utils.getComputedStyle(n);if(("100%"!==o.width||"100%"!==o.height)&&"auto"!==o.width&&"auto"!==o.height){var a,s=i[0],l=i[1],c=parseFloat(o.width),u=parseFloat(o.height),p=u/l;
s*p<c&&(p=c/s),a=(s*p-c)/2,p=Math.ceil(10*p)/10,r="scale("+p+")",e(t),t.style.transform=r,t.style.msTransform=r,t.style.mozTransform=r,t.style.webkitTransform=r,t.style.oTransform=r,t.style.width="auto",t.style.height="auto";var d="rtl"===o.direction;d?t.style.right="-"+a+"px":t.style.left="-"+a+"px"}}}}function n(t){t.parentNode&&(e(t),t.style.width="100%",t.style.height="100%")}function i(e){if(!compatibility.isObjectFitSupported()&&e.originalElement){var t=new MutationObserver(function(){r(e)});t.observe(e.originalElement,{attributes:!0}),r(e)}}function r(e){var i;return e.styleOverrides=e.styleOverrides||{},e.isFullSize=utils.parseBool(e.isFullSize,!1),e.styleOverrides[a]?void t(e.mediaElement,e.originalElement,e.styleOverrides[a]):(i=e.styleOverrides[o]?e.styleOverrides[o]||e.mediaElement.style.objectFit:e.mediaElement.style.objectFit||"cover",void("cover"===i&&(e.isFullSize?n(e.mediaElement):t(e.mediaElement,e.originalElement))))}var o="object-fit",a="object-fit-polyfill";return{set:i}}(),utils.isPromise=function(e){return!!e.then},utils.appendDebugToolsQueryData=function(){var e=document.createElement("a");return function(t){var n=utils.getAllDebugParamsString();return e.href=t,n&&(e.search+=(e.search?"&":"")+n),e.href}}(),utils.getAllDebugParamsString=function(){for(var e=Object.keys(EnumDebugTools),t="",n=0;n<e.length;n++){var i=e[n],r=min.debugParams[EnumDebugTools[i]];r&&(t&&(t+="&"),t+="qadt"+EnumDebugTools[i]+"="+r)}return t},utils.debugParamsOverrides=function(e){if(e||!(Object.keys(min.debugParams).length>0)){var t=utils.parseUrlDebugParams();min.debugParams=t,"undefined"!=typeof t[EnumDebugTools.ENABLE_DEBUG]&&(min.debug="true"==t[EnumDebugTools.ENABLE_DEBUG]),utils.parseScriptDomain()}},utils.parseUrlDebugParams=function(){var e=document.createElement("a"),t={};return e.href=utils.urls.getLocationUrl(),t[EnumDebugData.QUERY_PARAMS_SOURCE]="",extractQadtFromString(t,"?",e.search),extractQadtFromString(t,"#",e.hash),t},utils.parseScriptDomain=function(){var e="snippet.minute.ly",t="d2d4r7w8.map2.ssl.hwcdn.net",n=utils.getScriptHostname();min.debugParams[EnumDebugData.IS_PROCUTION]=n===e||n===t,min.debugParams[EnumDebugData.IS_PROCUTION]&&(n=""),min.debugParams[EnumDebugData.SCRIPT_HOSTNAME]=n},utils.getScriptHostname=function(){var e="";if(document.currentScript){var t=document.createElement("a");t.href=document.currentScript.src,e=t.hostname}return function(){return e}}(),utils.validateScraperURL=function(){if(configuration.isScraperEnable())if(compatibility.isIE()||compatibility.isEdge())utils.log("** Scraper disabled on IE and Edge. **");else{if(utils.isCurrentUrlFilterValid(configuration.getFilterScraper()))return utils.log("** Validate Scraper URL is OK! **"),!0;utils.log("** Scraper blocked by Filter URL. **")}else utils.log("** Scraper disabled by configuration for this source **");return emitterService.getPlayerContentDelayed().disable(),!1},utils.isPlacementEnabled=function(e){return"undefined"!=typeof min.debugParams[EnumDebugTools.ACTIVE_ALL]||utils.isCurrentUrlFilterValid(configuration.getFilterPlacements(e))},utils.isCurrentUrlFilterValid=function(e){return utils.isUrlFilterValid(utils.urls.getLocationUrl(),e)},utils.isUrlFilterValid=function(e,t){var n=!0;0===t.white.length||utils.isUrlMatchPattern(e,t.white)||(n=!1);var i=!1;return utils.isUrlMatchPattern(e,t.black)&&(i=!0),n&&!i},utils.isUrlMatchPattern=function(e,t){for(var n,i=0;i<t.length;i++)if(n=new RegExp(t[i],"i"),null!==e.match(n))return!0;return!1},utils["extends"]=function(e,t){e.__superCtor__=t,e.__super__=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},utils.getlistAsArray=function(e){return"string"!=typeof e?e||[]:""===e?[]:JSON.parse(e)},utils.isElementHasSize=function(e){if(!e)return!1;var t=utils.getComputedStyle(e),n=parseInt(t.width,10),i=parseInt(t.height,10);if(i>10&&n>10||"auto"===t.height&&"auto"===t.width)return!0;var r=e.getBoundingClientRect();return r.width>10&&r.height>10},utils.parseBool=function(e,t){return"undefined"==typeof e&&"undefined"!=typeof t?t:"true"===e||e===!0},utils.parsePercentValue=function(e){if(void 0===e||e===!1||"false"===e)return!1;if(e===!0||"true"===e)return!0;var t=parseInt(e,10),n=100*Math.random();return n>t},utils.generateUnique=function(){return"xxxxxxxxxxxx-xxxx-4xxx-yxxxxxx-xxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},utils.generateShortUnique=function(){return"mxxxxx".replace(/[x]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},utils.getRequestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)};return e&&t(e),t},utils.isMidnightPassed=function(e){function t(e){return new Date(e+n)}var n=6e4*utils.getDateNow().getTimezoneOffset(),i=new Date(e).getTime(),r=utils.getDateNow().getTime(),o=t(i),a=t(r),s=a.getYear(),l=o.getYear(),c=a.getMonth(),u=o.getMonth(),p=a.getDate(),d=o.getDate();return s>l||c>u||p>d},utils.calcDateNextMidnightUTC=function(){var e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()+1),e.setTime(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)),e},utils.calcDatePlusMinutesUTC=function(e){var t=new Date;return t.setMinutes(t.getMinutes()+(e||5)),t},utils.windowDispatchEvent=function(e){var t=null;try{t=new Event(e)}catch(n){t=document.createEvent("Event");var i=!1,r=!1;t.initEvent(e,i,r)}window.dispatchEvent(t)},utils.isIFrame=function(){return window.self!==window.top},utils.isInt=function(e){return e%1===0},utils.isSupportIntersectionObserver=function(){var e=window.IntersectionObserver&&utils.isNative(window.IntersectionObserver);return function(){return e}}(),utils.getDayUTCCookie=function(e){e||(e=30);var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toUTCString()},utils.addWinEventListener=function(e,t,n,i){t.addEventListener?t.addEventListener(e,n.bind(i),!1):t.attachEvent&&t.attachEvent(e,n.bind(i))},utils.removeWinEventListener=function(e,t,n,i){t.addEventListener?t.removeEventListener(e,n,!1):t.attachEvent&&t.detachEvent(e,n)},utils.hasOwnProperty=Object.prototype.hasOwnProperty,utils.isObjEmpty=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(utils.hasOwnProperty.call(e,t))return!1;return!0},utils.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},utils.includes=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},utils.isJsonString=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},utils.isDateString=function(e){try{new Date(e)}catch(t){return!1}return!0},utils.getParamsFromUrl=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=n.exec(e);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},utils.isValidURL=function(e){var t={valid:!0,obj:{}};try{t.obj=new URL(e)}catch(n){t.valid=!1}return t},function(){function e(t,n){e.__superCtor__.call(this),this.apvData=t,this.link=n,this._mobileContextMenuTimeoutCode=0,this._mobileTouchStartTime=0,this._mobileTouchEndTimeoutCode=0,compatibility.isMobile()?this.attachMobileEvents():this.attachDesktopEvents()}var t=700,n=1500;utils["extends"](e,EventDispatcher),e.prototype.attachMobileEvents=function(){var e=this,t=function(){e.handleLinkTouchStart(e.apvData)},n=function(){e.handleLinkTouchEnd(e.apvData)};this.link.addEventListener("touchstart",t,!!compatibility.supportsPassive&&{passive:!0,capture:!1}),this.link.addEventListener("touchend",n),this.apvData.onDisposed().addOnce(function(){e.link.removeEventListener("touchstart",t),e.link.removeEventListener("touchend",n)})},e.prototype.attachDesktopEvents=function(){var e=this,t=function(){e.contextMenuHandleOpen(e.apvData)};this.link.addEventListener?(this.link.addEventListener("contextmenu",t),this.apvData.onDisposed().addOnce(function(){e.link.removeEventListener("contextmenu",t)})):(this.link.attachEvent("oncontextmenu",t),this.apvData.onDisposed().addOnce(function(){e.link.detachEvent("oncontextmenu",t)}))},e.prototype.handleLinkTouchStart=function(){var e=this;this._mobileContextMenuTimeoutCode=setTimeout(function(){e.contextMenuHandleOpen()},t),this._mobileTouchEndTimeoutCode=setTimeout(function(){e.handleTouchEndTimeout()},n),this._mobileTouchStartTime=utils.getTimeNow()},e.prototype.handleLinkTouchEnd=function(){if(0!==this._mobileTouchEndTimeoutCode&&(clearTimeout(this._mobileTouchEndTimeoutCode),this._mobileTouchEndTimeoutCode=0),0!==this._mobileContextMenuTimeoutCode){clearTimeout(this._mobileContextMenuTimeoutCode),this._mobileContextMenuTimeoutCode=0;var e=utils.getTimeNow()-this._mobileTouchStartTime;e<t&&this.dispatchEvent("contextMenuOpen",this.apvData)}},e.prototype.handleTouchEndTimeout=function(){this._mobileTouchEndTimeoutCode=0,this.handleLinkTouchEnd(this.apvData)},e.prototype.contextMenuHandleOpen=function(){this.dispatchEvent("contextMenuHandleOpen",this.apvData)},com.utils.ContextMenuObserver=e}(),function(){function e(e,t){function n(){g.addEventListener(p,r,!0),compatibility.isMobile()&&g.addEventListener("touchstart",o,!compatibility.supportsPassive||{passive:!0,capture:!0}),compatibility.isIE()||compatibility.isEdge()?g.addEventListener(consts.Events.MOUSE_UP,i,!0):g.addEventListener(consts.Events.AUXCLICK_EVENT,r,!0)}function i(e){1===e.button&&(h.dispatchEvent(p),t&&(t(),c()))}function r(e){e.type===consts.Events.AUXCLICK_EVENT&&e.button>=2||(h.dispatchEvent(p),t&&(t(e),c()))}function o(){g&&(m=!1,g.addEventListener("touchmove",a,!0),g.addEventListener("touchend",s,!0),u=setTimeout(l,d))}function a(){m=!0}function s(e){m===!1&&r(e)}function l(){g&&(g.removeEventListener("touchmove",a,!0),g.removeEventListener("touchend",s,!0))}function c(){h.removeAllEventListener(),clearTimeout(u),g&&(g.removeEventListener(p,r,!0),g.removeEventListener(consts.Events.AUXCLICK_EVENT,r,!0),g.removeEventListener("touchstart",o,!0),l(),g=null)}var u,p="click",d=350,h=new EventDispatcher,g=e,m=!1;return n(),{addEventListener:h.addEventListener.bind(h),removeEventListener:h.removeEventListener.bind(h),addEventListenerOnce:h.addEventListenerOnce.bind(h),dispose:c}}com.utils=com.utils||{},com.utils.MouseClickEventObserver=e}(),function(){function e(e){function t(){return _}function n(){if(!d){var e=void 0;d=new utils.cleanWindowInstance.XMLHttpRequest,g===s?h+="_.gif?"+f:(g=l,h+="_.gif",e=f);try{d.open(g,h,!0)}catch(t){return}m&&d.setRequestHeader(r,m),d.onload=i,d.onerror=p,d.ontimeout=u,d.timeout=v,d.send(e)}}function i(){d.status>=200&&d.status<300?E.dispatch():y.dispatch("XHR_Complete:"+d.status)}function u(){y.dispatch("timeout")}function p(){y.dispatch("error:"+d.status)}var d,h=e.url||"",g=e.method||s,m=g===s?o:a,v=e.timeout||5e3,f=e.data,E=new com.utils.Signal,y=new com.utils.Signal,_="XHR"+c++;return{getID:t,load:n,onComplete:E,onError:y,Methods:{GET:s,POST:l}}}function t(t,n){var i=new e(t),r=function(e){u[i.getID()]=void 0,i.onComplete.removeAll(),i.onError.removeAll(),n(e)};return u[i.getID()]=i,i.onComplete.addOnce(r),i.onError.addOnce(r),i.load(),i}function n(e,n){return e.method=s,t(e,n)}function i(e,n){return e.method=l,t(e,n)}var r="Content-Type",o="image/gif",a="application/text",s="get",l="post",c=0;com.utils=com.utils||{},com.utils.ajax=com.utils.ajax||{},com.utils.ajax.XHRRequest=e;var u={};com.utils.ajax.sendGetRequest=n,com.utils.ajax.sendPostRequest=i}();var reportTransactionManager=function(){function e(e){n(consts.Urls.Logger,e,consts.ReportMethods.POST)}function t(e){n(consts.Urls.Error,e,consts.ReportMethods.POST)}function n(e,t,n){if(!n&&N)return void c(e+"_.gif?"+t);n=n||consts.ReportMethods.POST;var o=com.utils.ajax;switch(n){case consts.ReportMethods.GIF:r(e,t);break;case consts.ReportMethods.GET:o.sendGetRequest({url:e,data:t},i);break;case consts.ReportMethods.POST:utils.sendBeaconNative?utils.sendBeaconNative.call(navigator,e+"_.gif",t):o.sendPostRequest({url:e,data:t},i)}}function i(e){}function r(e,t){var n=new Image;n.onload=function(){o(this)},n.onerror=function(){utils.sendErrorReport("EmitterErrorContent:NoTrace"),o(this)},n.src=e+"_.gif?"+t,document.body.appendChild(n)}function o(e){try{document.body.removeChild(e)}catch(t){}}function a(){var e=N.getItem(S);e=e?JSON.parse(e):[],V=e}function s(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push({owner:i.owner,url:i.url,state:i.state,time:i.time,retry:i.retry})}return t}function l(){clonedList=s(V),N.setItem(S,JSON.stringify(clonedList)),V=null}function c(e){var t={owner:O,url:e,image:null,state:P,time:0,retry:-1};a(),u(t),V.push(t),l()}function u(e){e.image=p(e),e.time=utils.getTimeNow(),e.retry+=1,e.state=D,document.body.appendChild(e.image)}function p(e){var t=new Image;return t.onload=function(){d(e)},t.onerror=function(){h(e)},t.src=e.url,t}function d(e){a(),m(e),l()}function h(e){if(utils.sendErrorReport("EmitterErrorContent:"+JSON.stringify(e)),e.retry===R)return a(),m(e),void l();var t=e.retry*w;setTimeout(function(){a(),g(e),l()},t)}function g(e){f(e),v(e),u(e),V.push(e)}function m(e){f(e),v(e)}function v(e){for(var t=-1,n=0;n<V.length;n++)e.url===V[n].url&&(t=n);t>-1&&V.splice(t,1)}function f(e){try{document.body.removeChild(e.image)}catch(t){}}function E(){a(),y(),l()}function y(){for(var e,t=0;t<V.length;t++)e=V[t],_(e)&&A(e)}function _(e){if(e.guid===O)return!0;var t=utils.getTimeNow()-e.time;return t>T&&(e.guid=O,e.retry=-1,!0)}function A(e){var t=!1;switch(e.state){case P:case I:t=!0;break;case b:m(e);break;case D:var n=utils.getTimeNow()-e.time;n>C&&(t=!0)}t&&g(e)}var S="_minRTrs",P=0,D=1,I=2,b=3,C=2e4,T=35e3,L=5e3,w=5e3,R=20,O=utils.generateUnique(),N=null,V=null,k=null;return N&&(k=new com.utils.Timer(L,E),k.start()),{send:n,sendLog:e,sendError:t}}(),viewportService=function(){function e(e,t){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=i.right>n.right,a=i.left<n.left,s=i.top>=n.bottom,l=i.bottom<=n.top,c={state:r.FULLY_VISIBLE,percentage:1};return s||l?(c.percentage=0,c.state=r.HIDDEN,c):(a?c.percentage=(i.right-n.left)/i.width:o&&(c.percentage=(i.width-(i.right-n.right))/i.width),c.percentage>0&&c.percentage<1?c.state=r.ANALYTICS_VISIBLE:c.percentage<=0?c.state=r.HIDDEN:c.state=r.FULLY_VISIBLE,c.percentage=c.percentage<0?0:100*c.percentage,c)}function t(t,n){var i,a=100*o(t);if(i=0===a?r.HIDDEN:100===a?r.FULLY_VISIBLE:r.ANALYTICS_VISIBLE,n!==window&&i!==r.HIDDEN&&n){var s=e(t,n);return s.percentage<a?s:{state:i,percentage:a}}return{state:i,percentage:a}}function n(e,n){var i=t(e,n).state;return i!==r.HIDDEN}function i(e,n){return t(e,n).percentage}var r={HIDDEN:0,ANALYTICS_VISIBLE:1,FULLY_VISIBLE:2},o=function(){function e(e){return e&&1===e.nodeType||!1}function t(e){var t=e||window;return{height:t.innerHeight,width:t.innerWidth}}function n(e,t){return(t||window).getComputedStyle(e,null)}function i(e,t){return e.getPropertyValue(t)}function r(t,o){o||(o=n(t));var a=i(o,"display");if("none"===a)return!1;var s=t.parentNode;return!e(s)||r(s)}function o(e,t){if(e===(t||window).document)return!0;if(!e||!e.parentNode)return!1;var o=n(e,t),a=i(o,"visibility");return"hidden"!==a&&"collapse"!==a&&r(e,o)}function a(e,t){return!(!e||e.width<=0||e.height<=0)&&(e.bottom>0&&e.right>0&&e.top<t.height&&e.left<t.width)}return function(e,n){if(!e)return 0;var i={};try{i=e.getBoundingClientRect()}catch(r){return 0}var s=t(n);if(!a(i,s)||!o(e,n))return 0;var l=0,c=0;return i.top>=0?l=Math.min(i.height,s.height-i.top):i.bottom>0&&(l=Math.min(s.height,i.bottom)),i.left>=0?c=Math.min(i.width,s.width-i.left):i.right>0&&(c=Math.min(s.width,i.right)),l*c/(i.height*i.width)}}();return{isElementVisible:n,getViewportState:t,getElementVisiblePercents:i,state:r}}(),CookiesService=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return"true"===e||"false"===e||t(e)?JSON.parse(e):e}function i(t){function r(i,o,a){var s;if("undefined"!=typeof document){if(arguments.length>1){if(a=e({path:"/"},r.defaults,a),"number"==typeof a.expires){var l=utils.getDateNow();l.setMilliseconds(l.getMilliseconds()+864e5*a.expires),a.expires=l.toUTCString()}else"function"==typeof a.expires.toUTCString&&(a.expires=a.expires.toUTCString());try{s=JSON.stringify(btoa(o)),/^[\{\[]/.test(s)&&(o=s)}catch(c){}return i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",encodeURIComponent(o),a.expires&&"; expires="+a.expires,a.path&&"; path="+a.path,a.domain&&"; domain="+a.domain,a.secure?"; secure":""].join("")}i||(s={});for(var u=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var h=u[d].split("="),g=h.slice(1).join("=");'"'===g.charAt(0)&&(g=g.slice(1,-1));try{var m=h[0].replace(p,decodeURIComponent);if(g=t.read?t.read(g,m):t(g,m)||g.replace(p,decodeURIComponent),i===m){s=decodeURIComponent(n(g));break}i||(s[m]=g)}catch(c){}}return s}}return r.setItem=function(e,t,n){n||(n=utils.getDayUTCCookie(365)),r(e,t,{domain:_cookieDomain,expires:n})},r.getItem=function(e){return r(e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.removeItem=function(t,n){r(t,"",e(n,{domain:_cookieDomain,expires:-1}))},r.withConverter=i,r.isCookiesEnable=function(){var e=!1;try{r.setItem("_minTest","exist",1),e=!!r.getItem("_minTest"),r.removeItem("_minTest","true")}catch(t){return!1}return e},r.setDefault=function(){_cookieDomain=location.hostname},r}return i(function(){})},StorageService=function(e){function t(){return e.isCookiesEnable()?e:(e.setDefault(),e.isCookiesEnable()?e:null)}return{getLocalStorageInstance:t}},SessionService=function(e,t){function n(e){return E[e]||h(e)}function i(e,t){"undefined"!=typeof e&&o(e,t)}function r(t){if(t===f)return null;var n=new Date(e.getTimeNow()+m).toUTCString();return e.isMidnightPassed(n)&&(n=e.calcDateNextMidnightUTC()),n}function o(e,n){E[e]=n,"undefined"==typeof n&&(n=""),t.setItem(e,n,r(e))}function a(){globalEvent.addEventListener(consts.Events.CLIENT_INIT_ANALYTICS,function(){d()}),window.addEventListener("click",function(){d()},!1),window.addEventListener(consts.Events.AUXCLICK_EVENT,function(e){e.type===consts.Events.AUXCLICK_EVENT&&e.button>=2||d()},!1),globalEvent.addEventListener(consts.Events.IMPRESSION,function(){d()})}function s(){t&&(l(),a(),E=g())}function l(){for(var e=["","1","2","3","4","5","6","7","8","9"],n=0;n<e.length;n++)t.removeItem("minSessionToken"+e[n])}function c(){Object.keys(E).forEach(function(e){t.removeItem(e)}),E={}}function u(){return n(v)}function p(){return n(f)}function d(){Object.keys(E).forEach(function(e){var t=h(e);"undefined"!=typeof t&&null!==t&&o(e,E[e])})}function h(e){return E[e]=t.getItem(e),E[e]}function g(){var n=E,i=t.getItem(f);i||(i=e.generateUID(),o(f,i)),n[f]=i;var r=t.getItem(v);return r||(r=e.generateUID(),o(v,r)),n[v]=r,n}var m=18e5,v="minSID",f="minUID",E={};return{get:n,set:i,reset:c,init:s,getId:u,getUserId:p}},StorageBufferManager=function(){function e(){var e=new Date(utils.getTimeNow()+consts.SESSION_TTL).toUTCString();return utils.isMidnightPassed(e)&&(e=utils.calcDateNextMidnightUTC()),e}function t(e){for(var t in r)if(r.hasOwnProperty(t))for(var n=r[t].keys,i=0;i<n.length;i++)if(n[i]===e)return t;return null}function n(t){switch(t){case"session":return e();case"daily":return utils.calcDateNextMidnightUTC();default:return t}}var i=null,r={},o=function(e){function i(i,o){var a=t(i);if(!a)return void e.setItem(i,o);var s,l=r[a]||{},c=n(l.expiration);try{s=JSON.parse(e.getItem(a))}catch(u){s={}}s[i]=o,e.setItem(a,JSON.stringify(s),c)}function o(n){var i=t(n);if(!i)return e.getItem(n);var r=JSON.parse(e.getItem(i)||null)||{};return n in r?r[n]:null}function a(n){var i=t(n);if(!i)return void e.removeItem(n);var o=r[i]||{},a=o.expiration,s=JSON.parse(e.getItem(i)||null)||{};delete s[n],utils.isEmpty(s)?e.removeItem(i):e.setItem(i,JSON.stringify(s),a)}function s(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])}return{setItem:i,getItem:o,removeItem:a,setConfig:s}};return{getInstance:function(e){if(!i){var t=e.getLocalStorageInstance();t?i=o(t):utils.logWarning("No available cookie storage")}return i}}}(),LocalStorageManager=function(){var e="min",t=function(t){return e+t},n=function(e){this.localStorage=e};return n.prototype.getItem=function(e){var n=this.localStorage.getItem(t(e));return null!=n&&(n=JSON.parse(n)),n},n.prototype.setItem=function(e,n){return this.localStorage.setItem(t(e),JSON.stringify(n))},n.prototype.removeItem=function(e){return this.localStorage.removeItem(t(e))},n}();!function(){var e={};com.utils=com.utils||{},com.utils.ApvElementUtils=e,e.setElementAsReplaced=function(e){e.setAttribute("data-apv_replaced","true")},e.unmarkElementAsReplaced=function(e){e.setAttribute("data-apv_replaced",!1)},e.removeApv=function(e){e.minContainer.remove(),com.utils.ApvElementUtils.unmarkElementAsReplaced(e.elementToReplace)},e.testIsValidRatio=function(e){var t=e.clientWidth,n=e.clientHeight;return!(t/n<configuration.getValidRatio())},e.getIsElementReplaced=function(e){return"true"===e.getAttribute("data-apv_replaced")}}();var Compatibility=function(e){function t(e){var t,i,r=e.compatibility;switch(typeof r){case"undefined":return;case"string":r=JSON.parse(r)}c.isDeviceMobile()?(t=r.mobile||{},i=r.os||{},n(p,i)):t=r.desktop||{},u=n(u,t)}function n(e,t){for(var n in t)e.hasOwnProperty(n)&&(e[n]=t[n]);return e}function i(e){t(e)}function r(){if(!u[c.browserName()])return!1;if(c.browserMajorVersion()<u[c.browserName()])return!1;if(c.isDeviceMobile()){var e=c.osVersion();if(c.isOSAndroid())return a(e,p.android)>=0;if(c.isOSiOS())return a(e,p.ios)>=0}return!0}function o(){return c.isDeviceDesktop()?consts.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP:consts.Emitter.ANALYTICS_SOURCE_WEB_MOBILE}function a(e,t){for(var n=0;n<3;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function s(){return!(c.isBrowserIE()||c.isBrowserEdge())}function l(){var e=window.navigator.userAgent.toLowerCase(),t=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e);return t}var c=e,u={firefox:48,msie:99,edge:14,chrome:53,safari:9,crios:99},p={android:[4,4,4],ios:[10,3,3]},d=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(n){}return e}();return{init:i,isBrowserSupported:r,isSafari:c.isBrowserSafari,isIE:c.isBrowserIE,isEdge:c.isBrowserEdge,isFF:c.isBrowserFirefox,isObjectFitSupported:s,isMobile:c.isDeviceMobile,isDesktop:c.isDeviceDesktop,isChrome:c.isBrowserChrome,isAndroid:c.isOSAndroid,isiPad:c.isDeviceIPad,isIosSafari:c.isBrowserSafari,getAnalyticsSource:o,isLPM:c.isLPM,isDataSaverOn:c.isDataSaverOn,isDeviceTablet:l,supportsPassive:d}},CompatibilityFactory=function(){function e(e){var t=null;return t=com.publisher.Compatibility?new com.publisher.Compatibility(e):new Compatibility(e)}return{create:e}},Configuration=function(e,t,n){function i(e,n,i,l){pe=e.config,de=e.system,pe=t.extentObject(he,pe),fe=i,ge=l,me=n,Ee=n.isDesktop(),ye=n.isiPad(),r(),o(),a(),s(),c(),u(),globalEvent.dispatchEvent(consts.Events.CONFIG_READY,this)}function r(){pe.general=pe.general||{},pe.general.testGroupSize=parseInt(pe.general.testGroupSize||"10"),pe.general.errorReport=t.parsePercentValue(pe.general.errorReport),pe.general.shareMinuteEvent=t.parseBool(pe.general.shareMinuteEvent,!1),pe.general.shouldWaitForLoadEvent=t.parseBool(pe.general.shouldWaitForLoadEvent,!1),pe.general.welcomeToMinuteSize=pe.general.welcomeToMinuteSize||consts.WELCOME_TO_MINUTE_SIZE.BIG}function o(){pe.regularPlacer=pe.regularPlacer||{};var e=pe.regularPlacer.filter||{};e.mobile&&me.isMobile()?e=pe.regularPlacer.filter.mobile:e.desktop&&Ee&&(e=pe.regularPlacer.filter.desktop),e.white=e.white||[],e.black=e.black||[],pe.regularPlacer.filter=e,pe.regularPlacer.blockingDistance=pe.regularPlacer.blockingDistance||{},pe.regularPlacer.blockingDistance.active=t.parseBool(pe.regularPlacer.blockingDistance.active,!0),pe.regularPlacer.blockingDistance.radius=parseInt(pe.regularPlacer.blockingDistance.radius||"600"),pe.regularPlacer.blockingDistance.staticBlockersSelector=pe.regularPlacer.blockingDistance.staticBlockersSelector||"emptyElement",pe.regularPlacer.blockingDistance.enableDupVidid=t.parseBool(pe.regularPlacer.blockingDistance.enableDupVidid,!1),pe.regularPlacer.validRatio=parseFloat(pe.regularPlacer.validRatio||.9),pe.regularPlacer.showLogo=t.parseBool(pe.regularPlacer.showLogo,!0),pe.regularPlacer.logoPosition=pe.regularPlacer.logoPosition||"top-right",pe.regularPlacer.clickByPoint=t.parseBool(pe.regularPlacer.clickByPoint,!1),pe.regularPlacer.applyZIndexReorder=t.parseBool(pe.regularPlacer.applyZIndexReorder,!0),pe.regularPlacer.renderModulus=parseInt(pe.regularPlacer.renderModulus||60),pe.regularPlacer.minimumWidth=parseInt(pe.regularPlacer.minimumWidth||100),pe.regularPlacer.minimumHeight=parseInt(pe.regularPlacer.minimumHeight||50),pe.regularPlacer.watchFull=pe.regularPlacer.watchFull||{},me.isMobile()&&pe.regularPlacer.watchFull.mobile?pe.regularPlacer.watchFull=pe.regularPlacer.watchFull.mobile:Ee&&pe.regularPlacer.watchFull.desktop&&(pe.regularPlacer.watchFull=pe.regularPlacer.watchFull.desktop),pe.regularPlacer.watchFull.active=t.parseBool(pe.regularPlacer.watchFull.active,!1),pe.regularPlacer.watchFull.active&&(pe.regularPlacer.watchFull.minimumWidth=parseInt(pe.regularPlacer.watchFull.minimumWidth||500),pe.regularPlacer.watchFull.text=pe.regularPlacer.watchFull.text||"Watch Full Video",pe.regularPlacer.watchFull.position=pe.regularPlacer.watchFull.position||["bottom","left"]),me.isiPad()||me.isMobile()?pe.regularPlacer.playmode=consts.playmode.VIEWPORT:pe.regularPlacer.playmode="hover"==pe.regularPlacer.playmode?consts.playmode.HOVER:consts.playmode.VIEWPORT,pe.regularPlacer.maxApvsPerPage=parseInt(pe.regularPlacer.maxApvsPerPage||999),pe.regularPlacer.noDuplicateVideos=t.parseBool(pe.regularPlacer.noDuplicateVideos,!1),pe.regularPlacer.trackSize=t.parseBool(pe.regularPlacer.trackSize,!0),pe.regularPlacer.disableParentTransfrom=t.parseBool(pe.regularPlacer.disableParentTransform,!1)}function a(){pe.inArticlePlacer=pe.inArticlePlacer||{},Ee&&pe.inArticlePlacer.desktop?pe.inArticlePlacer=pe.inArticlePlacer.desktop:!Ee&&pe.inArticlePlacer.mobile&&(pe.inArticlePlacer=pe.inArticlePlacer.mobile),pe.inArticlePlacer.active=t.parseBool(pe.inArticlePlacer.active,!1),pe.inArticlePlacer.showLogo=t.parseBool(pe.inArticlePlacer.showLogo,!0),pe.inArticlePlacer.logoPosition=pe.inArticlePlacer.logoPosition||"top-right",pe.inArticlePlacer.viewportMask=pe.inArticlePlacer.viewportMask||"emptySelector",pe.inArticlePlacer.filter=pe.inArticlePlacer.filter||{},pe.inArticlePlacer.filter.white=pe.inArticlePlacer.filter.white||[],pe.inArticlePlacer.filter.black=pe.inArticlePlacer.filter.black||[],pe.inArticlePlacer.watchFull=pe.inArticlePlacer.watchFull||{},pe.inArticlePlacer.watchFull.active=t.parseBool(pe.inArticlePlacer.watchFull.active,!1),pe.inArticlePlacer.watchFull.active&&(pe.inArticlePlacer.watchFull.minimumWidth=parseInt(pe.inArticlePlacer.watchFull.minimumWidth||500),pe.inArticlePlacer.watchFull.text=pe.inArticlePlacer.watchFull.text||"Watch Full Video",pe.inArticlePlacer.watchFull.position=pe.inArticlePlacer.watchFull.position||["bottom","left"])}function s(){pe.scraper=pe.scraper||{},pe.scraper.filter=pe.scraper.filter||{},pe.scraper.filter.white=pe.scraper.filter.white||[],pe.scraper.filter.black=pe.scraper.filter.black||[],pe.scraper.enableEventCollection=t.parseBool(pe.scraper.enableEventCollection,!1),pe.scraper.type2=t.parseBool(pe.scraper.type2,!1),pe.scraper.IAContainers=pe.scraper.IAContainers||"emptySelector",pe.scraper.featuredWrapper=pe.scraper.featuredWrapper||null,pe.scraper.autopush&&t.isArray(pe.scraper.autopush)?pe.scraper.autopush=pe.scraper.autopush:pe.scraper.autopush=[]}function l(){return document.querySelector(pe.inArticlePlacer.viewportMask)||window}function c(){de.rezVideo||(de.rezVideo={s:100,m:200,l:300})}function u(){pe.metadataEnhancer=pe.metadataEnhancer||{},pe.metadataEnhancer.publishedAt=pe.metadataEnhancer.publishedAt||{},pe.metadataEnhancer.tags=pe.metadataEnhancer.tags||{}}function p(){return ve}function d(){return"number"!=typeof ve&&(ve=ve.replace("MIN-","")),parseInt(ve)}function h(){return pe.scraper.filter}function g(e){return e==consts.Emitter.PRODUCT_IN_ARTICLE?pe.inArticlePlacer.filter:pe.regularPlacer.filter}function m(){return de.rezVideo}function v(){return de.rezVertical}function f(){return Ee&&!ye}function E(){return pe.scraper.enableEventCollection}function y(){return pe.scraper.type2}function _(){return pe.scraper.IAContainers}function A(){return pe.scraper.featuredWrapper}function S(){return 50}function P(){return 1}function D(){return 1}function I(){return pe.regularPlacer.blockingDistance.staticBlockersSelector}function b(){return 10}function C(){return pe.general.testGroupSize}function T(){return"opacity 0.5s ease-out"}function L(){return!!t.sendBeaconNative&&!me.isEdge()}function w(){return pe.placements||[]}function R(){return"Optimized by minute.ly"}function O(){return de.baseVideoUrl||""}function N(){return pe.general.errorReport}function V(){return pe.inArticlePlacer.active}function k(){return pe.inArticlePlacer.showLogo}function M(){return pe.inArticlePlacer.logoPosition}function U(){return pe.regularPlacer.maxApvsPerPage}function F(){return pe.regularPlacer.minimumWidth}function B(){return pe.regularPlacer.minimumHeight}function x(){return pe.regularPlacer.validRatio}function W(){return pe.regularPlacer.logoPosition}function Y(){return pe.regularPlacer.renderModulus}function H(){return pe.regularPlacer.applyZIndexReorder}function J(){return pe.regularPlacer.showLogo}function G(){return pe.regularPlacer.watchFull}function z(){return pe.regularPlacer.disableParentTransform}function q(){return pe.regularPlacer.playerTransformScale}function K(){return pe.regularPlacer.containerTransformScale}function j(){return pe.inArticlePlacer.watchFull}function Z(){return pe.regularPlacer.blockingDistance.radius}function X(){return pe.regularPlacer.clickByPoint}function Q(){return de.server_version}function $(){return"https://minute.ly"}function ee(){return pe.general.shareMinuteEvent}function te(e){if(me.isMobile())return consts.playmode.VIEWPORT;var t=pe.regularPlacer.playmode;return e===consts.Emitter.PRODUCT_IN_ARTICLE&&(t=pe.inArticlePlacer.playmode),Object.values(consts.playmode).indexOf(t)===-1?consts.playmode.VIEWPORT:t}function ne(){return pe.general.shouldWaitForLoadEvent}function ie(){return pe.regularPlacer.noDuplicateVideos}function re(){return pe.regularPlacer.blockingDistance.active}function oe(){return t.parseBool(pe.regularPlacer.ignoreShouldRender,!1)}function ae(){return pe.scraper.autopush}function se(){return pe.regularPlacer.trackSize}function le(){return pe.general.welcomeToMinuteSize}function ce(){return pe.metadataEnhancer.publishedAt}function ue(){return pe.metadataEnhancer.tags}var pe={},de={},he={},ge=null,me=null,ve=e._publisher,fe=null,Ee=null,ye=null;return{init:i,getFilterPlacements:g,getStaticBlockerSelector:I,getEpsilonPercentage:b,getMaxApvsPerPage:U,getMinimumWidth:F,getMinimumHeight:B,getValidRatio:x,getLogoPosition:W,getRenderModulus:Y,shouldApplyZIndexReorder:H,getShowLogo:J,getRegularPlacerWatchFullSettings:G,isClickByPointEnabled:X,getBlockingDistanceRadius:Z,noDuplicateVideos:ie,isBlockingServiceActive:re,shouldTrackSize:se,getDisableParentTransform:z,getRegularPlacerPlayerTransformScale:q,getRegularPlacerContainerTransformScale:K,getTestGroupSize:C,getIsEnableErrorReport:N,shareMinuteEvent:ee,shouldWaitForLoadEvent:ne,getPublisherId:p,getPublisherIdNumber:d,
getRezVideo:m,getRezVertical:v,getViewportAnalyticsPercentage:S,getViewportAnalyticsTimeSpan:P,getViewportPercentage:D,getEffectApvTransitionVideo:T,getCanReportImmediately:L,getTooltip:R,getBaseVideoUrl:O,getRelativePlacements:w,getServerVersion:Q,getBaseLinkUrl:$,getPlaymode:te,isInArticlePlacerActive:V,getInArticleViewportMask:l,getInArticleShowLogo:k,getInArticleLogoPosition:M,getInArticlePlacerWatchFullSettings:j,getIgnoreShouldRender:oe,isScraperEnable:f,getFilterScraper:h,isScraperEnableEventCollection:E,getScraperType2:y,getIAContainers:_,getFeaturedWrapper:A,getAutopushCriteria:ae,getWelcomeToMinuteSize:le,getPublishedAtConfig:ce,getTagsConfig:ue}},HighlightsService=function(e,t,n,i){function r(e){var t=0;return 1==e&&(t=2),n.isMobile()&&t++,t}function o(e,t){return""+e.hltId+"_"+t}function a(e,n){var i=s(),r=o(e,n);if(!(i.indexOf(r)>-1)){for(;i.length>200;)i.shift();i.push(r),t.setItem(I,i.toString())}}function s(){var e=t.getItem(I);return e?e=e.split(","):[]}function l(e,t){for(var n=s(),i=0;i<n.length;i++)for(var r=n[i],a=0;a<e.length;a++){var l=o(e[a],t);if(l==r)return e[a]}return null}function c(t,n){for(var i=null,o=r(n),a=0;a<t.length;a++){var s=t[a];s.weights[o]&&(i&&e.logError("more than one hlt is set to product"),i=s)}return i}function u(e,t){var n=c(e,t);a(n,t)}function p(t,n){for(var i=0,r=0;r<t.length;r++){var o=t[r];i+=o.weights[P[D[n]]]}for(var a=Math.random(),s=0,l=0;l<t.length;l++){var o=t[l];if(s+=o.weights[P[D[n]]],a<s/i)return o}e.logWarning("shouldnt get here")}function d(e,t){switch(e.length){case 0:return null;case 1:return e[0]}var n=l(e,t);return n||(n=p(e,t)),n}function h(e,t){return e&&(e.weights=[0,0,0,0],e.weights[P[t]]=1),e}function g(t){return t.weights.split||e.logWarning("weights are not string, make sure no two snippets and config is well"),t.weights=t.weights.split?t.weights.split(","):t.weights,t.weights=t.weights.map(Number),t}function m(t){for(var n=[],i={},r=0;r<D.length;r++)i[D[r]]=[];for(var o=0;o<t.length;o++){var a=t[o];a=g(a);for(var s=0;s<D.length;s++){var l=P[D[s]];a.weights[l]>0&&i[D[s]].push(a)}}for(var r=0;r<D.length;r++){var c=d(i[D[r]],r);if(c){var u=e.cloneObject(c);u=h(u,D[r]),v(n,u)&&e.logError("shouldnt choose two of the exact same"),n.push(u)}}return n}function v(e,t){for(var n=Object.keys(t),i=0;i<e.length;i++){var r=!1,o=e[i];if(n.length===Object.keys(o).length){for(var a=0;a<n.length;a++){if(e[i][n[a]]!==t[n[a]]){r=!1;break}r=!0}if(r)return!0}}return!1}function f(e){return b?Math.floor(100*Math.random())+1:e}function E(t){if(0==t.length)return t;for(var n=0;n<t.length;n++){var i=t[n];i.rank&&(e.isArray(i.rank)?e.logWarning("BlockingD: should not run twice on rank param..."):i.rank=i.rank.split(","),i.rank=parseFloat(i.rank[P.REGULAR]),i.rank=f(i.rank))}return t}function y(e){var t=[];switch(e.length){case 0:t=[];break;case 1:var n=g(e[0]);t=[n];break;default:t=m(e)}return t=E(t)}function _(t,n){for(var i=r(n),o=!1,a=0;a<t.length;a++){var s=t[a];if(s.weights[i]>0){if(0==!!s.vidUrl)continue;o&&e.logError("shouldnt be more than one highlight per product at this stage"),o=!0}}return o}function A(){b=Math.floor(100*Math.random())<i.getEpsilonPercentage(),b&&e.log("BlockingD: This page is now Epsilon")}function S(t){var n=c(t,consts.Emitter.PRODUCT_APV);return!!n&&e.parseBool(n.hasVertical,!1)}var P={};P.REGULAR=n.isDesktop()?0:1,P.IN_ARTICLE=n.isDesktop()?2:3;var D=Object.keys(P),I="ViewedHlts",b=!1;return{init:A,initActiveHighlights:y,setHighlightViewed:u,getHltByProduct:c,hasAPVByProduct:_,supportVertical:S}},ArticleDataFactory=function(e,t){function n(n){function i(){if(d=parseInt(y.id),E=y.articleUrl,g=e.parseBool(y.doesCollect),h=parseInt(y.minVidId),m=y.videoRatio?parseFloat(y.videoRatio):1.78,v=y.highlights,f=y.vidId,v&&e.isArray(v))for(var t=0;t<v.length;t++)v[t].vidUrl="https://"+_+v[t].vidUrl}function r(){return d}function o(e){return highlightsService.hasAPVByProduct(v,e)}function a(){return E}function s(){return g}function l(){return f}function c(){return h}function u(){return v}function p(){return m}var d,h,g,m,v,f,E,y=e.cloneObject(n),_=t.getBaseVideoUrl();return i(),{getArticleId:r,getArticleUrl:a,getDoesCollect:s,getPublisherVideoId:l,getVideoDBId:c,getHighlights:u,getVideoRatio:p,hasAPVByProduct:o}}function i(e){return new n(e)}return{create:i}},ArticlesManager=function(e,t,n,i,r){function o(e,t){return t+"_"+e}function a(e,t,n){e[t]?e[t].push(n):e[t]=[n]}function s(t){for(var n,s=0;s<t.length;s++){n=t[s],n.highlights=r.initActiveHighlights(n.highlights);var l=i.create(n);S.push(l);var c=o(l.getPublisherVideoId(),l.getArticleUrl());D[c]?e.logWarning("didn't add duplicate unifiedKey"):(a(P,l.getArticleUrl(),l),a(D,l.getArticleUrl(),l),a(D,c,l),l.getDoesCollect()&&a(I,c,l))}}function l(t){_=t.videos||[],E=min.debugParams[EnumDebugTools.ACTIVE_ALL]||min.debugParams[EnumDebugTools.MINUTE_UI_TEST],e.log("VideoManager total original video count: "+_.length),s(_),e.log("VideoManager total videos for IA: "+Object.keys(D).length+" and Regulars: "+Object.keys(P).length)}function c(t){if(!p()){var n=t.videos||[];_=_.concat(n),e.log("VideoManager append total original video count: "+_.length),s(n,!0),e.log("VideoManager total valid video count: "+S.length),globalEvent.dispatchEvent(consts.Events.VIDEOS_UPDATE)}}function u(){return A!==y}function p(){return E||localStorage&&!!localStorage.getItem("minActiveAll")}function d(){return S.length}function h(e){return!!e&&(!!p()||!!D[e])}function g(t){if(p())return P[Object.keys(P)[0]][0];if(t){t=e.urls.getCanonicalURL(t);var n=P[t];if(n&&0!=n.length){if(1===n.length)return n[0];for(var i=void 0,r=0;r<n.length;r++){var o=n[r];if(o.hasAPVByProduct(consts.Emitter.PRODUCT_APV)){if(i){e.logError("more than one video is set as featured/regular for url: "+t);break}i=o}}return i}}}function m(t,n){n=n||(e.urls.isUrlHomePage()?t:e.urls.getCurrentCanonicalURL());var i=o(t,n),r=D[i];return r&&0!==r.length?(r.length>1&&e.logError("Not suppose to get multiple publisher video id in the same Article Url."),r[0]):null}function v(t,n){n=n||e.urls.getCurrentCanonicalURL();var i=o(t,n),r=I[i];return r&&0!==r.length?(r.length>1&&e.logError("Not suppose to get multiple publisher video id in the same Article Url."),r[0]):null}function f(t){return i.create({id:0,videoId:t,articleUrl:e.urls.getCurrentCanonicalURL(),doesCollect:!1,highlights:[]},!0)}var E,y=-2,_=[],A=y,S=[],P={},D={},I={};return{init:l,isDebug:u,appendVideos:c,isActiveAll:p,getArticlesListLength:d,getRegularArticleDataByURL:g,generateArticleData:f,hasInArticleArticleDataForUrl:h,getInArticleArticleData:m,getCrowdSourceArticleData:v}},PlacementDataFactory=function(){function e(e){function t(){u.selectors=u.selectors||{}}function n(){return u.selectors.preview}function i(){return u.selectors.size||""}function r(){return u.selectors.anchor}function o(){return u.selectors.container}function a(){return u.selectors.viewportMask}function s(){return u.selectors.viewportObserver}function l(){return u.name}function c(){return u.method}var u=e;return t(),{getPreviewSelector:n,getSizeSelector:i,getAnchorSelector:r,getContainerSelector:o,getName:l,getMethod:c,getViewportMaskSelector:a,getViewportObserverSelector:s}}function t(t){return new e(t)}return{create:t}},PlacementsManager=function(e,t,n){function i(t){if(s=t.getRelativePlacements(),0===s.length)return void o.log("Configuration has NO PLACEMENTS!");for(var i=n.isDeviceTablet()||!n.isMobile(),r=n.isMobile()&&!n.isDeviceTablet(),c=0;c<s.length;c++){var u=s[c];if(u.source){var p=r&&u.source!==consts.integrationDataSet.SOURCE_MOBILE,d=i&&u.source!==consts.integrationDataSet.SOURCE_DESKTOP;if(d||p)continue}if(u.filter){var h=u.filter;h.white=h.white||[],h.black=h.black||[];var g=!o.isCurrentUrlFilterValid(h);if(g){o.log("** Placement name: "+u.name+" canceled by placement filter. See placement. **");continue}}if(!u.selectors)return e.log("no selectors where set"),void(u.selectors={});u.selectors.preview=u.selectors.preview||"img",u.selectors.anchor=u.selectors.anchor||"a",u.selectors.click=u.selectors.click||"",l.push(a.create(u))}}function r(){return l}var o=e,a=t,s=[],l=[];return{init:i,getAllPlacements:r}},windowEventsService=function(){function e(){i(),r(),o(),a(),l(),t()}function t(){window.addEventListener("visibilitychange",function(){s(consts.Events.DomWindow.VISIBILITY_CHANGE)})}function n(e,t){var n=new com.utils.Debounce(t,s,null,e);n.enableFilter(),window.addEventListener(e,function(e){n.start()},!0)}function i(){var e=new com.utils.Debounce(p,s,null,consts.Events.DomWindow.SCROLL);e.enableFilter();var t;compatibility.isMobile()&&compatibility.isSafari()&&(t=new com.utils.Debounce(1e3,s,null,consts.Events.DomWindow.SAFARI_FOCUS),t.enableFilter()),window.addEventListener(consts.Events.DomWindow.FOCUS,function(n){e.start(),t&&t.start()})}function r(){var e=function(){globalEvent.dispatchEvent(consts.Events.DomWindow.BLUR)};window.addEventListener?window.addEventListener(consts.Events.DomWindow.BLUR,e,!1):window.attachEvent&&window.attachEvent(consts.Events.DomWindow.BLUR,e)}function o(){n(consts.Events.DomWindow.RESIZE,u)}function a(){min.debugParams[EnumDebugTools.DEBUG_VISIBILITY]&&utils.log("DEBUG_VISIBILITY: scroll is calculated relative to window"),n(consts.Events.DomWindow.SCROLL,c)}function s(e,t){globalEvent.dispatchEvent(e,!!t)}function l(){(compatibility.isMobile||compatibility.isiPad())&&"undefined"!=typeof window.onorientationchange&&window.addEventListener(consts.Events.DomWindow.ORIENTATION_CHANGE,function(){setTimeout(function(){s(consts.Events.DomWindow.ORIENTATION_CHANGE,!0)},1e3)})}var c=100,u=50,p=50;return{init:e}}(),ServerDataLoader=function(e,t){function n(e,t){t||(t={});var n=t.callbackName||"void",i=t.onSuccess||c,r=t.onTimeout||c,o=window.setTimeout(function(){window[n]=c,r()},l);window[n]=function(e){window.clearTimeout(o),i(e),window[n]=function(){}};var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,document.getElementsByTagName("head")[0].appendChild(a)}function i(e){return("jsc"+utils.b64EncodeUnicode(e||"JsonMinuteReadyNoURL")).replace(/=/g,"")}function r(e){return encodeURIComponent(utils.b64EncodeUnicode(e))}function o(o){if(e.isBrowserSupported()){s=s||min._publisherDebugUrl||consts.Urls.Configuration+"api/"+t.getServerVersion()+"/web/configuration/"+min._publisher+"/"+u+"/"+p+".json?",o.onSuccess=o.onSuccess||a,o.onTimeout=o.onTimeout||c;var l=s,h=o.pageUrl||utils.urls.getCurrentCanonicalURL(),g=i(h),m={config:!1};l=l.replace(u,r(h)),l=l.replace(p,r(JSON.stringify(m))),l+="callback="+g,d.indexOf(h)>-1||(d.push(h),n(l,{callbackName:g,onTimeout:o.onTimeout,onSuccess:o.onSuccess}))}}function a(e){articlesManager.appendVideos(e)}var s,l=e.isMobile()?1e4:5e3,c=function(){},u="[article_url]",p="[params]",d=[];return{loadNextArticle:o}},MessageCompressionService=function(){function e(e){var t={};for(var i in e){var r="undefined"!=typeof n[i];if(r){var o=n[i];t[o]=e[i]}else t[i]=e[i]}return t}function t(e){var t={};for(var n in e){var i="undefined"!=typeof r[n];if(i){var o=r[n];t[o]=e[n]}else t[n]=e[n]}return t}var n={id:"a",highlight_id:"b",comp:"c",publisher:"d",hadImpression:"e",hadImpressionSession:"f",url:"g",script_time:"h",config_time:"i",event_time_from_genesis:"j",event_time_from_minute_genesis:"k",test_mode:"l",playMode:"m",sub_test_group:"n",source:"o",type:"p",placementFunction:"q",uniq:"r",product:"s",placement:"t"},i=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},r=i(n);return{compress:e,extract:t}},DailyTestGroupService=function(e,t,n,i,r,o){function a(){return Math.floor(100*Math.random()+1)<=y}function s(){if(1==t.__minNoTestMode)return v=!1,o.setItem(g,!1),void e.logWarning("Owl no test mode!");var n="undefined"!=typeof r;if(n){if("clear"!==r)return v="true"==r,o.setItem(g,!0),void e.log("Force test group: "+v);e.log("Force RESET test group"),o.removeItem(g)}else;v=l(),f||(e.log("** Is Test Group: "+v),f=!0)}function l(){var t=o.getItem(g);return"undefined"!=typeof t&&null!==t||(t=a(),o.setItem(g,t,e.calcDateNextMidnightUTC())),t}function c(e,t){y=e,E=m.READY,s()}function u(){return E===m.READY}function p(){return v}function d(){return v===!0?"1":"0"}function h(){v=null,f=!1,E=m.NONE,y=null,sessionService.reset()}var g="testMode",m={NONE:0,PENDING:1,READY:2},v=null,f=!1,E=m.NONE,y=null;return{init:c,isReady:u,isTestGroup:p,getGroupCode:d,reset:h}},SessionAnalyticsUsherFactory=function(e,t){function n(){return{time:e.getTimeNow(),list:[]}}function i(){p=n(),o()}function r(){var n;p.time=e.getTimeNow(),n=JSON.stringify(p),n=n.replace(/"/g,""),t.setItem(u,n)}function o(){var e=t.getItem(u);p=e&&c.test(e)?a(e):p||n()}function a(e){var t,n=e.replace("time:",'"time":').replace("list:",'"list":');return n.indexOf("[]")===-1&&(n=n.replace("[",'["').replace("]",'"]'),t=n.split("["),t[1]=t[1].replace(/,/g,'","'),n=t.join("[")),JSON.parse(n)}function s(t){function n(){return o(),p.list.indexOf(a)>-1}function i(){p.time=e.getTimeNow(),p.list.indexOf(a)>-1&&e.logError("Duplicated key in Usher! _key: "+a),p.list.push(a),r()}var a=t;return{isSent:n,setAnalyticState:i}}function l(e,t,n,i,r){var o=e.toString()+t+n+(i?"t":"f")+r;return new s(o)}var c=/{(time):\d+,(list):\[([\d\w,]*)+]}/,u="sessionUniqs",p={};return{get:l,init:i}},AnalyticsService=function(e,t,n,i,r,o){function a(e){p=t.isTestGroup(),u=n.isMobile(),d=!0,h=e}function s(t,n){(d||n)&&r.send(consts.Emitter.VIEWPORT,e.cloneObject(t))}function l(e,t,n){var i=o.get(e.getArticleId(),t.placementFunction,consts.Emitter.CLICK_TYPE_NONE,p,n);i.isSent()||(s(t),i.setAnalyticState())}function c(t,i,r){var o=r&&r.getBelongToUrl()||e.urls.getCurrentCanonicalURL(),a={id:t.getArticleId(),highlight_id:r.getHighlightId(),comp:n.isBrowserSupported()?1:0,publisher:min._publisher,hadImpression:h.hadImpression(t.getPublisherVideoId()),hadImpressionSession:h.hadImpressionSession(),url:o,script_time:timingPage.getScriptTime(),config_time:timingPage.getConfigTime(),event_time_from_genesis:timingPage.getTimeFromGenesis(),event_time_from_minute_genesis:timingPage.getTimeFromMinuteGenesis(),test_mode:p,source:n.getAnalyticsSource()};return e.extendObject(a,i)}var u,p=null,d=!1,h=null;return{init:a,pushAnalytics:s,sendSessionImpression:l,getAnalyticPayloadWithArticleData:c}},MinuteDispatchEventService=function(e,t,n){function i(t){if(t&&n.shareMinuteEvent()){var i=t.apvData&&t.apvData.getBelongToUrl()||e.urls.getCurrentCanonicalURL(),r={url:i,target_url:t.apvData._rawAnchorValue||t.articleData.getArticleUrl(),test_group:testGroupService.isTestGroup(),minute_apv_id:t.apvData.getHighlightId()};if(!t.apvData.uniq){var o=new CustomEvent(consts.Emitter.MINUTE_VIEWPORT_EVENT,{detail:r});window.dispatchEvent(o)}}}return{dispatchImpression:i}},clicksAnalyticsService=function(){function e(e,t){var n=e.getArticleData();n&&(r(n.getArticleId()),u(n,{type:consts.Emitter.ANALYTICS_CLICK_EVENT,uniq:!1,placementFunction:consts.Placements.HOVER_IMPRESSION,product:e.getProduct(),placement:e.getName(),playMode:e.getPlaymodeEnum()},!1,e,t),globalEvent.dispatchEvent(consts.Events.REGULAR_CLICK,e))}function t(t,n){if(!(n.hasDisposed()||g.indexOf(t)>-1)){var i=new com.utils.MouseClickEventObserver(t,function(t){e(n,t)});n.onDisposed().addOnce(function(){setTimeout(i.dispose.bind(i),2e3)}),o(n,t),g.push(t)}}function n(e){for(var n=utils.cloneArray(e.getClickElements()),i=0;i<n.length;i++){var r=n[i];t(r,e)}t(e.getContainerElement(),e)}function i(e){e.getManualClick()&&t(e.getManualClick(),e)}function r(e){h>0&&(clearTimeout(h),h=0,clickLogManager.removeLogDelayById(e))}function o(e,t){var n=new com.utils.ContextMenuObserver(e,t);n.addEventListener("contextMenuOpen",p),n.addEventListener("contextMenuHandleOpen",s)}function a(e){r(e),h=setTimeout(function(){r(e)},d)}function s(e){var t=e.data,n=t.getArticleData();a(n.getArticleId());var i=t.getProduct(),r=analyticsService.getAnalyticPayloadWithArticleData(n,{type:consts.Emitter.CONTEXT_MENU_OPEN_EVENT,placementFunction:consts.Placements.HOVER_IMPRESSION,uniq:!1,product:i},t);clickLogManager.logDelay(r)}function l(t){t.hasDisposed()||t.getDomAdapter().addEventListener(consts.Events.APV_LOGO_CLICK,function(n){e(t,n)})}function c(){var e=articlesManager.getRegularArticleDataByURL(utils.urls.getCurrentCanonicalURL());e&&clickLogManager.sendLogDelayById(e.getArticleId())}function u(e,t,n,i,r){var o=t.product||0,a=o===consts.Emitter.PRODUCT_IN_ARTICLE;if(i||(i=apvDataManager.getApvDataByKeyProduct(e.getPublisherVideoId(),o)),(a||n||configuration.getCanReportImmediately())&&globalEvent.dispatchEvent(consts.Events.INARTICLE_CLICK,i,r),apvDataManager.getShouldSendClickEvent(i)){var s=analyticsService.getAnalyticPayloadWithArticleData(e,t,i);clickLogManager.log(s)}apvDataManager.setClickAlreadySent(i)}function p(e){var t=e.data;clickLogManager.removeLogDelayById(t.getArticleData().getArticleId())}var d=6e4,h=0,g=[];return{addLinkSelector:n,addLogoClickListener:l,sendDelayedClicks:c,addManualAnchor:i,sendClick:u}}(),clientInitAnalytics=function(){function e(e){var t={id:min._publisher,user_agent:navigator.userAgent,uniq:e,test_mode:testGroupService.isTestGroup(),url:utils.urls.getCurrentCanonicalURL(),referrer:document.referrer.substr(0,200),source:compatibility.getAnalyticsSource(),comp:compatibility.isBrowserSupported(),stor:!!storageService.getLocalStorageInstance(),script_time:timingPage.getScriptTime(),config_time:timingPage.getConfigTime(),event_time_from_genesis:timingPage.getTimeFromGenesis(),event_time_from_minute_genesis:timingPage.getTimeFromMinuteGenesis()};emitterService.send(consts.Emitter.URL_REPORT,utils.cloneObject(t)),e&&(t.uniq=!1,emitterService.send(consts.Emitter.URL_REPORT,t)),globalEvent.dispatchEvent(consts.Events.CLIENT_INIT_ANALYTICS)}function t(){n=!1,sessionService.get(i)||(sessionService.set(i,!0),n=!0),e(n)}var n,i="minSessionSent";return{sendUrlReport:t}}(),DailyUserAnalyticsService=function(e,t,n,i,r,o,a,s){function l(){var i={id:min._publisher,user_agent:navigator.userAgent,test_mode:t.isTestGroup(),url:e.urls.getCurrentCanonicalURL(),referrer:document.referrer.substr(0,200),source:n.getAnalyticsSource(),comp:n.isBrowserSupported(),stor:!0,script_time:o.getScriptTime(),config_time:o.getConfigTime(),event_time_from_genesis:o.getTimeFromGenesis(),event_time_from_minute_genesis:o.getTimeFromMinuteGenesis(),daily_user:a.getUserId()};emitterService.send(consts.Emitter.DAILY_USER,i)}function c(){var t=!!i.getItem(consts.StorageSubKeys.dailyUser);t||(l(),i.setItem(consts.StorageSubKeys.dailyUser,!0,e.calcDateNextMidnightUTC()),globalEvent.dispatchEvent(consts.Events.DAILY_USER))}return{start:c}};!function(){function e(){this._observedElements=[]}var t;com.analytics=com.analytics||{};var n={INIT:0,IN_VIEWPORT:1,OUT_VIEWPORT:2,DONE:3};com.analytics.ViewportAnalyticsService=e,e.prototype.init=function(){var e=this;t=configuration.getViewportAnalyticsPercentage(),globalEvent.addEventListener(consts.Events.DomWindow.RESIZE,function(){e._debounceStartAll()}),globalEvent.addEventListener(consts.Events.DomWindow.SCROLL,function(){e._debounceStartAll()}),e._debounceStartAll()},e.prototype.register=function(e){e.getDomAdapter().addEventListener(consts.Events.Element.READY,this.addObservedElement,this),e.getDomAdapter().addEventListener(consts.Events.Element.MUTANT,this.notifyVisibleFromMutant,this),e.onDisposed().addOnce(this.unregister,this)},e.prototype.unregister=function(e){e.getDomAdapter().removeEventListener(consts.Events.Element.READY,this.addObservedElement,this),e.getDomAdapter().removeEventListener(consts.Events.Element.ANALYTICS_VISIBLE,this.handleDomAdapterViewportEvent,this),e.getDomAdapter().removeEventListener(consts.Events.Element.MUTANT,this.notifyVisibleFromMutant,this),this.removeSubjectByApvData(e)},e.prototype.addObservedElement=function(e){var t=e.data,i=testGroupService.isTestGroup()?t.apvData.getElementToReplace():t.apvData.getApvPlayer().getApvElement(),r={};r.id=t.apvData.getUniqId(),r.articleData=t.apvData.getArticleData(),r.elem=i,r.product=t.apvData.getProduct(),r.apvData=t.apvData,r.viewportMaskElement=t.apvData.getViewportMaskElement(),r.state=n.INIT;for(var o=!1,a=0;a<this._observedElements.length;a++)if(this._observedElements[a].id===t.apvData.getUniqId()){this._observedElements[a]=r,o=!0;break}o||this._observedElements.push(r),this.attachClickListeners(r.apvData),r.debounce=new com.utils.Debounce(configuration.getViewportAnalyticsTimeSpan(),this._handleObservedElementDebounce,this,r),r.debounce.enableFilter(),r.apvData.getDomAdapter().addEventListener(consts.Events.Element.ANALYTICS_VISIBLE,this.handleDomAdapterViewportEvent.bind(this))},e.prototype.removeSubjectByApvData=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t];if(e.getUniqId()===n.id){n.apvData=null,n.articleData=null,n.viewportMaskElement=null,n.elem=null,n.debounce.kill(),n.debounce=null,this._observedElements.splice(t,1);break}}},e.prototype.handleDomAdapterViewportEvent=function(e){var t=e.data.apvData,n=e.data.percentsVisible>=configuration.getViewportAnalyticsPercentage();this.notifyVisible(t,n)},e.prototype._debounceStartAll=function(){for(var e=0;e<this._observedElements.length;e++){var t=this._observedElements[e];t.debounce.start()}},e.prototype.notifyVisible=function(e,t){for(var n=0;n<this._observedElements.length;n++){var i=this._observedElements[n];if(i.apvData===e)return i.isVisible=t,void i.debounce.start()}},e.prototype.notifyVisibleFromMutant=function(e){var t=this;setTimeout(function(){t.notifyVisible(e.data.apvData)},e.data.timeout)},e.prototype._handleObservedElementDebounce=function(e){this.doUpdate(e)&&configuration.getViewportAnalyticsTimeSpan()>=0&&setTimeout(this.doUpdate.bind(this,e,!0),configuration.getViewportAnalyticsTimeSpan())},e.prototype.doUpdate=function(e,t){var i;return i=!(!utils.isIFrame()&&!document.hasFocus())&&e.isVisible,(!e.apvData||!e.apvData.hasDisposed())&&(i?this._handleVisible(e,!!t):e.state=n.OUT_VIEWPORT,i)},e.prototype._handleVisible=function(e,t){switch(e.state){case n.IN_VIEWPORT:t&&(this._inViewport(e),e.state=n.DONE);break;case n.INIT:case n.OUT_VIEWPORT:e.state=n.IN_VIEWPORT}},e.prototype._inViewport=function(e){e.apvData&&e.apvData.getShouldSendImpression()&&this.sendImpression(e)},e.prototype.sendImpression=function(e){this.setHadImpressionSession(),e.apvData.setImpressionHasSent();var t={type:consts.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:consts.Placements.VIEWPORT_IMPRESSION,uniq:!1,product:e.apvData.getProduct(),placement:e.apvData.getName(),script_time:timingPage.getScriptTime(),config_time:timingPage.getConfigTime(),playMode:e.apvData.getPlaymodeEnum()};configuration.getRezVertical()&&(t.vertical=e.apvData.isApvVertical());var n=analyticsService.getAnalyticPayloadWithArticleData(e.articleData,t,e.apvData);minuteDispatchEventService.dispatchImpression(e),analyticsService.pushAnalytics(n),apvDataManager.setImpressionSent(e.apvData),this.sendSessionImpression(e),highlightsService.setHighlightViewed(e.apvData.getHighlights(),e.apvData.getProduct()),globalEvent.dispatchEvent(consts.Events.IMPRESSION)},e.prototype.sendSessionImpression=function(e){var t=e.apvData.getProduct(),n=analyticsService.getAnalyticPayloadWithArticleData(e.articleData,{type:consts.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:consts.Placements.VIEWPORT_IMPRESSION,uniq:!0,product:t,placement:e.apvData.getName(),script_time:timingPage.getScriptTime(),config_time:timingPage.getConfigTime(),playMode:e.apvData.getPlaymodeEnum()},e.apvData);configuration.getRezVertical()&&(n.vertical=e.apvData.isApvVertical()),analyticsService.sendSessionImpression(e.articleData,n,t)},e.prototype.attachClickListeners=function(e){if(!apvDataManager.getIsClickRegistered(e)){switch(e.getProduct()){case consts.Emitter.PRODUCT_APV:clicksAnalyticsService.addLogoClickListener(e)}clicksAnalyticsService.addManualAnchor(e),clicksAnalyticsService.addLinkSelector(e),apvDataManager.setIsClickRegistered(e,!0)}},e.prototype.hadImpression=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t],i=n.articleData.getPublisherVideoId()===e;if(i&&n.apvData.getDidImpressionSent()&&n.apvData.getProduct()===consts.Emitter.PRODUCT_IN_ARTICLE)return!0}return!1},e.prototype.hadImpressionSession=function(){return utils.parseBool(storageManager.getItem(consts.StorageSubKeys.hadImp))},e.prototype.setHadImpressionSession=function(){storageManager.setItem(consts.StorageSubKeys.hadImp,!0)}}(),function(){function e(){var e=document.querySelector("meta[name='parsely-link']");return e?e.getAttribute("content"):utils.urls.getLocationUrl()}com.publisher.utils=com.publisher.utils||{};var t=com.publisher.utils;t.getElementUrl=function(n){if(!n)return utils.urls.getLocationUrl();var i=t.getPlayerStoryIndex(n);return i===-1?utils.urls.getLocationUrl():0===i?e():void 0},t.getPlayerStoryIndex=function(e){for(var t=document.querySelectorAll("section article[id*='story-']"),n=0;n<t.length;n++){var i=t[n];if(i.contains(e))return n}return-1}}(),function(){com.IAdomAdapters=JSON.parse('{"Foxsports":"Foxsports"}'),com.IAPlacers=JSON.parse('{"foxSports":"foxSports"}'),com.publisher.utils=com.publisher.utils||{};com.publisher.utils}(),function(){com.publisher.utils=com.publisher.utils||{};var e=com.publisher.utils;e.getAdditionalClickElements=function(e){return"ARTICLE"==e.containerElement.tagName&&e.containerElement.classList.contains("is-video")?[e.containerElement]:[]},com.publisher.getParsers=function(){return[e.parseVideoId,com.publisher.amp,com.publisher.amp,com.publisher.redir,utils.urls.defaultParser]},com.publisher.amp=function(e){if(location.host.indexOf("b.fssta.com")>-1||location.host.indexOf("b.dev.fssta.com")>-1){var t=utils.urls.parseQueryString(utils.urls.getLocationUrl());return utils.urls.defaultParser(t.url)}return null},e.parseVideoId=function(e){var t=e&&(e.indexOf("/video/")>-1||e.indexOf("api3.fox.com")>-1);if(t&&e.match(/\d+$/g)&&e.match(/\d+$/g).length)return e.match(/\d+$/g)[0]},com.publisher.redir=function(e){var t=/\/.*redir=(.*)/i;if(e.match(t)){var n=e.match(t)[1];return n=decodeURIComponent(n),utils.urls.defaultParser(n)}return null},e.getVideoUrlFromAmpFrame=function(){var e=utils.urls.parseQueryString(window.location.href).url;if(!e){var t="www.foxsports.com";return document.referrer&&document.referrer.indexOf(t)>-1?document.referrer.split(t)[1].split("?")[0]:null}return decodeURIComponent(e)},e.getVideoIDFromAmpFrame=function(){var e=window.location.search.split("=");if(e.length>0)return e[1]},e._getMatchfngPlayer=function(e){if("undefined"!=typeof window.fngPlayers&&fngPlayers){for(var t=0;t<fngPlayers.length;t++){var n=fngPlayers[t];if(e.contains&&(e.contains(n.grandParentEl)||e.contains(document.getElementById(n.elemId)))||e.id==n.elemId)return n}return null}},e.getPageType=function(){if(e.isAMP())return"amp";var t=document.querySelector("meta[fs-prop='analytics']");if(t)return t.getAttribute("page-type")},e._getVideoId=function(t){if(t&&t.querySelector&&t.querySelector("[data-psu]")){var n=t.querySelector("[data-psu]").getAttribute("data-psu");return e.parseVideoId(n)}var i=e._getMatchfngPlayer(t);return i?i.videoId:null},e.getVideoStream=function(t){var n=e._getMatchfngPlayer(t);if(!n||n&&!n.playlist)return null;var i=n.playlist.current;return i&&"string"==typeof i?i:null},e.isFirstVideoPlaying=function(t){var n=e._getMatchfngPlayer(t);return n?0==n.playlist.currentIndex||void 0:null},e.isAdPlaying=function(t){var n=e._getMatchfngPlayer(t);return n?n.player.isAdPlaying:null},e.getAdDuration=function(t){var n=e._getMatchfngPlayer(t);return n?n.player.options.adDuration:null},e.isAMP=function(){return(location.href.indexOf("b.fssta.com")>-1||location.href.indexOf("b.dev.fssta.com")>-1)&&(location.href.indexOf("amp=true")>-1||location.href.indexOf("amp=1")>-1)}}(),function(){function e(){function e(e){var t=e.getSubType?e.getSubType():com.scrap.player.SubTypes.DEFAULT;d[e.getType()]=d[e.getType()]||{},d[e.getType()][t]=e}function t(e){var t=Object.values(com.scrap.PlayersNameEnum);t.indexOf(e.getName())!=-1&&(g[e.getName()]=e)}function n(e){return g[e]}function i(e,t){return d[e]&&d[e][t||com.scrap.player.SubTypes.DEFAULT]}function r(){return d}function o(){return g}function a(){return Object.keys(d)}function s(e){var t=Object.keys(com.scrap.REGISTRED_DRIVERS);t.indexOf(e.getName())>-1&&(h[e.getName()]=e)}function l(e){return h[e]}function c(){return m}function u(e){m[e.getName()]=e}function p(e){return m[e]}var d={},h={},g={},m={};return{addItem:e,addDetector:t,getDetector:n,getAllRegisterdDetectors:o,getItem:i,addDriver:s,getDriver:l,getAllItemTypes:a,getAllRegisterdItem:r,addPicker:u,getPicker:p,getAllRegisteredPickers:c}}com.scrap=com.scrap||{},com.scrap.utils=com.scrap.utils||{},com.scrap.player=com.scrap.player||{},com.scrap.detector=com.scrap.detector||{},com.scrap.driver=com.scrap.driver||{},com.scrap.picker=com.scrap.picker||{},com.scrap.plugin=com.scrap.plugin||{},com.scrap.utils.defineError=function(e,t,n){n=n?" "+n:"",utils.logError("Scraper "+(e?"'"+e.getName()+"' ":"")+"'"+t+"' Not Defined."+n)},com.scrap.REGISTRED_DRIVERS=JSON.parse('{"JwplayerFoxsports":"JwplayerFoxsports"}'),com.scrap.PlayersNameEnum=JSON.parse('{"JwPlayerFoxSports":"JwPlayerFoxSports"}'),com.scrap.PlayerEnum={DEFAULT:99,DEFAULT_99:99,Flowplayer:1,OOYALA:2,YOUTUBE:6,DailyMotion:6,Jwplayer:8,VideoJSIFrame:12,VideoJS:13,NBA:15,Edge:17,ThePlatformFoxSports:26,ThePlatformBravo:29,NFL:32,ThePlatformCnbc:33,CINCOPA:34,VjsNew:36,Channel10:37,MLB:39,EdgeBrightcove:39,CBSsports:40,WsbtvAnvato:41,JWFox:42,ZEE5:43,Vidible:44,DUMONT:46,MMM:47,Fotbolls:48,MLB_FORGE:49,MAGENTA:50,ESPORT:51,ELEAGUE:52,Telecine:53,WWE:54,UFC:55,GLOMEX:56};var t=com.scrap.ScrapPlugin={VIDEO_VIEW:1,VISUAL_CLICKS:3,PLAYER_CONTENT_CHANGED:5,PLAYER_FOUND:7,PLACEHOLDER_FOUND:8,PLAYER_VIDEO_CHANGED:9};com.scrap.ScrapPluginAll=[t.VIDEO_VIEW,t.VISUAL_CLICKS,t.PLAYER_FOUND,t.PLACEHOLDER_FOUND,t.PLAYER_VIDEO_CHANGED],com.scrap.player.SubTypes={DEFAULT:"default"},com.scrap.driver={},com.scrap.driver.PlayerAction={NONE:"none",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",ERROR:"error",ENDED:"ended",SEEK_START:"seekStart",SEEK_END:"seekEnd",VOLUME_CHANGE:"volume",MUTE_CHANGE:"mute",FULLSCREEN:"fullscreen",NEW_VIDEO:"newVideo",REPLAY:"replay",FOCUS:"focus"},com.scrap.utils={},com.scrap.utils.roundValue=function(e){return Math.round(1e3*e)/1e3},com.scrap.consts={VOLUME_EMPTY:-2,TIME_EMPTY:-1},com.scrap.factory=function(){var t=new e,n=new e,i=new e,r=new e;return{addPlugin:i.addItem,getPlugin:i.getItem,addDetector:t.addDetector,getDetector:t.getDetector,getAllRegisterdDetectors:t.getAllRegisterdDetectors,addDriver:n.addDriver,getDriver:n.getDriver,addPicker:r.addPicker,getPicker:r.getPicker,getAllRegisteredPickers:r.getAllRegisteredPickers}}()}(),function(){function e(){}var t=com.scrap.utils.defineError;e.shouldRun=function(){return!0},e.prototype.getType=function(){t(null,"getType")},e.prototype.setPlayerCollection=function(e){},e.prototype.addDriver=function(e){},com.scrap.plugin.Base=e}(),function(){function e(){this._playerOnHold={},globalEvent.addEventListener(consts.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}utils["extends"](e,com.scrap.plugin.Base),e.getType=function(){return com.scrap.ScrapPlugin.PLACEHOLDER_FOUND},e.getName=function(){return"PlaceholderFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var n=e[t],i=this._playerOnHold[n];i&&articlesManager.hasInArticleArticleDataForUrl(i.url)&&(this.sendEvent(i),this._playerOnHold[n]=null)}},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){var t=articlesManager.getInArticleArticleData(e.videoId,e.url);t?this.sendEvent(e):(utils.log("Player Placeholder found - WAITING for ArticleData:"),
utils.logObject(e),this._playerOnHold[e.videoId]=e)},e.prototype.sendEvent=function(e){var t=articlesManager.getInArticleArticleData(e.videoId,e.url);return t?(utils.log("Player Placeholder Found - READY:"),utils.logObject(e),void globalEvent.dispatchEvent(consts.Events.PLAYER_PLACEHOLDER_FOUND,{container:e.element,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,articleData:t})):(utils.log("Player Placeholder Found - does NOT have correct Video ID:"),void utils.logObject(e))},com.scrap.plugin.PlaceholderFound=e,com.scrap.factory.addPlugin(e)}(),function(){function e(){this._playerOnHold={},globalEvent.addEventListener(consts.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}utils["extends"](e,com.scrap.plugin.Base),e.getType=function(){return com.scrap.ScrapPlugin.PLAYER_FOUND},e.getName=function(){return"PlayerFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var n=e[t],i=this._playerOnHold[n];i&&articlesManager.hasInArticleArticleDataForUrl(i.url)&&(this.sendEvent(i),this._playerOnHold[n]=null)}},e.prototype.handleDetector_PlayerInstanceFound=function(e){var t=articlesManager.getInArticleArticleData(e.videoId,e.data.url);t?this.sendEvent(e):(utils.log("Player Found - WAITING for articleData:"),utils.logObject(e),this._playerOnHold[e.playerId]=e)},e.prototype.sendEvent=function(e){var t=articlesManager.getInArticleArticleData(e.videoId,e.url);return t?(utils.log("Player Found - READY:"),utils.logObject(e),void globalEvent.dispatchEvent(consts.Events.PLAYER_FOUND,{container:e.playerPlaceholder,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,autoplay:e.isPlayerStarted,articleData:t})):(utils.log("Player Found - does NOT have correct Video ID:"),void utils.logObject(e))},com.scrap.plugin.PlayerFound=e,com.scrap.factory.addPlugin(e)}(),function(){function e(){}utils["extends"](e,com.scrap.plugin.Base),e.getType=function(){return com.scrap.ScrapPlugin.PLAYER_VIDEO_CHANGED},e.getName=function(){return"PlayerVideoChanged"},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){e.onPlayerVideoChanged().add(this.handleDriver_PlayerVideoChanged,this)},e.prototype.handleDriver_PlayerVideoChanged=function(e){globalEvent.dispatchEvent(consts.Events.PLAYER_VIDEO_CHANGED,{container:e.scrapData.playerPlaceholder,playerJS:e.scrapData.playerJS,articleUrl:e.scrapData.url,videoId:e.scrapData.videoId,newVideoId:e.videoId})},com.scrap.plugin.PlayerVideoChanged=e,com.scrap.factory.addPlugin(e)}(),function(){function e(){e.__superCtor__.call(this),this._driverList=[]}utils["extends"](e,com.scrap.plugin.Base),e.getType=function(){return com.scrap.ScrapPlugin.VIDEO_VIEW},e.getName=function(){return"VideoViews"},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){this._driverList.push(e),e.onVideoView().add(this.handleVideoView,this)},e.prototype.handleVideoView=function(e){globalEvent.dispatchEvent(consts.Events.PLAYER_PLAYING,{videoId:e.videoId,counter:e.counter});var t={url:e.url,vid:e.videoId,test_mode:testGroupService.getGroupCode(),comp:compatibility.isBrowserSupported()?1:0,source:compatibility.getAnalyticsSource(),publisher:min._publisher,hadImpression:e.hadImpression,hadImpressionSession:visibilityAnalyticsService.hadImpressionSession(),counter:e.counter,script_time:timingPage.getScriptTime(),config_time:timingPage.getConfigTime()};emitterService.send(consts.Emitter.VIDEO_VIEWS,t)},com.scrap.plugin.VideoViews=e,com.scrap.factory.addPlugin(e)}(),function(){function e(){this._onPlayerInstanceFound=new com.utils.Signal,this._onPlayerFeaturedInstanceFound=new com.utils.Signal,this._onPlayerPlaceholderFound=new com.utils.Signal,this._onContainerPlaceholderList=new com.utils.Signal,this._detectorList=[],this._pickerList=[],this._counter=0,this._scraperTimer=null}com.scrap.DetectorsCollector=e,e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.onContainerPlaceholderList=function(){return this._onContainerPlaceholderList},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.init=function(){this.initPlayers(),this.initPicker(),this.startTimer(),this.detectNewPlayers()},e.prototype.initPlayers=function(){for(var e,t,n=com.scrap.factory.getAllRegisterdDetectors(),i=Object.keys(n),r=0;r<i.length;r++)e=com.scrap.factory.getDetector(i[r]),t=new e,t.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),t.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this),t.onContainerPlaceholderList().add(this.handleDetector_ContainerPlaceholderList,this),this._detectorList.push(t);0===this._detectorList.length&&utils.log("No scrapers found to initialize.")},e.prototype.initPicker=function(){for(var e,t=com.scrap.factory.getAllRegisteredPickers(),n=Object.keys(t),i=0;i<n.length;i++)e=com.scrap.factory.getPicker(n[i]),this.createPicker(e);0===this._pickerList.length&&(this.createPicker(com.scrap.picker.Base),utils.log("No picker found to initialize - using Base"))},e.prototype.addDriver=function(e){for(var t=0;t<this._pickerList.length;t++){var n=this._pickerList[t];n.addDriver(e)}e.onDisposed().addOnce(this.handleDriver_Disposed,this)},e.prototype.createPicker=function(e){var t=new e;t.setPlayerCollection(this),t.onPlayerFeaturedInstanceFound().add(this.handlePicker_PlayerFeaturedInstanceFound,this),this._pickerList.push(t)},e.prototype.handleDetector_PlayerInstanceFound=function(e){e.index=this._counter,this._onPlayerInstanceFound.dispatch(e),this._counter++},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){this._onPlayerPlaceholderFound.dispatch(e)},e.prototype.handlePicker_PlayerFeaturedInstanceFound=function(e){this._onPlayerFeaturedInstanceFound.dispatch(e)},e.prototype.handleDetector_ContainerPlaceholderList=function(e){this._onContainerPlaceholderList.dispatch(e)},e.prototype.handleDriver_Disposed=function(e){for(var t=0;t<this._detectorList.length;t++){var n=this._detectorList[t];n.playerDisposed(e.getID())}},e.prototype.startTimer=function(){globalEvent.addEventListener(consts.Events.THREE_SECONDS_INTERVAL,this.detectNewPlayers,this)},e.prototype.detectNewPlayers=function(){for(var e=0;e<this._detectorList.length;e++){var t=this._detectorList[e];t.detectNewPlayers()}}}(),function(){function e(e){this._detectorCollection=e,this._pluginHash=[],this._init()}com.scrap.PluginsCollector=e,e.prototype.addDriver=function(e){for(var t=0;t<this._pluginHash.length;t++){var n=this._pluginHash[t];n.addDriver(e)}},e.prototype._init=function(){for(var e=0;e<com.scrap.ScrapPluginAll.length;e++){var t=com.scrap.factory.getPlugin(com.scrap.ScrapPluginAll[e]);if(t)if(!t.shouldRun||t.shouldRun()){var n=new t;n.setPlayerCollection(this._detectorCollection),this._pluginHash.push(n)}else utils.log("Plugin "+(t.getName()||t.getType())+" is not running.")}}}(),function(){function e(){e.__superCtor__.call(this),this._driverHash={},this._detectorCollection=new com.scrap.DetectorsCollector,this._detectorCollection.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),this._detectorCollection.init(),this._pluginsCollection=new com.scrap.PluginsCollector(this._detectorCollection),com.scrap.startUrlTracker(this._detectorCollection)}utils["extends"](e,EventDispatcher);var t=com.publisher.utils;e.prototype.handleDetector_PlayerInstanceFound=function(e){this._driverHash[e.playerId]||this.createScrapDriver(e)},e.prototype.handleDriver_Disposed=function(e){this._driverHash[e.getID()]=void 0},e.prototype.createScrapDriver=function(e){var n,i=Object.keys(com.scrap.REGISTRED_DRIVERS);if(t.getDriverName?n=com.scrap.factory.getDriver(t.getDriverName(e)):1==i.length?n=com.scrap.factory.getDriver(com.scrap.REGISTRED_DRIVERS[i[0]]):0==i.length||utils.logWarning("Dont know what driver to set, need coordinator (_pubUtils.getDriverName)"),!n)return void utils.log("No driver registered. Please add your driver on 'registeredDrivers' configuration! ");var r=articlesManager.getCrowdSourceArticleData(e.videoId,e.url),o=new n;o.setArticleData(r),o.setScrapData(e),this._pluginsCollection.addDriver(o),this._driverHash[e.playerId]=o,o.onDisposed().addOnce(this.handleDriver_Disposed,this),this._detectorCollection.addDriver(o),o.init()},com.scrap.ScraperService=e}(),function(){function e(){this._state=0,this._onPlayerInstanceFound=new com.utils.Signal,this._onPlayerPlaceholderFound=new com.utils.Signal,this._onContainerPlaceholderList=new com.utils.Signal,this._foundList={},this._validatePlayerConfig(),this._setStateIdle()}var t=com.publisher.utils,n=/[^\d\w\s\-?!\u0590-\u05fe\.,]/g,i=com.scrap.player.EState={IDLE:1,SEARCHING:2,FOUND:3},r=com.scrap.utils.defineError;e.prototype._validatePlayerConfig=function(){},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.onContainerPlaceholderList=function(){return this._onContainerPlaceholderList},e.prototype.detectNewPlayers=function(e){this.isIdle()&&(this._state=i.SEARCHING,setTimeout(this._detectNewPlayers.bind(this),e?e:0))},e.prototype.playerDisposed=function(e){this._hasPlayerInstanceFound(e)&&(this._foundList[e]=!1)},e.prototype._detectNewPlayers=function(){},e.prototype._collectScraperData=function(e,t){var i={},r={},o=255;return i.data=r,r.duration=this._getVideoDuration(e,t),r.version="NoName",r.video_id=this._getVideoId(e,t),r.stream=this._getVideoStream(e,t),r.url=this._getPlayerUrl(e,t),r.raw_url=this._getPlayerUrlRaw(e,t),r.title=(this._getVideoTitle(e,t)||"").replace(n,"").substring(0,o),r.raw_title=utils.b64EncodeUnicode(this._getVideoTitle(e,t)||""),r.publisher=configuration.getPublisherId(),r.player_id=this.getScraperPlayerId(e,t),i.index=-1,i.videoId=r.video_id,i.playerId=this._getPlayerId(e,t)||i.videoId,i.url=r.url,i.playerJS=e,i.playerHtmlElement=t,i.playerConfig=this._configPlayer,i.isLive=this._getIsLive(e,t),i.isAutoPlay=this._getIsAutoPlay(e,t),i.isPlayerStarted=i.isAutoPlay||this._getIsPlayerStarted(e,t),i.playerPlaceholder=this._getPlayerPlaceholder(e,t),i.isFeatured=this._getIsFeatured(e,t),i},e.prototype._setStateIdle=function(){this._state=i.IDLE},e.prototype.isIdle=function(){return this._state===i.IDLE},e.prototype._sendPlayerInstanceFound=function(e){this._onPlayerInstanceFound.dispatch(e)},e.prototype._addPlayerInstanceFound=function(e){return this._foundList[e]=!0},e.prototype._hasPlayerInstanceFound=function(e){return this._foundList.hasOwnProperty(e)},e.prototype._getVideoId=function(e,t){r(this,"_getVideoId")},e.prototype._getVideoStream=function(e,t){r(this,"_getVideoStream")},e.prototype._getVideoTitle=function(e,n){return t&&t.getVideoTitle&&t.getVideoTitle(e)?t.getVideoTitle(e):document.title},e.prototype.getScraperPlayerId=function(e,t){return com.scrap.PlayerEnum.DEFAULT_99},e.prototype._getIsLive=function(e,t){return!1},e.prototype._getIsAutoPlay=function(e,t){return null},e.prototype._getIsFeatured=function(e,t){},e.prototype._getIsPlayerStarted=function(e,t){return!1},e.prototype._getPlayerId=function(e,t){return""},e.prototype._getPlayerSubType=function(e,t){return this._configPlayer.subType&&com.scrap.player.SubTypes[this._configPlayer.subType]||""},e.prototype._getPlayerUrl=function(e,t){return utils.urls.getCurrentCanonicalURL()},e.prototype._getPlayerUrlRaw=function(e,t){return utils.urls.getStructuredRawByUrl(utils.urls.getLocationUrl())},e.prototype._getPlayerPlaceholder=function(e,t){return null},e.prototype.getVideoTags=function(e,n){if(t&&t.getTags)return t.getTags(e)},e.prototype._getVideoDuration=function(e,t){return 0},com.scrap.detector.Base=e}(),function(){function e(){this._articleData=null,this.scrapData=null,this._onDisposed=new com.utils.Signal,this._onPlayerAction=new com.utils.Signal,this._onPlayerProgress=new com.utils.Signal,this._onVideoView=new com.utils.Signal,this._onError=new com.utils.Signal,this._onPlayerInstanceFound=new com.utils.Signal,this._onPlayerVideoChanged=new com.utils.Signal,this._analyser=null,this._progressTimer=null,this._handleFocusInEvent=null,this._handleFocusOutEvent=null,this._doesCollect=null,this._sessionId=utils.generateUID()}var t=com.scrap.utils.defineError,n=com.scrap.driver.PlayerAction,i=!1;e.prototype.getID=function(){return this.scrapData.playerId},e.prototype.getType=function(){t(null,"getType")},e.prototype.getName=function(){t(null,"getName")},e.prototype.setArticleData=function(e){this._articleData=e},e.prototype.getArticleData=function(){return this._articleData},e.prototype.setScrapData=function(e){this.scrapData=e},e.prototype.checkVideoView=function(){t(null,"checkVideoView")},e.prototype.onPlayerAction=function(){return this._onPlayerAction},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype.onPlayerProgress=function(){return this._onPlayerProgress},e.prototype.onVideoView=function(){return this._onVideoView},e.prototype.onError=function(){return this._onError},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerVideoChanged=function(){return this._onPlayerVideoChanged},e.prototype.sendPlayerActionEvent=function(e,t){this._onPlayerAction.dispatch("status",t)},e.prototype.sendPlayerProgressEvent=function(e){this._onPlayerProgress.dispatch(e)},e.prototype.readyToSendCrowdSourceEvents=function(e,t){return!0},e.prototype.sendPlayerEvent=function(e,t){if(this._doesCollect&&this.readyToSendCrowdSourceEvents()&&this.isFirstVideoPlaying()&&this.getPlayerCurrentVideoId&&this._articleData.getPublisherVideoId()===this.getPlayerCurrentVideoId()){var n={cs_id:this._sessionId,article_id:this._articleData.getArticleId(),min_vid_id:this._articleData.getVideoDBId(),video_id:this.getPlayerCurrentVideoId(),min_playhead:this.getCurrentPlayhead(),min_event_type:t,min_metadata:this.getMeteData(t),event_timestamp:(new Date).getTime(),player:this.getPlayerName(),raw_event:JSON.stringify(e)};emitterService.send(consts.Emitter.CROWD_SOURCE,n)}},e.prototype.isFirstVideoPlaying=function(){return!0},e.prototype.getMeteData=function(){},e.prototype.getPlayerName=function(){return"base"},e.prototype.init=function(){this._articleData=this._articleData||articlesManager.generateArticleData(this.scrapData.id),this._canCollectEvents()?(this.startListenWindowFocusEvent(),this.sendCurrentFocusState(),i=!0):utils.log("Will not collect video events"),this.trackDisposableDomElement()},e.prototype._canCollectEvents=function(){this._doesCollect=utils.parseBool(this._doesCollect,!1);var e=compatibility.isChrome()&&compatibility.isDesktop()&&!compatibility.isEdge()&&!compatibility.isIE()&&!compatibility.isSafari()&&!compatibility.isFF();return this._doesCollect=!i&&configuration.isScraperEnableEventCollection()&&this._articleData.getDoesCollect()&&e,this._doesCollect},e.prototype.trackDisposableDomElement=function(){var e=this._getDisposableDomElement();e&&(this._domTracker=new com.utils.DomElementTracker(e),this._domTracker.setTrackingOptions({parentElement:this._getDisposableDomElementParent()}),this._domTracker.onRemovedFromDom.add(this.dispose,this),this._domTracker.start())},e.prototype._getDisposableDomElement=function(){return null},e.prototype._getDisposableDomElementParent=function(){return null},e.prototype.dispose=function(){this._onDisposed.dispatch(this),this._analyser&&(this._analyser.dispose(),this._analyser=null),this._articleData=null,this.scrapData=null,this._onPlayerAction.removeAll(),this._onPlayerAction=null,this._onPlayerProgress.removeAll(),this._onPlayerProgress=null,this._onVideoView.removeAll(),this._onVideoView=null,this._onDisposed.removeAll(),this._onDisposed=null,this.stopProgressTimer(),this._progressTimer=null,this._domTracker&&(this._domTracker.dispose(),this._domTracker=null),this.stopListenWindowFocusEvent()},e.prototype.getCurrentVideoId=function(){t(this,"getCurrentVideoId")},e.prototype.stopProgressTimer=function(){this._progressTimer&&this._progressTimer.stop()},e.prototype.startListenWindowFocusEvent=function(){this._handleFocusInEvent||(this._handleFocusInEvent=this.handleFocusInEvent.bind(this),this._handleFocusOutEvent=this.handleFocusOutEvent.bind(this),window.addEventListener?(window.addEventListener("focus",this._handleFocusInEvent,!1),window.addEventListener("blur",this._handleFocusOutEvent,!1)):window.attachEvent&&(window.attachEvent("focus",this._handleFocusInEvent),window.attachEvent("blur",this._handleFocusOutEvent)))},e.prototype.stopListenWindowFocusEvent=function(){this._handleFocusInEvent&&(window.removeEventListener?(window.removeEventListener("focus",this._handleFocusInEvent,!1),window.removeEventListener("blur",this._handleFocusOutEvent,!1)):window.detachEvent&&(window.detachEvent("focus",this._handleFocusInEvent),window.detachEvent("blur",this._handleFocusOutEvent)),this._handleFocusInEvent=null,this._handleFocusOutEvent=null)},e.prototype.handleFocusInEvent=function(e){this.sendPlayerActionEvent(n.FOCUS,!0),this.sendPlayerEvent({focus:!0},"focus")},e.prototype.handleFocusOutEvent=function(e){this.sendPlayerActionEvent(n.FOCUS,!1),this.sendPlayerEvent({focus:!1},"focus")},e.prototype.sendCurrentFocusState=function(){this.sendPlayerActionEvent(n.FOCUS,document.hasFocus()),this.sendPlayerEvent({focus:document.hasFocus()},"focus")},com.scrap.driver.Base=e}(),function(){function e(){this._onPlayerFeaturedInstanceFound=new com.utils.Signal,this._currentScraperData=null,this._placeholderFoundList=[],this._topMostPlaceholder=null,this._alreadySentFeatured=!1}var t=com.publisher.utils;e.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this,1)},e.prototype.addDriver=function(e){e.onPlayerInstanceFound().add(this.handleDriver_PlayerInstanceFound,this)},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.isScrapDataValid=function(e){return!!e&&(e.data.player_id?!!utils.validateScraperURL()&&(""===e.url||utils.urls.isUrlHomePage()?(utils.log("Scrap cancel: I think I am on homepage..."),!1):e.isLive?(utils.log("Scrap canceled: Live player instance."),!1):e.data.video_id&&e.data.stream?!(t.shouldScrap&&!t.shouldScrap(e))||(utils.log("Scrap canceled: due to publisher utils"),!1):(utils.log("Scrap canceled: Missing data. video_id: '"+e.data.video_id+"', stream: '"+e.data.stream+"'"),!1)):(utils.log("Scraper cancel: missing Player_id for scraper"),!1))},e.prototype.setFeatureFlag=function(e){if(configuration.getFeaturedWrapper()){var n=configuration.getFeaturedWrapper();e.data.featured=!!document.querySelector(n)&&!!document.querySelector(n).contains(e.playerPlaceholder)}else t.setFeatureFlag?e.data.featured=t.setFeatureFlag(e):this._alreadySentFeatured?e.data.featured=!1:("undefined"!=typeof e.isFeatured?e.data.featured=e.isFeatured:(this.setTopMostContainer(),this._topMostPlaceholder?e.data.featured=!!this._topMostPlaceholder.contains(e.playerPlaceholder):(utils.logError("Top most placeholder is not set, This has to be set!"),e.data.featured=!1)),e.data.featured&&(this._alreadySentFeatured=!0))},e.prototype.handleDetector_PlayerInstanceFound=function(e){this.isScrapDataValid(e)&&(this.setFeatureFlag(e),this._currentScraperData=e,this.sendPlayerFeaturedInstanceFound())},e.prototype.handleDriver_PlayerInstanceFound=function(e){this.handleDetector_PlayerInstanceFound(e)},e.prototype.getAllPlayersContainer=function(){if(t.getIAContainers)return t.getIAContainers();for(var e=document.querySelectorAll(configuration.getIAContainers()),n=[],i=0;i<e.length;i++){var r=e[i];r.offsetParent&&n.push(r)}return n},e.prototype._setPlayersPlaceholderList=function(){for(var e=this.getAllPlayersContainer(),t=0;t<e.length;t++){var n=e[t];this._placeholderFoundList.indexOf(n)>-1||this._placeholderFoundList.push(n)}},e.prototype.setTopMostContainer=function(){if(this._setPlayersPlaceholderList(),0==this._placeholderFoundList.length)return void utils.logWarning("No places were set to the picker to choose from");this._topMostPlaceholder=this._placeholderFoundList[0];for(var e=1;e<this._placeholderFoundList.length;e++){var t=this._placeholderFoundList[e];t.offsetTop<this._topMostPlaceholder.offsetTop&&(this._topMostPlaceholder=t)}},e.prototype.sendPlayerFeaturedInstanceFound=function(){return this.isScrapDataValid(this._currentScraperData)?(this.sendScrapEvent(),this._onPlayerFeaturedInstanceFound.dispatch(this._currentScraperData),void(this._currentScraperData=null)):void(this._currentScraperData=null)},e.prototype.shouldAutopushEvent=function(e){for(var t=configuration.getAutopushCriteria(),n=0;n<t.length;n++){var i=t[n],r=!0;if(i&&i.hoursAgo){var o=i.hoursAgo,a=36e5*o,s=new Date;s.setTime(s.getTime()-a),r=e.published_at>s}var l=!0,c=[];Array.isArray(i.tags)&&(c=i.tags);for(var u=0;u<c.length;u++){var p=c[u];if(e.tags.indexOf(p)==-1){l=!1;break}}var d=!0,h=i.urls;if(h&&(d=utils.isUrlMatchPattern(e.raw_url,i.urls)),r&&l&&d)return!0}return!1},e.prototype.sendScrapEvent=function(){var e=this._currentScraperData.data,t=articlesManager.getInArticleArticleData(e.video_id,e.url);if(e.exist=!!t,com.scrap.metaDataEnhancer){var n=new com.scrap.metaDataEnhancer,i=n.getPayloadMetaData(this._currentScraperData);e=utils.extentObject(i,e)}else if(com.scrap.baseMetaDataEnhancer){var n=new com.scrap.baseMetaDataEnhancer,i=n.getPayloadMetaData(this._currentScraperData);e=utils.extentObject(i,e)}var r=localStorage&&!!localStorage.getItem("_minForcePush");e.exist||!r&&!configuration.getScraperType2()||emitterService.send(consts.Emitter.NEW_VIDEO_EVENT,e),emitterService.send(consts.Emitter.NEW_SCRAPE_EVENT,e)},com.scrap.picker.Base=e}(),function(){com.scrap.startUrlTracker=function(e){}}(),function(){var e=com.scrap.utils[com.scrap.PlayersNameEnum.Jwplayer]={};e.getVideoId=function(e,t){var n=e.getPlaylist()[0];return n&&(n.mediaid||n.file)?n.mediaid||n.file.split("?")[0]:""}}(),function(){function e(){e.__superCtor__.call(this),this._watchPlayerList={}}utils["extends"](e,com.scrap.detector.Base);var t=com.publisher.utils;e.getName=function(){return com.scrap.PlayersNameEnum.Jwplayer},e.prototype.getScraperPlayerId=function(){return com.scrap.PlayerEnum.DEFAULT_99},e.prototype._detectNewPlayers=function(){e.__super__._detectNewPlayers.call(this);var t=this._getPlayers();this._collectScraperDataList(t.players),this._setStateIdle()},e.prototype.getPlayerSelector=function(){return".jwplayer"},e.prototype._getPlayers=function(){var e={players:[],hasFound:!1};if("undefined"==typeof jwplayer)return e;for(var t=this.getPlayerSelector(),n=document.querySelectorAll(t),i=0;i<n.length;i++){var r=n[i].id,o={};o.JSplayer=jwplayer(r),o.playerElm=n[i],o.JSplayer.getPlaylist()&&o.JSplayer.getPlaylist().length>0&&this._getVideoStream(o.JSplayer)&&(e.players.push(o),e.hasFound=!0)}return e},e.prototype._collectScraperDataList=function(e){for(var t=0;t<e.length;t++){var n=e[t];this._hasPlayerInstanceFound(n.JSplayer.id)||(this._addPlayerInstanceFound(n.JSplayer.id),this._sendPlayerInstanceFound(this._collectScraperData(n.JSplayer,n.playerElm)))}},e.prototype._getVideoId=function(e,n){return t&&t._getVideoId&&t._getVideoId(e,n)||e.getPlaylistItem().mediaid||this._getVideoStream(e,n).split("?")[0]},e.prototype._getVideoStream=function(e,n){if(t.getVideoStream)return t.getVideoStream(e);var i=e.getPlaylistItem(),r=i&&i.file;if(!r||r.indexOf("data:video/mp4;base64")>0)return"";var o=r&&0===r.indexOf("//");return o?location.protocol+r:r},e.prototype._getPlayerPlaceholder=function(e,t){return e.getContainer()},e.prototype._getVideoTitle=function(e){if(t&&t._getVideoTitle)return t._getVideoTitle(e);var n=e.getPlaylist(),i=e.getPlaylistIndex(),r=n&&n[i]&&n[i].title||document.title,o=document.createElement("textarea");return o.innerHTML=r,r=o.value},e.prototype._getIsLive=function(e,t){return!!t&&t.classList.contains("jw-flag-live")},com.scrap.detector.Jwplayer=e,com.scrap.factory.addDetector(e)}(),function(){var e=com.scrap.utils[com.scrap.PlayersNameEnum.JwPlayerFoxSports]={},t=/^https?:\/\/link\.theplatform\.com\/\w+\/[^\/]+\/([^?]+)\?.*$/i;e.extractVideoIdFromReleaseURL=function(e){return e?e.replace(t,"$1"):""},e.getFlashObjectElement=function(e){return e?e.querySelector("object[type='application/x-shockwave-flash']"):null}}(),function(){function e(){e.__superCtor__.call(this)}utils["extends"](e,com.scrap.detector.Jwplayer);var t=com.publisher.utils;e.getName=function(){return com.scrap.PlayersNameEnum.JwPlayerFoxSports},e.prototype.getName=function(){return com.scrap.PlayersNameEnum.JwPlayerFoxSports},e.prototype.getScraperPlayerId=function(){return com.scrap.PlayerEnum.JWFox},e.prototype._getPlayerUrl=function(n,i){var r=e.__super__._getPlayerUrl.call(this,n,i);return t.parseVideoId(r)?t.parseVideoId(r):r},com.scrap.detector.JwPlayerFoxSports=e,com.scrap.factory.addDetector(e)}(),function(){function e(){e.__superCtor__.call(this),this._currentVideoId="",this._watchDebouncer=new com.utils.Debounce(5e3,this._sendPlayerEvent,this),this._watchDebouncer.enableFilter(),this._volumeDebouncer=new com.utils.Debounce(500,this._sendPlayerEvent,this),this._volumeDebouncer.enableFilter(),this.firstWatch=!0}var t=com.scrap.utils[com.scrap.PlayersNameEnum.Jwplayer]||{},n={COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_CONTROLS:"controls",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_ERROR:"error",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_INSTREAM_CLICK:"instreamClick",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_PAUSE:"pause",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_READY:"ready",JWPLAYER_RESIZE:"resize",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus"},i=[n.COMPLETE,n.ERROR,n.JWPLAYER_AD_ERROR,n.JWPLAYER_AD_IMPRESSION,n.JWPLAYER_AD_TIME,n.JWPLAYER_ERROR,n.JWPLAYER_MEDIA_ERROR,n.JWPLAYER_MEDIA_TIME,n.JWPLAYER_MEDIA_TYPE,n.JWPLAYER_AD_CLICK,n.JWPLAYER_AD_COMPLETE,n.JWPLAYER_AD_PAUSE,n.JWPLAYER_AD_PLAY,n.JWPLAYER_AD_SKIPPED,n.JWPLAYER_CONTROLBAR_DRAGGING,n.JWPLAYER_MEDIA_COMPLETE,n.JWPLAYER_FULLSCREEN,n.JWPLAYER_MEDIA_LEVELS,n.JWPLAYER_MEDIA_LEVEL_CHANGED,n.JWPLAYER_MEDIA_META,n.JWPLAYER_MEDIA_MUTE,n.JWPLAYER_MEDIA_PAUSE,n.JWPLAYER_MEDIA_SEEK,n.JWPLAYER_MEDIA_SEEKED,n.JWPLAYER_MEDIA_VOLUME,n.JWPLAYER_PLAYER_STATE,n.JWPLAYER_READY,n.JWPLAYER_USER_ACTION,n.JWPLAYER_VIEW_TAB_FOCUS];com.scrap.PlayersNameEnum.Jwplayer="Jwplayer",utils["extends"](e,com.scrap.driver.Base),e.getName=function(){return com.scrap.REGISTRED_DRIVERS.JwPlayer},e.prototype.init=function(){this.player=this.scrapData.playerJS,e.__super__.init.call(this),this.registerPlayerJsEvents()},e.prototype.registerPlayerJsEvents=function(){for(var e=0;e<i.length;e++){var t=[];this.player._events&&this.player._events[i[e]]&&(t=this.player._events[i[e]],t=t.map(function(e){return e.callback}));var n=this.handlePlayerEvents;t.includes(n)||this.player.on(i[e],n,this)}},e.prototype._sendPlayerEvent=function(e){this.sendPlayerEvent(e,e.type)},e.prototype.handlePlayerEvents=function(e){switch(e.type){case n.JWPLAYER_MEDIA_TIME:case n.JWPLAYER_AD_TIME:this.checkVideoView(),this.firstWatch?(this._sendPlayerEvent(e,e.type),this.firstWatch=!1):this._watchDebouncer.start(e);break;case n.JWPLAYER_MEDIA_VOLUME:case n.JWPLAYER_MEDIA_MUTE:this._volumeDebouncer.start(e);break;case n.JWPLAYER_AD_PAUSE:case n.JWPLAYER_MEDIA_PAUSE:case n.JWPLAYER_AD_COMPLETE:case n.JWPLAYER_AD_SKIPPED:this.firstWatch=!0;case n.JWPLAYER_MEDIA_SEEK:case n.ERROR:case n.JWPLAYER_AD_ERROR:case n.JWPLAYER_AD_IMPRESSION:case n.JWPLAYER_ERROR:case n.JWPLAYER_MEDIA_ERROR:case n.JWPLAYER_MEDIA_TYPE:case n.JWPLAYER_PLAYER_STATE:case n.JWPLAYER_READY:case n.JWPLAYER_AD_CLICK:case n.JWPLAYER_AD_PLAY:case n.JWPLAYER_CONTROLBAR_DRAGGING:case n.JWPLAYER_MEDIA_LEVELS:case n.JWPLAYER_MEDIA_LEVEL_CHANGED:case n.JWPLAYER_MEDIA_SEEKED:case n.JWPLAYER_USER_ACTION:case n.JWPLAYER_VIEW_TAB_FOCUS:case n.COMPLETE:case n.JWPLAYER_MEDIA_COMPLETE:this._watchDebouncer.stop(e),this._sendPlayerEvent(e);break;case n.JWPLAYER_FULLSCREEN:this._sendPlayerEvent(e)}},e.prototype.checkVideoView=function(){this._currentVideoId!=this.getPlayerCurrentVideoId()&&this.updateVideoId()},e.prototype.getPlayerCurrentVideoId=function(){return t.getVideoId(this.player)},e.prototype.updateVideoId=function(){this._currentVideoId=this.getPlayerCurrentVideoId()},e.prototype.getCurrentVideoId=function(){return this._currentVideoId},e.prototype.getCurrentPlayhead=function(){return this.player.getCurrentTime?this.player.getCurrentTime():this.player.getPosition?this.player.getPosition():void 0},com.scrap.driver.JwPlayer=e,com.scrap.factory.addDriver(e)}(),function(){function e(){e.__superCtor__.call(this),this._currentVideoId=""}var t=com.publisher.utils;utils["extends"](e,com.scrap.driver.JwPlayer),e.getName=function(){return com.scrap.REGISTRED_DRIVERS.JwplayerFoxsports},e.prototype.init=function(){e.__super__.init.call(this),this.keepAlivePlayerJsEvents(),this.registerFNGAdEvents()},e.prototype.getPlayerName=function(){return"JwplayerFoxsports"},e.prototype.isFirstVideoPlaying=function(){return t.isFirstVideoPlaying(this.player)},e.prototype.keepAlivePlayerJsEvents=function(){setInterval(function(){this.registerPlayerJsEvents()}.bind(this),3e3)},e.prototype.getPlayerCurrentVideoId=function(){return t._getVideoId(this.player)},e.prototype.registerFNGAdEvents=function(){var e=t._getMatchfngPlayer(this.player),n=function(){this.sendPlayerEvent({adComplete:!0,adDuration:t.getAdDuration(this.player)},"adComplete")}.bind(this);e.player.events.queue.onAdComplete.push(n)},e.prototype.getMeteData=function(){var e={};return t.isAdPlaying(this.player)&&(e.ad=!0,e.adDuration=t.getAdDuration(this.player)),e.reportUrl=this._articleData.getArticleUrl(),JSON.stringify(e)},com.scrap.driver.JwplayerFoxsports=e,com.scrap.factory.addDriver(e)}(),function(){function e(){e.__superCtor__.call(this),this.enhancers={},this.tempScraperData={}}var t=com.publisher.utils;utils["extends"](e,com.scrap.picker.Base),e.prototype.handleDetector_PlayerInstanceFound=function(e){this.isScrapDataValid(e)&&(document.location.href.includes("/watch/")?(e.featured=!0,e.data.featured=!0):document.location.href.includes("/stories/")?(e.featured=!1,e.data.featured=!1):(e.featured=!0,e.data.featured=!0,e.url="/watch/"+e.videoId,e.raw_url=document.location.origin+"/watch/"+e.videoId,e.data.url=e.url,
e.data.raw_url=e.raw_url),this._currentScraperData=e,this.sendScrapEvent(),this._onPlayerFeaturedInstanceFound.dispatch(this._currentScraperData),this._currentScraperData=null)},e.getName=function(){return com.scrap.PlayerEnum.ThePlatformFoxSports},e.prototype.isScrapDataValid=function(e){if(!e)return!1;if(""===e.url||utils.urls.isUrlHomePage())return utils.log("Scrap cancel: I think I am on homepage..."),!1;if(!utils.validateScraperURL())return!1;if(e.isLive)return utils.log("Scrap cancel: Live player instance."),!1;if(!e.data.video_id||!e.data.stream)return utils.log("Scrap cancel: Missing data. video_id: '"+e.data.video_id+"', stream: '"+e.data.stream+"'"),!1;if(document.location.href.includes("/watch/")||document.location.href.includes("/stories/")){var n=document.querySelector("#story-1,.story-body,.mpx-video-player\t,.video-page-container.homepage-module .video-player-container");if(!n||n&&!n.contains(e.playerPlaceholder))return utils.log("Scrap cancel: not part of first article"),!1}return!t.isAMP()},e.prototype.isArticleNew=function(){var e=document.querySelector(".video-details time");if(!e)return!0;var t=e.getAttribute("datetime");if(!t)return!0;var n=new Date(t),i=new Date;return!((i-n)/864e5>7)},e.prototype.sendScrapEvent=function(){var e=this._currentScraperData.data;this.tempScraperData[e.url]=JSON.parse(JSON.stringify(this._currentScraperData.data)),this.enhancers[e.url]=new com.scrap.metaDataEnhancer,this.enhancers[e.url].init(e.url,e.video_id,this.onMetaReady.bind(this))},e.prototype.onMetaReady=function(e){var t=this.tempScraperData[e],n=articlesManager.getInArticleArticleData(t.video_id,t.url);t.exist=!!n;var i=this.enhancers[e].getPayloadMetaData(this._currentScraperData);t=utils.extentObject(i,t);var r=localStorage&&!!localStorage.getItem("_minForcePush");!r&&!configuration.getScraperType2()||t.exist||emitterService.send(consts.Emitter.NEW_VIDEO_EVENT,t),emitterService.send(consts.Emitter.NEW_SCRAPE_EVENT,t)},com.scrap.picker.Foxsports=e,com.scrap.factory.addPicker(e)}(),function(){function e(){}e.prototype.getPayloadMetaData=function(e){var t={},n=this.getPublishedAt(e);return n&&!isNaN(n)&&(t.published_at=n,10===(""+t.published_at).length&&(t.published_at=1e3*t.published_at)),t.tags=this.getPageTags(e),t},e.prototype.getPageTags=function(e){if(this.getTagsAtByConfig())return this.getTagsAtByConfig();var t=this.getTags(e);return"string"!=typeof t&&(t=JSON.stringify(t)),t},e.prototype.getPublishedAtByConfig=function(){var e=configuration.getPublishedAtConfig().keyword,t=configuration.getPublishedAtConfig().selector;return e&&this.publishedAtFromKeyword(e)?this.publishedAtFromKeyword(e):t&&this.publishedAtFromDom(t)?this.publishedAtFromDom(t):void 0},e.prototype.getTagsAtByConfig=function(){var e=configuration.getTagsConfig().selector;if(e){for(var t=[],n=document.querySelectorAll(e),i=0;i<n.length;i++)t.push(n[i].textContent.trim());return t.join(",")}},e.prototype.getPublishedAt=function(e){if(this.getPublishedAtByConfig())return this.getPublishedAtByConfig();var t=document.querySelector("meta[itemprop='uploadDate']")||document.querySelector("meta[name='date']")||document.querySelector("meta[name='datePublished']")||document.querySelector("meta[itemprop='datePublished']")||document.querySelector("*[property='v:published']")||document.querySelector("*[property='v:published']")||document.querySelector("*[property*='video:published']")||document.querySelector("*[property*='og:updated_time']")||document.querySelector("time[itemprop='datePublished']")||document.querySelector("meta[property*='published_time']")||document.querySelector("time");if(t&&t.getAttribute("content")){var n=t.getAttribute("content"),i="Invalid Date"!=new Date(n).toDateString();return i?new Date(n).getTime():new Date(t.getAttribute("content").replace(/-/g,"/")).getTime()}return t&&t.dateTime?new Date(t.dateTime).getTime():null},e.prototype.getTags=function(e){var t=document.querySelector("meta[name='keywords'],meta[property='keywords'],meta[name='news_keywords']");return t?t.content:""},e.prototype.publishedAtFromKeyword=function(e){var t=this.searchKeyInJSONScripts(e);if(t){var n=new Date(t[e]);if("Invalid Date"!==n.toString())return new Date(t[e]).getTime()}},e.prototype.publishedAtFromDom=function(e){var t=document.querySelector(e);if(t){var n=t.innerText.replace(/-/g,"/").replace(/T/g," ").replace(/Z/g,""),i=new Date(n);if("Invalid Date"!==i.toString())return i.getTime()}},e.prototype.searchKeyInJSONScripts=function(e){for(var t=document.querySelectorAll("script[type*='application']"),n=0;n<t.length;n++){var i=t[n].textContent;if(i.indexOf(e)===-1)return;var r=JSON.parse(t[n].textContent);if(!r)return;if(!Array.isArray(r))return r;for(var o=0;o<r.length;o++)if(r[o][e])return r[o]}},com.scrap.baseMetaDataEnhancer=e}(),function(){function FoxsportsMDEnhancer(){FoxsportsMDEnhancer.__superCtor__.call(this),this.xhr={}}utils["extends"](FoxsportsMDEnhancer,com.scrap.baseMetaDataEnhancer),FoxsportsMDEnhancer.prototype.init=function(e,t,n){e===window.location.pathname?(this.nuxtData=window.__NUXT__.data[0],this.nuxtData.video&&t!==this.nuxtData.video.external_id?this.getMetaDataByUrl(window.location.origin+e,n,e):n(e)):this.getMetaDataByUrl(window.location.origin+e,n,e)},FoxsportsMDEnhancer.prototype.getMetaDataByUrl=function(reqUrl,initIsDone,url){function reqListener(){try{that.nuxtData=eval(this.responseText.split("__NUXT__=")[1].split("</script>")[0]).data[0],initIsDone(url)}catch(error){utils.log("** We tried fetch metadata for scraper but something gone WRONG! Please check getMetaDataByUrl method of FoxsportsMDEnhancer class **")}}var that=this;this.xhr[url]=new XMLHttpRequest,this.xhr[url].addEventListener("load",reqListener),this.xhr[url].open("GET",reqUrl),this.xhr[url].send()},FoxsportsMDEnhancer.prototype.getPublishedAt=function(){try{var e,t=this.nuxtData;t.story?e=t.story.last_published_date:t.video&&(e=t.video.last_published_date);var n=new Date(e).getTime();if(!isNaN(n))return n}catch(i){utils.logError("Error while getting publish-date: "+i)}},FoxsportsMDEnhancer.prototype.getTags=function(){var e=[];try{var t,n=this.nuxtData;n.story?t=n.story.tags:n.video&&(t=n.relatedTags);for(var i=0;i<t.length;i++){var r=t[i];e.push(r.title)}}catch(o){utils.logError("Error while getting tags: "+o.message)}return e.join(",")},com.scrap.metaDataEnhancer=FoxsportsMDEnhancer}(),function(){function e(e){return e.stopImmediatePropagation(),!1}function t(){t.__superCtor__.call(this),this.ATTR_MEDIA_SIZE="data-media_file_size",this.mediaHeightIndex="",this._apvElement=null,this.alreadyPlayed=!1}com.apv=com.apv||{},com.apv.players=com.apv.players||{};utils["extends"](t,EventDispatcher),com.apv.players.ApvPlayerBase=t,t.States={STATE_HAVE_NOTHING:0,STATE_HAVE_METADATA:1,STATE_HAVE_CURRENT_DATA:2,STATE_HAVE_FUTURE_DATA:3,STATE_HAVE_ENOUGH_DATA:4},t.prototype.init=function(e){this._apvData=e,globalEvent.addEventListener(consts.Events.DomWindow.RESIZE,this.handleResizeEvent,this),this.mediaHeightIndex=this.getNearestSize(),this._apvElement=document.createElement("video"),this._apvElement.className="minute_apv",this._apvElement.setAttribute("minVideoID",this._apvData.getArticleData().getArticleId()),this._apvElement.setAttribute("muted",""),this._apvElement.muted=!0,this._apvElement.volume=0,this._apvElement.setAttribute("playsinline",""),this._apvElement.setAttribute("webkit-playsinline",""),this._apvElement.setAttribute("disableRemotePlayback",""),this.setLoopPlay(),this._apvElement.style.transition=configuration.getEffectApvTransitionVideo(),this.attachVideoEvents(),this.buildVideoSources()},t.prototype.attachVideoEvents=function(){function t(){o>0&&(clearTimeout(o),o=0)}function n(){i.hasStartPlaying()?utils.getRequestAnimationFrame(n):i.dispatchEvent(consts.Events.Players.LOADED)}var i=this,r=!1,o=0;this._handleVideoEvent_LoadedMetadata=function(e){r=!0,t(),i.dispatchEvent("loadedmetadata"),i.handleMediaMetadataLoaded()},this._handleVideoEvent_Play=function(t){return i.handleVideoEvent_Play(t),e(t)},this._handleVideoEvent_Error=function(t){return i.handleVideoEvent_Error(t),e(t)},this._handleVideoEvent_Ended=function(t){return i.handleVideoEvent_Ended(),e(t)},this._handleCanPlayThrough=function(){i._apvElement&&i._apvElement.removeEventListener("canplaythrough",i._handleCanPlayThrough),i._handleCanPlayThrough=null,n()},this._apvElement.addEventListener("loadedmetadata",this._handleVideoEvent_LoadedMetadata),this._apvElement.addEventListener("play",this._handleVideoEvent_Play),this._apvElement.addEventListener("error",this._handleVideoEvent_Error),this._apvElement.addEventListener("ended",this._handleVideoEvent_Ended),this._apvElement.addEventListener("canplaythrough",this._handleCanPlayThrough),this._apvElement.addEventListener("timeupdate",e),this._apvElement.addEventListener("playing",e),this._apvElement.addEventListener("waiting",e),this._apvElement.addEventListener("load",e),this._apvElement.addEventListener("progress",e),this._apvElement.addEventListener("durationchange",e)},t.prototype.handleResizeEvent=function(){this._apvData&&utils.ElementObjectFit.set({mediaElement:this.getApvElement(),originalElement:this._apvData.getElementSize(),isFullSize:this._apvData.getProduct()===consts.Emitter.PRODUCT_IN_ARTICLE})},t.prototype.buildVideoSources=function(){var e=this.getFullVideoUrl("mp4");configuration.getPlaymode(this._apvData.getProduct())==consts.playmode.VIEWPORT&&(this._apvElement.src=e),this._apvElement.setAttribute("data-src",e),this._apvElement.setAttribute(this.ATTR_MEDIA_SIZE,configuration.getRezVideo()[this.mediaHeightIndex])},t.prototype.setSource=function(){this._apvElement.src=this._apvElement.dataset.src,this._apvElement.load()},t.prototype.setLoopPlay=function(){try{this._apvElement.setAttribute("loop","")}catch(e){}},t.prototype.play=function(){(this._apvElement.readyState===t.States.STATE_HAVE_ENOUGH_DATA||this.alreadyPlayed)&&(this.playElement(),this.sendEventPlaying())},t.prototype.playElement=function(){function e(e){return e&&"function"==typeof Promise&&e instanceof Promise}this.alreadyPlayed=!0;var t=this._apvElement.play();e(t)&&t.then&&t["catch"]&&t.then(function(e){})["catch"](function(e){}),compatibility.isLPM(t,function(e){0===e.code&&compatibility.isMobile()&&compatibility.isSafari()&&(utils.log("video can't be played due to low power mode "),this.hideApvElementBadWay())}.bind(this),function(){utils.log("Video is playing")})},t.prototype.hideApvElementBadWay=function(){this._apvElement.style.visibility="hidden",this._apvElement.style.opacity=0},t.prototype.setAutoplay=function(){try{this._apvElement.setAttribute("preload","auto")}catch(e){}try{this._apvElement.setAttribute("autoplay","")}catch(e){}},t.prototype.pause=function(){this._apvElement.pause()},t.prototype.forcePlay=function(){this.playElement()},t.prototype.isPaused=function(){return this._apvElement.paused},t.prototype.sendEventPlaying=function(){this.dispatchEvent(consts.Events.Players.PLAYING),globalEvent.dispatchEvent(consts.Events.Players.PLAYING)},t.prototype.getApvElement=function(){return this._apvElement},t.prototype.getSizeData=function(){return this._apvData.isApvVertical()?configuration.getRezVertical():configuration.getRezVideo()},t.prototype.setStyles=function(e){if(this._apvElement)for(var t in e)this._apvElement.style[t]=e[t]},t.prototype.setElementAttribute=function(e,t){this._apvElement&&this._apvElement.setAttribute(e,t)},t.prototype.getNearestSize=function(){var e,t="m",n=utils.extractElementSize(this._apvData.getElementSize()),i=this.getSizeData();if(!n.width||!n.height)return t;n.width*=.9,n.height*=.9;for(e in i)if(i.hasOwnProperty(e)&&i[e]>=n.height)return e;return e},t.prototype.getFullVideoUrl=function(e){return this._apvData.getHltAPVUrl()+this.mediaHeightIndex+"."+e},t.prototype.handleMediaMetadataLoaded=function(){utils.setMediaElementSize(this.getApvElement()),utils.ElementObjectFit.set({mediaElement:this.getApvElement(),originalElement:this._apvData.getElementSize(),isFullSize:this._apvData.getProduct()===consts.Emitter.PRODUCT_IN_ARTICLE})},t.prototype.dispose=function(){this._apvElement.removeEventListener("loadedmetadata",this._handleVideoEvent_LoadedMetadata),this._apvElement.removeEventListener("play",this._handleVideoEvent_Play),this._apvElement.removeEventListener("error",this._handleVideoEvent_Error),this._apvElement.removeEventListener("ended",this._handleVideoEvent_Ended),this._apvElement.removeEventListener("canplaythrough",this._handleCanPlayThrough),this._apvElement.removeEventListener("timeupdate",e),this._apvElement.removeEventListener("playing",e),this._apvElement.removeEventListener("waiting",e),this._apvElement.removeEventListener("load",e),this._apvElement.removeEventListener("progress",e),this._apvElement.removeEventListener("durationchange",e),this._handleVideoEvent_Play=null,this._handleVideoEvent_Error=null,this._handleVideoEvent_Ended=null,this._handleCanPlayThrough=null,this._handleVideoEvent_LoadedMetadata=null,globalEvent.removeEventListener(consts.Events.DomWindow.RESIZE,this.handleResizeEvent,this),this.removeAllEventListener(),this._apvData=null,this._apvElement&&this._apvElement.parentElement&&this._apvElement.parentElement.removeChild(this._apvElement),this._apvElement=null},t.prototype.hasStartPlaying=function(){return!!this._apvElement&&!this._apvElement.paused&&0!==this._apvElement.currentTime},t.prototype.isImageUrl=function(){var e=document.createElement("a"),t=/\.(?:gif|png|webp|jpg|jpeg)$/i;return function(n){return e.href=n,t.test(e.pathname)}}(),t.prototype.handleVideoEvent_Play=function(e){this.dispatchEvent(consts.Events.Players.PLAYING)},t.prototype.handleVideoEvent_Ended=function(){this.dispatchEvent("ended"),utils.log("video ended for article "+this._apvData.getArticleData().getArticleUrl())},t.prototype.handleVideoEvent_Error=function(e){this.dispatchEvent("error"),utils.log("Browser cannot play video!")}}(),function(){com.apv=com.apv||{},com.apv.logos=com.apv.logos||{};var e=com.apv.logos;e.LogoElmBase=function(){e.LogoElmBase.__superCtor__.call(this)},utils["extends"](e.LogoElmBase,EventDispatcher),e.LogoElmBase.prototype.init=function(e){this.isMobile=compatibility.isMobile(),this.trans="0 , 0",this.buildLogoLinkElement(e)},e.LogoElmBase.prototype.buildLogoLinkElement=function(e){var t=this.createElement();t.className="minute_logo",t.title=t.alt=configuration.getTooltip(),t.style.cursor="pointer",t.style.width="4%",t.style.paddingTop="4%",compatibility.isMobile()&&(t.style.minWidth="12px"),t.style.minWidth="16px",t.style.outline="none",t.style.transform="translateZ(1px)",t.style.position="absolute",configuration.isClickByPointEnabled()&&(t.style.pointerEvents="none"),t.style.backgroundColor="transparent",t.style["z-index"]=1,t.style.opacity=.6;for(var n=0==e?configuration.getLogoPosition():configuration.getInArticleLogoPosition(),i=consts.logoPositions[n||"bottom-left"],r=Object.keys(i),o=0;o<r.length;o++){var a=r[o];t.style[a]=i[a]}t.innerHTML=this.getLogoInnerHtml(),this.minuteLinkElm=t},e.LogoElmBase.prototype.createElement=function(){return document.createElement("span")},e.LogoElmBase.prototype.getLogoElement=function(){return this.minuteLinkElm},e.LogoElmBase.prototype.getLogoInnerHtml=function(){return'<svg version="1.1" id="MinuteLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 46 46" style="display: block; position: absolute; left: 0; top: 0; transform: translate('+this.trans+');" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M42.7,13.4L42.7,13.4l-6.8,3.3c1,2,1.5,4.2,1.5,6.5c0,8-6.5,14.4-14.4,14.4c-8,0-14.4-6.5-14.4-14.4 S15.1,8.8,23.1,8.8c1.3,0,2.5,0.2,3.6,0.5l2-7.4c-2-0.5-3.6-0.7-5.7-0.7h0h0c-3.4,0-6.5,0.7-9.6,2.2C2.5,8.6-2,21.7,3.3,32.6 C8.6,43.5,21.7,48,32.6,42.7C43.5,37.4,48,24.3,42.7,13.4"/><circle style="fill:#2ABFD5;" cx="23" cy="23" r="9"/> </svg>'}}(function(){function e(){e.__superCtor__.call(this),this.minContainer=null,this.blockingState=consts.APVStates.Active,this._observerAttrChange=[],this.isIE=compatibility.isIE(),this.hasDisposed=!1,this._coverLayer=null}com.apv=com.apv||{},com.apv.domAdapter=com.apv.domAdapter||{};var t=com.apv.domAdapter,n={"box-shadow":"none",border:0,padding:"(0,0,0,0)",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",paddingBottom:"0px",transform:"translate(0px,0px)","box-sizing":"border-box;","float":"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0},i={borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0};t.Base=e,utils["extends"](e,EventDispatcher),e.getTypeName=function(){return"Base"},e.prototype.init=function(e){this.apvData=e,this.elementToReplace=this.apvData.getElementToReplace(),this.elementSize=this.apvData.getElementSize(),this.apvPlayer=this.apvData.getApvPlayer(),this.minuteLink=this.apvData.getMinuteLogo(),this.articleData=this.apvData.getArticleData(),utils.log("initializing DOM adapter. articleData.getArticleId(): "+this.articleData.getArticleId()),this._initElements(),this.attachWindowEvents(),this.eventsRegister(),this.setElementToObserve(),this.registerMouseEvents(),this.dispatchEvent("apvInjection")},e.prototype.eventsRegister=function(){globalEvent.addEventListener(consts.Events.DomWindow.BLUR,this.dispatchViewportEvent,this),globalEvent.addEventListener(consts.Events.DomWindow.SAFARI_FOCUS,this.handleWindowEvent_SafariFocus,this)},e.prototype._initElements=function(){this.createMinContainer(),this.createVideoElement(),this.createCoverLayerElement(),this.createLogoElement(),this.createWatchBanner(),this.createVideoWrapper(),this.applyZIndexForAbsoluteElements(),this._videoWrapper.appendChild(this.apvPlayer.getApvElement()),configuration.getShowLogo()&&this._videoWrapper.appendChild(this.minuteLinkElm),this.minContainer.appendChild(this._videoWrapper),this._coverLayer&&this.minContainer.appendChild(this._coverLayer),this._watchBanner&&this._videoWrapper.appendChild(this._watchBanner)},e.prototype.getBorderFix=function(){if(!this.borderFix&&(this.borderFix={left:0,top:0,right:0},(compatibility.isFF()||compatibility.isSafari())&&this.elementSize!==this.elementToReplace&&null!==this.elementToReplace.offsetParent)){var e=window.getComputedStyle(this.elementToReplace.offsetParent);this.borderFix.left=parseFloat(e.borderLeftWidth),this.borderFix.right=parseFloat(e.borderRightWidth),this.borderFix.top=parseFloat(e.borderTopWidth)}},e.prototype.render=function(){if(null!=this.elementToReplace){var e=this.elementToReplace.offsetParent;if(this.elementSize!==this.elementToReplace&&(e=this.elementSize.offsetParent),e){this.minContainer.style.display="flex";var t=getComputedStyle(this.elementSize);this.setWidthandHeight(e,t),this.setOffsetAndSides(e,t)}}},e.prototype.setWidthandHeight=function(e,t){return configuration.shouldTrackSize()?(this.minContainer.style.width=t.width,this.minContainer.style.height=t.height,void(this.isIE&&(this.minContainer.style.height=""+(parseInt(t.height)+parseInt(t.paddingTop)+parseInt(t.paddingBottom))+"px"))):(this.minContainer.style.height="100%",void(this.minContainer.style.width="100%"))},e.prototype.setOffsetAndSides=function(e,t){if(!configuration.shouldTrackSize())return this.minContainer.style.top="0",this.minContainer.style.left="0",void(testGroupService.isTestGroup()||(this.minContainer.style.opacity="1"));var n=this.elementSize.getBoundingClientRect(),i=e.getBoundingClientRect(),r=0;e===document.body&&(r=window.pageYOffset+e.getBoundingClientRect().top),this.minContainer.style.top=r+n.top-i.top-parseFloat(this.borderFix.top)+"px","rtl"==t.direction?this.minContainer.style.right=i.right-n.right+this.borderFix.right+"px":this.minContainer.style.left=n.left-i.left-parseFloat(this.borderFix.left)+"px",this.minuteLinkElm.style.paddingTop=this.minuteLinkElm.offsetWidth+"px"},e.prototype.redrawApvOnRequestAnimation=function(){var e=this,t=-1,n=configuration.getRenderModulus(),i=function(){if(t+=1,e.minContainer&&!e.hasDisposed&&(utils.getRequestAnimationFrame(i),(configuration.getIgnoreShouldRender()||e.shouldRender())&&t%n===0))return e.isElementToReplaceVisibleValid()?void e.render():void(e.minContainer.style.display="none")};utils.getRequestAnimationFrame(i)},e.prototype.startAnimationResize=function(){this.getBorderFix(),this._debouncer=new com.utils.Debounce(50,function(){this.render()},this),this._debouncer.enableFilter(250),this._debouncer.setEcho(50,10),globalEvent.addEventListenerOnce(consts.Events.DomWindow.RESIZE,this._debouncer.start,this._debouncer),this.render(),this.showApv(),configuration.shouldTrackSize()&&this.redrawApvOnRequestAnimation()},e.prototype._copyStylesFromElement=function(e,t,n){var i=utils.getComputedStyle(e);for(var r in n)t.style[r]=i[r]},e.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.minContainer.classList.add(consts.minuteClasses.CONTAINER),this.minContainer.setAttribute("placement",this.apvData.getName()),this.minContainer.setAttribute("container_minvideoid",this.articleData.getArticleId()),this.minContainer.setAttribute("id",this.apvData.getContainerUnique()),this.minContainer.style.position="absolute",this.minContainer.style.overflow="hidden",this.minContainer.style.display="flex",this.minContainer.style.transition="opacity 0.5s ease-out",this.minContainer.style.opacity=0,this._copyStylesFromElement(this.elementToReplace,this.minContainer,this.getListOfCopyableStyles());var e=configuration.getDisableParentTransform(),t=configuration.getRegularPlacerPlayerTransformScale(),n=configuration.getRegularPlacerContainerTransformScale();e&&!testGroupService.isTestGroup()&&(this.elementToReplace.style.transform="none",this.elementToReplace.style.webkitTransform="none",this.elementToReplace.style.MozTransform="none",this.elementToReplace.style.msTransform="none",this.elementToReplace.style.OTransform="none"),t&&(this.apvPlayer._apvElement.style.transform="scale("+t+")"),n&&(this.minContainer.style.transform="scale("+n+")")},e.prototype.createVideoElement=function(){var e=consts.values.HUNDRED_PERCENT,t=consts.values.HUNDRED_PERCENT;utils.isInt(parseFloat(this.minContainer.style.width))||(e="calc("+consts.values.HUNDRED_PERCENT+" + 1px)"),utils.isInt(parseFloat(this.minContainer.style.height))||(t="calc("+consts.values.HUNDRED_PERCENT+" + 1px)"),this.apvPlayer.setStyles({position:consts.values.RELATIVE,display:consts.values.BLOCK,width:e,height:t,objectFit:"cover"}),this._copyStylesFromElement(this.elementToReplace,this.apvPlayer._apvElement,i)},e.prototype.createWatchBanner=function(){var e=configuration.getRegularPlacerWatchFullSettings();if(e.active&&!(this.elementSize.width<e.minimumWidth)){var t=document.createElement("div");t.style.position="absolute";for(var n=0;n<e.position.length;n++){var i=e.position[n];t.style[i]="0px"}t.style.margin="15px",t.style.fill="white",t.style.backgroundColor="#3f3f3f",t.style.opacity="0.7",t.style.color="white",t.style.padding="10px 20px",t.style.maxWidth="40%",t.style.border="1px solid white",t.style.fontSize="1.2em",t.style.pointerEvents="none",t.innerText=e.text,com.utils.ApvElementUtils.setElementAsReplaced(t),this._watchBanner=t}},e.prototype.createCoverLayerElement=function(){},e.prototype.createVideoWrapper=function(){this._videoWrapper=document.createElement("div"),this._videoWrapper.style.width=consts.values.HUNDRED_PERCENT,this._videoWrapper.style.height=consts.values.HUNDRED_PERCENT,this._videoWrapper.style.position=consts.values.RELATIVE,this._videoWrapper.style.overflow="hidden",this._videoWrapper.style.flex="1",this._videoWrapper.style.display="block"},e.prototype.applyZIndexForAbsoluteElements=function(){if(configuration.shouldApplyZIndexReorder()){for(var e,t,n=Number.MAX_VALUE,i=document.createTreeWalker(this.elementToReplace.parentElement,NodeFilter.SHOW_ELEMENT,null,!1),r=i.nextNode();r;)t=getComputedStyle(i.currentNode),"none"!==t.display?i.currentNode!==this.elementToReplace?"absolute"!==t.position||parseInt(t.width)<=1?r=i.nextNode():(e=Number(t.zIndex),isNaN(e)&&(e=0),n>e&&(n=e),i.currentNode.style.zIndex=e+1,r=i.nextNode()):((compatibility.isFF()||compatibility.isIE()||compatibility.isEdge())&&t.zIndex<0&&"static"==t.position&&(n=parseInt(t.zIndex)+1),r=i.nextSibling()||i.nextNode()):r=i.nextSibling()||i.nextNode();if(n!==Number.MAX_VALUE)this.minContainer.style.zIndex=n;else{var o=getComputedStyle(this.elementToReplace).zIndex;this.minContainer.style.zIndex=isNaN(o)?0:o}this.minuteLinkElm.style.zIndex=this.minContainer.style.zIndex>=0?this.minContainer.style.zIndex:0,this._watchBanner&&(this._watchBanner.style.zIndex=this.minuteLinkElm.style.zIndex)}},e.prototype.insertContainerToDOM=function(){return this.apvData.getMethod()?void this.elementToReplace.insertAdjacentElement(this.apvData.getMethod(),this.minContainer):("A"==this.elementToReplace.tagName?this.elementToReplace.insertAdjacentElement("beforeend",this.minContainer):this.elementToReplace.insertAdjacentElement("afterend",this.minContainer),void this.dispatchReadyEvent())},e.prototype.dispose=function(){if(this.apvData){if(this.removeAllEventListener(),utils.isSupportIntersectionObserver()||(globalEvent.removeEventListener(consts.Events.DomWindow.SCROLL,this.dispatchViewportEvent,this),globalEvent.removeEventListener(consts.Events.DomWindow.RESIZE,this.handleWindowEvent_Resize,this)),globalEvent.removeEventListener(consts.Events.DomWindow.VISIBILITY_CHANGE,this.dispatchViewportEvent,this),globalEvent.removeEventListener(consts.Events.DomWindow.BLUR,this.dispatchViewportEvent,this),globalEvent.removeEventListener(consts.Events.DomWindow.ORIENTATION_CHANGE,this.dispatchViewportEvent,this),globalEvent.removeEventListener(consts.Events.DomWindow.SAFARI_FOCUS,this.handleWindowEvent_SafariFocus,this),this.apvPlayer.removeEventListener(consts.Events.Players.PLAYING,this.showApv,this),compatibility.isSafari()||this.apvPlayer.setStyles({opacity:0}),this.apvPlayer.dispose(),this.apvPlayer=null,this._debounceCarousel&&(this._debounceCarousel.kill(),this._debounceCarousel=null),this._debouncer&&(this._debouncer.kill(),this._debouncer=null),this._observerAttrChange&&this._observerAttrChange.length>0)for(var e=0;e<this._observerAttrChange.length;e++){var t=this._observerAttrChange[e];t.disconnect(),t=null}this._observerAttrChange=null,this.elementToReplace=null,this.elementSize=null,this._videoWrapper&&(this._videoWrapper.parentElement&&this._videoWrapper.parentElement.removeChild(this._videoWrapper),this._videoWrapper=null),this.minuteLinkElm&&(this.minuteLinkElm.parentElement&&this.minuteLinkElm.parentElement.removeChild(this.minuteLinkElm),this.minuteLinkElm=null),this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null),this.minuteLink=null,this.articleData=null,this.minContainer.apvData=null,this.minContainer=null,this.apvData=null,this.hasDisposed=!0}},e.prototype.setElementToObserve=function(){this.startObserveAttrChange(this.apvData.getViewportObserver())},e.prototype.isElementToReplaceVisibleValid=function(){return this.elementSize!=this.elementToReplace?!!this.elementToReplace&&!!this.elementToReplace.offsetParent||!!this.elementSize&&!!this.elementSize.offsetParent:!!this.elementToReplace&&!!this.elementToReplace.offsetParent},e.prototype.handleWindowEvent_Resize=function(e){var t=e.data;t&&this.dispatchViewportEvent()},e.prototype.showApv=function(){testGroupService.isTestGroup()||(this.minContainer.style.opacity=1)},e.prototype.hideApv=function(){this.minContainer.style.opacity=0},e.prototype.isElementVisible=function(){return viewportService.isElementVisible(this.minContainer,this.apvData.getViewportMaskElement())},e.prototype.getElementVisiblePercents=function(){return viewportService.getElementVisiblePercents(this.elementSize,this.apvData.getViewportMaskElement())},e.prototype.dispatchViewportEvent=function(){if(this.apvData){var e=this.getElementVisiblePercents();this._reportViewportPercentage(e)}},e.prototype.shouldRender=function(){return this._shouldRender},e.prototype.setShouldRender=function(e){this._shouldRender=e},e.prototype._reportViewportPercentage=function(e){var t=e>=configuration.getViewportPercentage();this.setShouldRender(t),this._updateVisible(t),min.debugParams[EnumDebugTools.DEBUG_VISIBILITY]&&utils.log("Regular APV "+this.apvData.getHighlightId()+" visibility: "+e),this.dispatchEvent(consts.Events.Element.ANALYTICS_VISIBLE,{apvData:this.apvData,percentsVisible:e})},e.prototype._updateVisible=function(e){return this.dispatchEvent(e?consts.Events.Element.VISIBLE:consts.Events.Element.NON_VISIBLE,{articleData:this.articleData,apvData:this.apvData}),e},e.prototype.registerMouseEvents=function(){var e=this.apvData.getContainerElement();e||utils.logError("WTF??? contact Daniel"),e.addEventListener(consts.Events.Element.MOUSE_ENTER,function(){this.dispatchEvent(consts.Events.Element.FIRST_MOUSE_ENTER)}.bind(this),{once:!0}),e.addEventListener(consts.Events.Element.MOUSE_ENTER,function(){this.dispatchEvent(consts.Events.Element.MOUSE_ENTER)}.bind(this)),e.addEventListener(consts.Events.Element.MOUSE_LEAVE,function(){this.dispatchEvent(consts.Events.Element.MOUSE_LEAVE)}.bind(this))},e.prototype.dispatchReadyEvent=function(){this.apvData.setMinuteContainerElementTracker(this.minContainer),this.dispatchEvent(consts.Events.Element.READY,{apvData:this.apvData}),utils.isSupportIntersectionObserver()?this.initInterObserver():this.dispatchViewportEvent()},e.prototype.initInterObserver=function(){var e=this,t={root:null,threshold:[0,.01,.5,1]};this._intersectionObserver=new IntersectionObserver(function(t){e._reportViewportPercentage(100*t[0].intersectionRatio)},t),this._intersectionObserver.observe(this.apvData._elementSize)},e.prototype.play=function(){this.apvPlayer&&this.apvPlayer.play()},e.prototype.pause=function(){this.apvPlayer&&this.apvPlayer.pause()},e.prototype.attachWindowEvents=function(){utils.isSupportIntersectionObserver()||(globalEvent.addEventListener(consts.Events.DomWindow.SCROLL,this.dispatchViewportEvent,this),globalEvent.addEventListener(consts.Events.DomWindow.RESIZE,this.handleWindowEvent_Resize,this)),globalEvent.addEventListener(consts.Events.DomWindow.ORIENTATION_CHANGE,this.dispatchViewportEvent,this),globalEvent.addEventListener(consts.Events.DomWindow.VISIBILITY_CHANGE,this.dispatchViewportEvent,this)},e.prototype.handleCarouselDebounceCallback=function(){this.dispatchEvent(consts.Events.Element.MUTANT,{articleData:this.articleData,apvData:this.apvData})},e.prototype.startObserveAttrChange=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return;var i={attributes:!0,characterData:!0,childList:!0},r=this;this._debounceCarousel=new com.utils.Debounce(250,this.handleCarouselDebounceCallback,this),this._observerAttrChange;var o=new MutationObserver(function(e){r._debounceCarousel.start()});n&&o.observe(n,i),this._observerAttrChange.push(o)}},e.prototype.clickByPoint=function(e){testGroupService.isTestGroup()||this.apvData.getContainerUnique()==e.data.containerUnique&&this.openPagesClickByPoint()},e.prototype.createLogoElement=function(){this.minuteLinkElm=this.minuteLink.getLogoElement(),testGroupService.isTestGroup()||(configuration.isClickByPointEnabled()?globalEvent.addEventListener(consts.Events.CLICK_FROM_POINT,this.clickByPoint,this):this.minuteLinkElm.addEventListener("click",this.openPages.bind(this),!0))},e.prototype.openPagesClickByPoint=function(){window.open(configuration.getBaseLinkUrl(),"_blank");return this.dispatchEvent(consts.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},e.prototype.openPages=function(e){e.preventDefault(),e.stopImmediatePropagation();var t=window.open(configuration.getBaseLinkUrl(),"_blank");return window.open(this.apvData.getRawAnchorValue(),"_self"),t&&t.focus(),this.dispatchEvent(consts.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},e.prototype.getBoundingClientRect=function(){
return this.minContainer?this.minContainer.getBoundingClientRect():this.elementToReplace.getBoundingClientRect()},e.prototype.handleWindowEvent_SafariFocus=function(){utils.log("hack for fixing render issue on safari mobile such as 4496"),this.minContainer.style.display="none"},e.prototype.getListOfCopyableStyles=function(){return n}}()),function(){function e(){e.__superCtor__.call(this)}com.apv=com.apv||{},com.apv.domAdapter=com.apv.domAdapter||{};var t=com.apv.domAdapter;t.pubDomAdapter=e,utils["extends"](e,com.apv.domAdapter.Base),e.getTypeName=function(){return"Foxsports"},e.prototype.insertContainerToDOM=function(){e.__super__.insertContainerToDOM.call(this),testGroupService.isTestGroup()||(this.minContainer.style.borderRadius="6px")}}(),function(){function e(e){i[e.data.videoId]=e.data}function t(){t.__superCtor__.call(this),this.minContainer=null,this.blockingState=consts.APVStates.Active,this.videoHasStarted=!1,this.apvSetHidden=!1,globalEvent.addEventListener(consts.Events.PLAYER_PLAYING,this.handlePlayerPlayingEvent,this),globalEvent.addEventListener(consts.Events.INARTICLE_CLICK,this.handleApvClicked,this)}com.apv=com.apv||{},com.apv.domAdapter=com.apv.domAdapter||{},com.apv.inArticleDomAdapter=com.apv.inArticleDomAdapter||{};var n=com.apv.domAdapter,i={};globalEvent.addEventListener(consts.Events.PLAYER_PLAYING,e),n.InArticleBase=t,utils["extends"](t,EventDispatcher),t.prototype.handlePlayerPlayingEvent=function(e){0===e.data.counter&&e.data.videoId==this.articleData.getPublisherVideoId()&&(globalEvent.removeEventListener(consts.Events.PLAYER_PLAYING,this.handlePlayerPlayingEvent,this),utils.log("hide video send inactive"),apvDataManager.setShouldSendImpClickForApvData(this.apvData,!1),this.videoHasStarted=!0,this.hideApv())},t.prototype.handleApvClicked=function(e){var t=e.data;t==this.apvData&&(globalEvent.removeEventListener(consts.Events.INARTICLE_CLICK,this.handleApvClicked,this),this.hideApv())},t.prototype.isPlayerPlayingOnInit=function(){return!!i[this.articleData.getPublisherVideoId()]},t.prototype.cleanInstance=function(){this.apvData=null,this.elementToReplace=null,this.apvPlayer=null,this.minuteLink=null,this.articleData=null,this.player=null,this._coverLayer=null,this._containerOverlay=null},t.prototype.init=function(e){return this.apvData=e,this.containerElement=e.getContainerElement(),this.apvPlayer=e.getApvPlayer(),this.minuteLink=e.getMinuteLogo(),this.articleData=e.getArticleData(),this.player=e.getPlayerInstance(),this._containerOverlay=null,this._coverLayer=null,this.isPlayerPlayingOnInit()?void this.cleanInstance():(this._initElements(),this.attachWindowEvents(),this.addEvents(),this._observeViewportMask(),this.setElementToObserve(),void this.insertContainerToDOM())},t.prototype._observeViewportMask=function(){var e=configuration.getInArticleViewportMask();if(e!==window){var t=function(){utils.log("InArticleBase observed change!"),this.dispatchViewportEvent();var e=new com.utils.Timer(500,this.dispatchViewportEvent,this);e.setCounterLimit(3),e.start(),this.mutationObserver.disconnect()}.bind(this);this.mutationObserver=new MutationObserver(t),this.mutationObserver.observe(e,{attributes:!0})}},t.prototype.setElementToObserve=function(){this.startObserveAttrChange(this.apvData.getViewportObserver())},t.prototype.addEvents=function(){globalEvent.addEventListener(consts.Events.PLAYER_VIDEO_CHANGED,this.handleVideoChanged.bind(this)),this.apvPlayer.addEventListener(consts.Events.Players.PLAYING,this.showApv,this)},t.prototype._initElements=function(){if(this.createMinContainer(),this.createVideoElement(),this.createCoverLayerElement(),this.createLogoElement(),this.createContainerOverlay(),this.createWatchBanner(),this.minContainer.appendChild(this.apvPlayer.getApvElement()),this._containerOverlay&&this.minContainer.appendChild(this._containerOverlay),this.minContainer.appendChild(this._coverLayer),configuration.getInArticleShowLogo()&&this.minContainer.appendChild(this.minuteLinkElm),this._watchBanner&&this.minContainer.appendChild(this._watchBanner),this.videoHasStarted)return void utils.log("video has started to play, wont insert apv to in article")},t.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.minContainer.classList.add(consts.minuteClasses.CONTAINER),this.decorateElementWithPlacementName(this.minContainer),this.minContainer.style.width="100%",this.minContainer.style.height="100%",this.minContainer.style.transition="opacity 0.5s ease-out",this.minContainer.style.position=consts.values.ABSOLUTE,this.minContainer.style.top="0px",this.minContainer.style.opacity=0,this.minContainer.setAttribute("id",this.apvData.getContainerUnique())},t.prototype.getTypeName=function(){return"InArticle Base"},t.prototype.decorateElementWithPlacementName=function(e){e.setAttribute("placement",this.getTypeName())},t.prototype.createVideoElement=function(){var e={position:consts.values.RELATIVE,display:consts.values.BLOCK,width:consts.values.HUNDRED_PERCENT,height:consts.values.HUNDRED_PERCENT};e[consts.styles.OBJECT_FIT]="cover",this.apvPlayer.setStyles(e)},t.prototype.createWatchBanner=function(){var e=configuration.getInArticlePlacerWatchFullSettings();if(e.active){var t=document.createElement("div");t.style.position="absolute";for(var n=0;n<e.position.length;n++){var i=e.position[n];t.style[i]="0px"}t.style.margin="15px",t.style.fill="white",t.style.backgroundColor="#3f3f3f",t.style.opacity="0.7",t.style.color="white",t.style.padding="10px 20px",t.style.maxWidth="40%",t.style.border="1px solid white",t.style.fontSize="1em",t.style.pointerEvents="none",t.innerText=e.text,com.utils.ApvElementUtils.setElementAsReplaced(t),this._watchBanner=t}},t.prototype.createCoverLayerElement=function(){this._coverLayer=document.createElement("div"),this._coverLayer.style.width=consts.values.HUNDRED_PERCENT,this._coverLayer.style.height=consts.values.HUNDRED_PERCENT,this._coverLayer.style.position=consts.values.ABSOLUTE,this._coverLayer.style.top="0px"},t.prototype.insertContainerToDOM=function(){utils.logError("insertContainerToDOM has to be implemented and do not forget to dispatchReadyEvent")},t.prototype.showApv=function(){testGroupService.isTestGroup()||this.apvSetHidden!==!1||(this.minContainer.style.opacity=1)},t.prototype.hideApv=function(){this.apvSetHidden=!0,this.minContainer.style.opacity=0,this.pause()},t.prototype.isElementVisible=function(){var e=configuration.getInArticleViewportMask();return viewportService.isElementVisible(this.containerElement,e)},t.prototype.getElementVisiblePercents=function(){var e=configuration.getInArticleViewportMask();return viewportService.getElementVisiblePercents(this.containerElement,e)},t.prototype.dispatchViewportEvent=function(){var e=this.getElementVisiblePercents();this._reportViewportPercentage(e)},t.prototype._reportViewportPercentage=function(e){var t=e>=configuration.getViewportPercentage();this._updateVisible(t),min.debugParams[EnumDebugTools.DEBUG_VISIBILITY]&&utils.log("In Article APV "+this.apvData.getHighlightId()+" visibility: "+e),this.dispatchEvent(consts.Events.Element.ANALYTICS_VISIBLE,{apvData:this.apvData,percentsVisible:e})},t.prototype._updateVisible=function(e){e?this.dispatchEvent(consts.Events.Element.VISIBLE,{articleData:this.articleData}):this.dispatchEvent(consts.Events.Element.NON_VISIBLE,{articleData:this.articleData})},t.prototype.handleCarouselDebounceCallback=function(){this.dispatchEvent(consts.Events.Element.MUTANT,{articleData:this.articleData,apvData:this.apvData})},t.prototype.startObserveAttrChange=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return;var i={attributes:!0,characterData:!0,childList:!0},r=this;this._debounceCarousel=new com.utils.Debounce(250,this.handleCarouselDebounceCallback,this),this._observerAttrChange=[];var o=new MutationObserver(function(e){r._debounceCarousel.start()});n&&o.observe(n,i),this._observerAttrChange.push(o)}},t.prototype.dispatchReadyEvent=function(){this.dispatchEvent(consts.Events.Element.READY,{apvData:this.apvData}),utils.isSupportIntersectionObserver()?this.initInterObserver():this.dispatchViewportEvent()},t.prototype.initInterObserver=function(){var e=this,t={root:null,threshold:[0,.01,.5,1]},n=new IntersectionObserver(function(t){e._reportViewportPercentage(100*t[0].intersectionRatio)},t);n.observe(this.containerElement)},t.prototype.play=function(){this.apvPlayer&&!this.apvSetHidden&&this.apvPlayer.play()},t.prototype.pause=function(){this.apvPlayer&&this.apvPlayer.pause()},t.prototype.attachWindowEvents=function(){utils.isSupportIntersectionObserver()||globalEvent.addEventListener(consts.Events.DomWindow.SCROLL,this.dispatchViewportEvent,this),globalEvent.addEventListener(consts.Events.DomWindow.ORIENTATION_CHANGE,this.dispatchViewportEvent,this)},t.prototype.clickByPoint=function(e){if(!testGroupService.isTestGroup()){var t=0==this.minContainer.style.opacity;this.apvData.getContainerUnique()!=e.data.containerUnique||t||this.openPagesClickByPoint()}},t.prototype.createLogoElement=function(){this.minuteLinkElm=this.minuteLink.getLogoElement(),testGroupService.isTestGroup()||(configuration.isClickByPointEnabled()?globalEvent.addEventListener(consts.Events.CLICK_FROM_POINT,this.clickByPoint,this):this.minuteLinkElm.addEventListener("click",this.openPages.bind(this),!0))},t.prototype.openPagesClickByPoint=function(){window.open(configuration.getBaseLinkUrl(),"_blank");return this.dispatchEvent(consts.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},t.prototype.openPages=function(e){window.open(configuration.getBaseLinkUrl(),"_blank");return this.dispatchEvent(consts.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},t.prototype.activateApv=function(){this.showApv()},t.prototype.setState=function(e){this.activateApv()},t.prototype.dispose=function(){this.hideApv(),apvDataManager.setShouldSendImpClickForApvData(this.apvData,!1)},t.prototype.observerAttrChange=function(){},t.prototype.getBoundingClientRect=function(){return this.minContainer.getBoundingClientRect()},t.prototype.blockApv=function(){},t.prototype.hideDebugBlocking=function(){},t.prototype.showDebugBlocking=function(){},t.prototype.handleVideoChanged=function(e){},t.prototype.createContainerOverlay=function(){}}(),function(){function e(){e.__superCtor__.call(this)}com.apv=com.apv||{},com.apv.domAdapter=com.apv.domAdapter||{},com.apv.inArticleDomAdapter=com.apv.inArticleDomAdapter||{};com.publisher.utils;utils["extends"](e,com.apv.domAdapter.InArticleBase),com.apv.inArticleDomAdapter.Foxsports=e,e.prototype.getTypeName=function(){return"Foxsports"},e.prototype.createVideoElement=function(){e.__super__.createVideoElement.call(this);var t=document.createElement("style"),n="div.jw-preview #"+this.apvData.getContainerUnique()+" video.minute_apv {width:100% !important; height: 100% !important";t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),this.minContainer.insertAdjacentElement("afterbegin",t)},e.prototype._put=function(e){if(this.minContainer.style.zIndex=1,this.containerElement.classList.contains("video-player-container")){var t=this.containerElement.querySelector(".video-player-container .video");if(!t)return;t.prepend(this.minContainer)}else e.appendChild(this.minContainer);this.dispatchReadyEvent();var n=new MutationObserver(function(){this.containerElement.classList.contains("jw-state-idle")||(this.hideApv(),apvDataManager.setShouldSendImpClickForApvData(this.apvData,!1),"none"===getComputedStyle(e).display&&apvDataManager.sendClickEvent(this.apvData),n.disconnect())}.bind(this));n.observe(this.containerElement,{attributes:!0})},e.prototype.insertContainerToDOM=function(){this.timeout=120,this.interval=setInterval(function(){this.timeout--;var e=this.containerElement.querySelector(".jw-preview,.video-player-container .video img");e&&"none"!=getComputedStyle(e).display&&(this._put(e),this.interval&&clearInterval(this.interval)),this.timeout<=0&&this.interval&&clearInterval(this.interval)}.bind(this),500)},e.prototype.dispose=function(){e.__super__.dispose.call(this),globalEvent.dispatchEvent(consts.Events.IN_ARTICLE_PLACER_DISPOSED)}}(),function(){function e(){e.__superCtor__.call(this),this.apvData=null,this.domAdapter=null,this.apvPlayer=null,this.articleData=null}com.apv=com.apv||{},com.apv.playmodes=com.apv.playmodes||{},com.apv.playmodes.Base=e,utils["extends"](e,EventDispatcher),e.prototype.setDomAdapter=function(e){this.apvData=e,this.domAdapter=this.apvData.getDomAdapter(),this.apvPlayer=this.apvData.getApvPlayer(),this.articleData=this.apvData.getArticleData()},e.prototype.insertContainerToDOM=function(){this.domAdapter.insertContainerToDOM(),this.domAdapter.startAnimationResize()},e.prototype.start=function(){}}(),function(){function e(){e.__superCtor__.call(this)}com.apv.playmodes.Viewport=e,utils["extends"](e,com.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this),this.apvPlayer.setAutoplay(),this.apvPlayer.forcePlay(),this.apvPlayer.addEventListener(consts.Events.Players.LOADED,function(){this.domAdapter.isElementVisible()?this.domAdapter.play():this.domAdapter.pause()}.bind(this)),this.domAdapter.addEventListener(consts.Events.Element.VISIBLE,function(){this.domAdapter.play()}.bind(this)),this.domAdapter.addEventListener(consts.Events.Element.NON_VISIBLE,function(){this.domAdapter.pause()}.bind(this)),this.domAdapter.addEventListener(consts.Events.Element.MUTANT,function(e){setTimeout(function(){this.domAdapter.dispatchViewportEvent()}.bind(this),10)}.bind(this)),this.domAdapter.addEventListener("apvInjection",function(){this.insertContainerToDOM()}.bind(this))}}(),function(){function e(){e.__superCtor__.call(this)}com.apv.playmodes.Hover=e,utils["extends"](e,com.apv.playmodes.Base),e.prototype.addMouseEvents=function(){this.domAdapter.addEventListener("mouseenter",function(){this.domAdapter.setShouldRender(!0),this.domAdapter.render(),this.domAdapter.showApv(),this.domAdapter.play()}.bind(this)),this.domAdapter.addEventListener("mouseleave",function(){this.isVisible=!1,this.domAdapter.setShouldRender(!1),this.domAdapter.hideApv(),this.domAdapter.pause()}.bind(this))},e.prototype.start=function(){e.__super__.start.call(this),this.apvPlayer.setAutoplay(),this.apvPlayer.forcePlay(),this.domAdapter.addEventListener(consts.Events.Element.FIRST_MOUSE_ENTER,function(){this.addMouseEvents(),this.domAdapter.setShouldRender(!0),this.apvPlayer.setSource(),this.apvPlayer.forcePlay(),this.insertContainerToDOM()}.bind(this)),this.domAdapter.addEventListener("apvInjection",function(){}.bind(this))}}();var ApvData=function(){function e(e){this._containerUnique=utils.generateShortUnique(),this._articleData=e.articleData,this._uuid=utils.generateUnique(),this._product=e.product,this._key=""+this.getHighlightId(this._product),this._keyProduct=this._key+"_"+this._product,this._name=e.name,this._debug=null,this._state=consts.APVStates.New,this._playmode=configuration.getPlaymode(this._product),this._isVertical=!1,this._apvPlayer=null,this._domAdapter=null,this._minuteLogo=null,this._playerInstance=null,this._elementToReplace=e.elmToReplace,this._elementSize=e.elementSize,this._manualClick=null,this._rawAnchorValue=e.rawUrl,this._clickElements=[],this._viewportMask=e.viewportMaskElement,"undefined"==typeof this._viewportMask&&utils.logError("_viewportMask should always be something!!!"),this._viewportObserver=e.viewportObserver,this._containerElement=null,this._domContainerElementTracker=null,this._domViewportMaskElementTracker=null,this._method=e.method||null,this._onDisposed=new com.utils.Signal,this._hasDisposed=!1,this._belongToUrl=null,this.setContainerElement(e.containerElement),this._shouldSendImpression=!0,this._didImpressionSent=!1,this._isClickRegistered=!1,this._shouldSendClickEvent=!0,this._clickAlreadySent=!1,this.setIsVertical()}return e.prototype.setImpressionHasSent=function(){this._didImpressionSent=!0},e.prototype.setShouldSendImpression=function(e){this._shouldSendImpression=e},e.prototype.getShouldSendImpression=function(){return!this.getDidImpressionSent()&&this._shouldSendImpression&&!this.getClickAlreadySent()},e.prototype.getDidImpressionSent=function(){return this._didImpressionSent},e.prototype.setIsClickRegistered=function(e){this._isClickRegistered=e},e.prototype.getIsClickRegistered=function(){return this._isClickRegistered},e.prototype.setShouldSendClickEvent=function(e){this._shouldSendClickEvent=e},e.prototype.getShouldSendClickEvent=function(){return this._shouldSendClickEvent&&!this.getClickAlreadySent()&&this.getDidImpressionSent()},e.prototype.setClickAlreadySent=function(){this._clickAlreadySent=!0},e.prototype.getClickAlreadySent=function(){return this._clickAlreadySent},e.prototype.setClickElements=function(e){this._clickElements=e},e.prototype.getVideoId=function(){return this._articleData&&this._articleData.getPublisherVideoId()},e.prototype.getMinuteVideoId=function(){return this._articleData&&this._articleData.getVideoDBId()},e.prototype.getName=function(){return this._name},e.prototype.getMethod=function(){return this._method},e.prototype.setName=function(e){this._name=e},e.prototype.getClickElements=function(){return this._clickElements},e.prototype.setContainerElement=function(e){e&&!this._containerElement&&(this._containerElement=e,this._createElementsTracker(),this._belongToUrl=com.publisher.utils&&com.publisher.utils.getElementUrl&&com.publisher.utils.getElementUrl(this._containerElement))},e.prototype._createElementsTracker=function(){this._domContainerElementTracker=new com.utils.DomElementTracker(this._containerElement),this._domContainerElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domContainerElementTracker.start(),this._viewportMask!==window&&(this._domViewportMaskElementTracker=new com.utils.DomElementTracker(this._viewportMask),this._domViewportMaskElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domViewportMaskElementTracker.start())},e.prototype.setMinuteContainerElementTracker=function(e){this._domMinuteContainerElementTracker=new com.utils.DomElementTracker(e),this._domMinuteContainerElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domMinuteContainerElementTracker.start()},e.prototype.getProduct=function(){return this._product},e.prototype.getKey=function(){return this._key},e.prototype.getKeyProduct=function(){return this._keyProduct},e.prototype.getArticleData=function(){return this._articleData},e.prototype.getElementToReplace=function(){return this._elementToReplace},e.prototype.getElementSize=function(){return this._elementSize},e.prototype.getContainerElement=function(){return this._containerElement},e.prototype.setApvPlayer=function(e){return this._apvPlayer=e,this._apvPlayer},e.prototype.getApvPlayer=function(){return this._apvPlayer},e.prototype.setDomAdapter=function(e){return this._domAdapter=e},e.prototype.getDomAdapter=function(){return this._domAdapter},e.prototype.setMinuteLogo=function(e){return this._minuteLogo=e},e.prototype.getMinuteLogo=function(){return this._minuteLogo},e.prototype.getBlockingDistance=function(){return configuration.getBlockingDistanceRadius()},e.prototype.getPosition=function(){var e=this.getRect();return{top:e.top+document.body.scrollTop+parseInt(e.height)/2,left:e.left+document.body.scrollLeft+parseInt(e.width)/2}},e.prototype.getRect=function(){return this._domAdapter?this._domAdapter.getBoundingClientRect():this._elementToReplace.getBoundingClientRect()},e.prototype.setDebug=function(e){this._debug&&this._debug.parentElement.removeChild(this._debug),this._debug=e},e.prototype.getDebug=function(){return this._debug},e.prototype.setState=function(e){utils.log("BlockingD: "+this._articleData.getArticleUrl()+" is "+e),this._state=e},e.prototype.getState=function(){return this._state},e.prototype.getViewportMaskElement=function(){return this._viewportMask},e.prototype.getViewportObserver=function(){return this._viewportObserver},e.prototype.setPlayerInstance=function(e){this._playerInstance=e},e.prototype.getPlayerInstance=function(){return this._playerInstance},e.prototype.setManualClick=function(e){e.length&&utils.logWarning("SetManualClick as array which is not supported at the moment"),this._manualClick=e},e.prototype.getManualClick=function(){return this._manualClick},e.prototype.getUniqId=function(){return this._uuid},e.prototype.getRawAnchorValue=function(){return this._rawAnchorValue},e.prototype.getContainerUnique=function(){return this._containerUnique},e.prototype.dispose=function(){this._onDisposed&&(this.disposedHltData=utils.cloneObject(highlightsService.getHltByProduct(this._articleData.getHighlights(),this._product)),this.disposedArticleUrl=this._articleData.getArticleUrl(),this._onDisposed.dispatch(this),this._domContainerElementTracker&&(this._domContainerElementTracker.dispose(),this._domContainerElementTracker=null),this._domViewportMaskElementTracker&&(this._domViewportMaskElementTracker.dispose(),this._domViewportMaskElementTracker=null),this._domMinuteContainerElementTracker&&(this._domMinuteContainerElementTracker.dispose(),this._domMinuteContainerElementTracker=null),this._domAdapter&&(this._domAdapter.dispose(),this._domAdapter=null),this._articleData=null,this._apvPlayer=null,this._elementToReplace=null,this._elementSize=null,this._viewportMask=null,this._viewportObserver=null,this._containerElement=null,this._onDisposed.removeAll(),this._onDisposed=null,this._hasDisposed=!0,this._minuteLogo=null,this._watcher=null,this._manualClick=null,this._clickElements=null)},e.prototype.hasDisposed=function(){return this._hasDisposed},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype._onContainerElementRemoved=function(){this.dispose()},e.prototype.getBelongToUrl=function(){return this._belongToUrl},e.prototype.getHighlights=function(){return this._articleData.getHighlights()},e.prototype.getHighlightId=function(){if(this._hasDisposed)return this.disposedHltData.hltId;var e=highlightsService.getHltByProduct(this._articleData.getHighlights(),this._product);return e||utils.logError("shouldnt ever get to this point"),e.hltId},e.prototype.getRank=function(){var e=highlightsService.getHltByProduct(this._articleData.getHighlights(),this._product);return e||utils.logError("BlockingD: shouldnt ever get to this point"),e.rank},e.prototype.getHltAPVUrl=function(){if(this._hasDisposed)return this.disposedHltData.vidUrl;var e=highlightsService.getHltByProduct(this._articleData.getHighlights(),this._product);return e||utils.logError("shouldnt ever get to this point"),e.vidUrl},e.prototype.getArticleUrl=function(){return this._hasDisposed?this.disposedArticleUrl:this._articleData.getArticleUrl()},e.prototype.getPlaymodeEnum=function(){switch(this._playmode){case consts.playmode.VIEWPORT:return 2;case consts.playmode.HOVER:return 5;case consts.playmode.BLOCKINGHOVER:return 6;default:return 0}},e.prototype.getPlaymode=function(){return this._playmode},e.prototype.setPlaymode=function(e){this._playmode=e},e.prototype.setIsVertical=function(){var e=highlightsService.supportVertical(this._articleData.getHighlights()),t=!1,n=this._elementSize.clientWidth,i=this._elementSize.clientHeight;n/i<configuration.getValidRatio()&&(t=!0),this._isVertical=e&&t},e.prototype.isApvVertical=function(){return this._isVertical},e}();!function(){function e(){this._usedApvDataList={},this._isRequestDisposedUpdate=!1,this._clickSentApv={},this._usedArticleDataList={},this._alreadySentImpression={}}e.prototype.isAPVAlreadyExists=function(e){if(this._usedApvDataList[e.getContainerUnique()])return!0;for(var t=Object.keys(this._usedApvDataList),n=0;n<t.length;n++)if(t[n]===e.getContainerElement()||this._usedApvDataList[t[n]]._containerElement===e.getContainerElement())return!0;return!1},e.prototype.add=function(e,t){if(e.hasDisposed())return!1;if(this.isAPVAlreadyExists(e))return!1;var n=this;this._usedApvDataList[e.getContainerUnique()]=e,"undefined"==typeof e.getHighlightId()&&utils.logWarning("apvData with no highlight, make sure we have highlight in 'InArticlePlacer'");var i=e.getHighlightId().toString();return this._usedArticleDataList[i]=e,e.onDisposed().add(function(e){n.remove(e)}),this._alreadySentImpression[e.getKeyProduct()]&&this.setImpressionSent(e),this._clickSentApv[e.getKeyProduct()]&&e.setClickAlreadySent(),e.getProduct()===consts.Emitter.PRODUCT_IN_ARTICLE&&e.setState(consts.APVStates.Active),!0},e.prototype.remove=function(e){var t=e.getContainerUnique();this._usedApvDataList[t]&&delete this._usedApvDataList[t];var n=e.getHighlightId().toString();this._usedArticleDataList[n]&&delete this._usedArticleDataList[n],this._isRequestDisposedUpdate||(this._isRequestDisposedUpdate=!0,utils.getRequestAnimationFrame(this.sendApvDisposedEvent.bind(this)))},e.prototype.sendApvDisposedEvent=function(){this._isRequestDisposedUpdate=!1,globalEvent.dispatchEvent(consts.Events.APV_DISPOSED)},e.prototype.getApvDataByKeyProduct=function(e,t){var n=this._getAllApvDataByKeyProduct(e,t);return n.length>0?n[0]:null},e.prototype.setClickAlreadySent=function(e){e&&e.setClickAlreadySent();for(var t=this._getAllApvDataByKeyProduct(e.getHighlightId(),e.getProduct()),n=0;n<t.length;n++){var i=t[n];i!==e&&i.setClickAlreadySent()}this._clickSentApv[e.getKeyProduct()]=!0},e.prototype.setImpressionSent=function(e){this._alreadySentImpression[e.getKeyProduct()]=!0;for(var t=this._getAllApvDataByKeyProduct(e.getHighlightId(),e.getProduct()),n=0;n<t.length;n++){var i=t[n];i.setImpressionHasSent()}},e.prototype.setShouldSendImpClickForApvData=function(e,t){e.setShouldSendImpression(t),e.getDidImpressionSent()||e.setShouldSendClickEvent(t)},e.prototype.setIsClickRegistered=function(e,t){e.setIsClickRegistered(t)},e.prototype.getShouldSendClickEvent=function(e){return!(!e||!e.getShouldSendClickEvent())},e.prototype.getIsClickRegistered=function(e){return e.getIsClickRegistered()},e.prototype.getShouldSendImpression=function(e){return e.getShouldSendImpression()},e.prototype.getAllActiveApv=function(){for(var e=Object.keys(this._usedApvDataList),t=[],n=0;n<e.length;n++){var i=this._usedApvDataList[e[n]];i.getState()===consts.APVStates.Active&&t.push(i)}return t},e.prototype._getAllApvDataByKeyProduct=function(e,t){for(var n=Object.keys(this._usedApvDataList),i=[],r=0;r<n.length;r++){var o=this._usedApvDataList[n[r]];o.getHighlightId()===e&&o.getProduct()===t&&i.push(o)}return i},e.prototype.getAmountOfApvDataOnPage=function(){return Object.keys(this._usedApvDataList).length},e.prototype.create=function(e){var t=new ApvData(e),n=this.add(t,e.product);if(n)return t},e.prototype.setShouldSendClickEvent=function(e,t){e.setShouldSendClickEvent(t)},e.prototype.sendClickEvent=function(e){clicksAnalyticsService.sendClick(e.getArticleData(),{type:consts.Emitter.ANALYTICS_CLICK_EVENT,placementFunction:consts.Placements.VIEWPORT_IMPRESSION,uniq:!1,product:e.getProduct(),placement:e.getName()},!0,e)},com.ApvDataManager=e}(),function(){function e(e){t=e}var t;e.prototype.init=function(){this.markPlaces(),globalEvent.addEventListener(consts.Events.ONE_SECONDS_INTERVAL,this.markPlaces,this)},e.prototype.setContainerAttr=function(e,t,n){e.setAttribute(t,n||"true")},e.prototype.getNewContainers=function(e){for(var t=e.getContainerSelector().split(","),n=0;n<t.length;n++)t[n]+=":not(["+consts.integrationDataSet.ENABLE+"])";var i=t.join(),r=document.querySelectorAll(i);return r},e.prototype.markPlacement=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(this.setContainerAttr(i,consts.integrationDataSet.ENABLE,e.getName()),this.setContainerAttr(i,consts.integrationDataSet.METHOD,e.getMethod()),"a"!==e.getAnchorSelector()){var r=i.querySelector(e.getAnchorSelector());r&&r.setAttribute(consts.integrationDataSet.ANCHOR,"true"),e.getAnchorSelector()===consts.sizeSelector.CONTAINER&&i.setAttribute(consts.integrationDataSet.ANCHOR,"true")}if("img"!==e.getPreviewSelector()){var o=i.querySelector(e.getPreviewSelector());o&&o.setAttribute(consts.integrationDataSet.PREVIEW,"true"),e.getPreviewSelector()===consts.sizeSelector.CONTAINER&&i.setAttribute(consts.integrationDataSet.PREVIEW,"true")}if("undefined"!=typeof e.getSizeSelector()&&""!==e.getSizeSelector()){var a=i.querySelector(e.getSizeSelector());a&&a.setAttribute(consts.integrationDataSet.SIZE,"true"),e.getSizeSelector()===consts.sizeSelector.CONTAINER&&i.setAttribute(consts.integrationDataSet.SIZE,"true")}min.debug&&this.markAnchorWarned(e,i)}this.markObserverSelector(e),this.markMaskSelector(e)},e.prototype.markObserverSelector=function(e){if(e.getViewportObserverSelector())for(var t=document.querySelectorAll(e.getViewportObserverSelector()),n=0;n<t.length;n++){var i=t[n];i.setAttribute(consts.integrationDataSet.VIEWPORT_OBSERVER,"true")}},e.prototype.markMaskSelector=function(e){if(e.getViewportMaskSelector())for(var t=document.querySelectorAll(e.getViewportMaskSelector()),n=0;n<t.length;n++){var i=t[n];i.setAttribute(consts.integrationDataSet.VIEWPORT_MASK,"true")}},e.prototype.markPlaces=function(){for(var e,t=placementsManager.getAllPlacements(),n=0;n<t.length;n++){e=t[n];var i=this.getNewContainers(e);0!==i.length&&this.markPlacement(e,i)}},e.prototype.markAnchorWarned=function(e,t){this.warnedPlacements=this.warnedPlacements||{};for(var n=t.querySelectorAll(e.getAnchorSelector()),i=[],r=0;r<n.length;r++){var o=n[r].getAttribute("href");o&&i.push(o)}var a=function(e,t,n){return n.indexOf(e)==t},s=i.filter(a),l=s.length>1;if(l){var c=e.getName(),u=this.warnedPlacements[c];u||(this.warnedPlacements[c]=!0,utils.logError("Placement '"+e.getName()+"' has multiple anchors. "),t.style.border="2px solid red")}},com.services=com.services||{},com.services.Simulation=e}(),function(){function e(r,o,a){e.__superCtor__.call(this),!t&&(t=r),!n&&(n=o),!i&&(i=a)}var t,n,i;utils["extends"](e,EventDispatcher),e.prototype._getAnchorElement=function(e){var t=e.containerElement;if(t.dataset.minAnchor)return t;var n=e.containerElement.querySelector("["+consts.integrationDataSet.ANCHOR+"]");if(!n){var i=e.containerElement.querySelectorAll("a");n=i[0],i.length>1&&!this.anchorWarned&&(this.anchorWarned=!0),0!==i.length||this.anchorWarned||(this.anchorWarned=!0),n||"A"!==e.containerElement.tagName||(n=e.containerElement)}return n},e.prototype._getAricleData=function(e){for(var t,n,i,r=e.attributes,o=0;o<r.length;o++)if(i=r[o].name,n=e.getAttribute(i),t=articlesManager.getRegularArticleDataByURL(utils.urls.getCanonicalURL(n)))return{attributeName:i,targetUrl:n,articleData:t};return null},e.prototype.checkForArticleData=function(e){var t=this._getAnchorElement(e);if(!t)return null;var n=this._getAricleData(t);if(!n||utils.isObjEmpty(n))return null;var i=n.articleData;return i&&i.hasAPVByProduct(consts.Emitter.PRODUCT_APV)?{anchorElement:t,attributeName:n.attributeName,attrValue:utils.urls.getCanonicalURL(n.targetUrl),rawUrl:utils.urls.getRawByUrl(n.targetUrl),articleData:i}:null},e.prototype.createData=function(e){e.product=consts.Emitter.PRODUCT_APV,e.method=this.getMethodOfInsertion(e);var t=n.create(e);if(t){var i=[],r=[];if(com.publisher.utils&&com.publisher.utils.getAdditionalClickElements&&(r=com.publisher.utils.getAdditionalClickElements(e)),e.containerElement===e.anchorElement)i=[t.getContainerElement()];else{var o=t.getContainerElement(),a="["+e.attributeName+'*="'+e.attrValue+'"]',s="["+e.attributeName+'*="'+encodeURIComponent(e.attrValue)+'"]',l=o.querySelectorAll(a+","+s);i=Array.prototype.slice.call(l)}return i=i.concat(r),t.setClickElements(i),t}},e.prototype.getMethodOfInsertion=function(e){var t=null;return e.containerElement.dataset[consts.integrationDataSetElm.METHOD]&&"true"!=e.containerElement.dataset[consts.integrationDataSetElm.METHOD]&&(t=e.containerElement.dataset[consts.integrationDataSetElm.METHOD]),e.containerElement.removeAttribute(consts.integrationDataSet.METHOD),t},e.prototype.getElementSize=function(e){return e.containerElement.dataset.minSize?e.containerElement:e.containerElement.querySelector("["+consts.integrationDataSet.SIZE+"]");
},e.prototype.getElementToReplace=function(e){var t=e.containerElement;if(t.dataset.minPreview)return t;var n=t.querySelector("["+consts.integrationDataSet.PREVIEW+"]");if(!n){var i=t.querySelectorAll("img");if(i.length>=1){i.length>1&&!this.previewWarned&&(this.previewWarned=!0);for(var r=0;r<i.length;r++)if((!compatibility.isFF()||"none"!==i[r].display)&&"none"!==getComputedStyle(i[r]).display&&"none"!=i[r].offsetParent){n=i[r];break}}if(!n)return this.previewWarned=!0,null}return n},e.prototype.retrieveDomElements=function(e){var t={};if(t.elmToReplace=this.getElementToReplace(e),t.elementSize=this.getElementSize(e)||t.elmToReplace,!t.elmToReplace)return null;if(com.utils.ApvElementUtils.getIsElementReplaced(t.elmToReplace))return null;var n=utils.extractElementSize(t.elementSize),i=configuration.getMinimumHeight()>n.height,r=n.width<=configuration.getMinimumWidth();if(r||i)return null;var o=highlightsService.supportVertical(e.articleData.getHighlights());if(!o||!configuration.getRezVertical()){var a=t.elementSize.clientWidth,s=t.elementSize.clientHeight;if(a/s<configuration.getValidRatio())return null}return t.viewportMaskElement=this.getViewportMaskElement(e,t.elmToReplace),t.viewportObserver=this.getViewportObserver(e,t.elmToReplace),t.name=this._generateName(e),t},e.prototype.getApvDataByContainer=function(e){var t=this.checkForArticleData(e);if(t){utils.extendObject(e,t);var n=this.retrieveDomElements(e);if(n)return utils.extendObject(e,n),this.createData(e)}},e.prototype.getViewportMaskElement=function(e,t){var n=document.querySelectorAll("["+consts.integrationDataSet.VIEWPORT_MASK+"]");if(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.contains(t))return r}return window}return window},e.prototype.getViewportObserver=function(e,t){var n=[],i=document.querySelectorAll("["+consts.integrationDataSet.VIEWPORT_OBSERVER+"]");if(i)for(var r=0;r<i.length;r++){var o=i[r];o.contains(t)&&n.push(o)}return n},e.prototype.getNewApvData=function(){var e=[],t=this.getContainers();if(0!==t.length){for(var n=0;n<t.length;n++){var i=t[n];if(!i||!i.querySelector(".minute-container")){var r=this.getApvDataByContainer({containerElement:i});r&&e.push(r)}}return e}},e.prototype.getContainers=function(){var e=document.querySelectorAll("["+consts.integrationDataSet.ENABLE+"]");return 0===e.length?[]:e},e.prototype._generateName=function(e){var t="true",n=e.containerElement;return t="true"!==n.getAttribute(consts.integrationDataSet.ENABLE)&&""!==n.getAttribute(consts.integrationDataSet.ENABLE)?n.getAttribute(consts.integrationDataSet.ENABLE):n.offsetWidth+"X"+n.offsetHeight},com.services=com.services||{},com.services.VideoGenerator=com.services.VideoGenerator||{},com.services.VideoGenerator.Base=e}(),function(){function e(e){this.elm=e}function t(e){this._blockersContainers=[],this.painter=e}com.services=com.services||{},com.services.BlockingDistance=com.services.BlockingDistance||{},com.services.BlockingDistance.StaticBlockerService=t,e.prototype.getRact=function(){return this.elm.getBoundingClientRect()},e.prototype.getPosition=function(){var e=this.getRact();return{top:e.top+document.body.scrollTop+parseInt(e.height)/2,left:e.left+document.body.scrollLeft+parseInt(e.width)/2}},e.prototype.getRank=function(){return 999},e.prototype.getBlockingDistance=function(){return configuration.getBlockingDistanceRadius()},t.prototype.isStaticAlreadyMarked=function(e){for(var t=0;t<this._blockersContainers.length;t++){var n=this._blockersContainers[t];if(n.elm&&n.elm==e)return!0}return!1},t.prototype.getBlockers=function(){for(var t=configuration.getStaticBlockerSelector(),n=document.querySelectorAll(t),i=0;i<n.length;i++){var r=n[i];if(!this.isStaticAlreadyMarked(r)){var o=new e(r);o&&(this.painter.draw.drawStatic(o),this._blockersContainers.push(o))}}return this._blockersContainers}}(),function(){function e(e){function n(){var n=localStorage&&localStorage.getItem("_minDisableBlockingD"),i=t.indexOf(e.getPlaymode(consts.Emitter.PRODUCT_APV))>-1;if(!n&&i&&e.isBlockingServiceActive()){var r=new com.services.BlockingDistance.DocumentRadiusPainterFactory(e).create();return new com.services.BlockingDistance.BlockingDistanceService(e,r)}return new com.services.BlockingDistance.NotActivatedBlockingDistance}return{create:n}}com.services=com.services||{},com.services.BlockingDistance=com.services.BlockingDistance||{},com.services.BlockingDistance.Factory=e;var t=[consts.playmode.VIEWPORT]}(),function(){function e(e,t){o=t,l=new com.services.BlockingDistance.StaticBlockerService(t)}function t(e,t){return t.getRank()-e.getRank()}function n(e,t){var n=Math.pow(e.top-t.top,2),i=Math.pow(e.left-t.left,2);return Math.sqrt(i+n)}function i(e,t){for(var i,r=configuration.noDuplicateVideos(),o=0;o<t.length;o++){var s=t[o];if(e.getUniqId()!==s.getUniqId()&&s.getState()!==consts.APVStates.Blocked&&s.getState()!==consts.APVStates.Disabled&&s.getState()!==consts.APVStates.New){if(i=n(e.getPosition(),s.getPosition()),r&&e.getMinuteVideoId()==s.getMinuteVideoId())return!0;if(i<s.getBlockingDistance()){var l=e.getElementToReplace();return a.indexOf(l)===-1&&a.push(l),!0}}}return!1}function r(e){for(var t,i,r=0;i=s[r];r++)if(t=n(e.getPosition(),i.getPosition()),t<i.getBlockingDistance()){utils.log("BlockingD: "+e.getArticleData().getArticleUrl()+" by a static container ");var o=e.getElementToReplace();a.indexOf(o)===-1&&a.push(o);var l={url:utils.urls.getLocationUrl(),user_agent:navigator.userAgent,source:compatibility.getAnalyticsSource(),publisher:configuration.getPublisherIdNumber(),category:"BlockingD",action:"blockedByStatic",label:utils.urls.getLocationUrl(),value:e.getHighlightId()};return emitterService.send(consts.Emitter.CUSTOM_EVENTS,l),!0}return!1}com.services=com.services||{},com.services.BlockingDistance=com.services.BlockingDistance||{},com.services.BlockingDistance.BlockingDistanceService=e;var o=null,a=[],s=[],l=null;e.prototype.calculate=function(e){s=l.getBlockers();for(var n=apvDataManager.getAllActiveApv(),a=e.sort(t),c=n.concat(e).sort(t),u=0;u<a.length;u++){var p=a[u],d=consts.APVStates.Active;(r(p)||i(p,c))&&(d=consts.APVStates.Blocked),p.setState(d)}o.draw.draw(n.concat(e))}}(),function(){function e(){this.state=t.SCROLLED}var t={INIT:0,NOT_SCROLLED:1,SCROLLED:2},n=function(n){this.viewportMaskElement=n,this.mutationObserver=new MutationObserver(e.bind(this)),this.mutationObserver.observe(this.viewportMaskElement,{attributes:!0}),this.state=t.INIT};n.prototype.isCarouselBlocking=function(){return this.state===t.SCROLLED},n.prototype.getViewportMaskElement=function(){return this.viewportMaskElement},com.apv=com.apv||{},com.apv.CarouselContainer=n}(),function(){function e(e){return{create:function(){var e=localStorage&&localStorage.getItem&&"true"==localStorage.getItem("_minShowBD");return{draw:e?i():{draw:function(){},drawStatic:function(){}}}}}}function t(e){e.dataset.old_opacity=e.style.opacity}function n(e){if(e.getProduct()!==consts.Emitter.PRODUCT_IN_ARTICLE){var t=e.getElementToReplace();t.style.opacity=t.dataset.old_opacity}}function i(){function e(e){if(e.getProduct()!==consts.Emitter.PRODUCT_IN_ARTICLE){var n=e.getElementToReplace();switch(t(n),e.getState()){case consts.APVStates.Active:n.style.opacity=1;break;case consts.APVStates.Blocked:case consts.APVStates.Disabled:case consts.APVStates.Disposed:n.style.opacity=.2,e.getDebug().style.opacity=0}}}function i(e){var t=e.getPosition(),n=t.left+window.scrollX,i=t.top+window.scrollY,r=2*e.getBlockingDistance(),o="rgba(255, 0, 0, 0.1)",a=l(i,n,r,o,e);e.getDebug().appendChild(a)}function r(e){var t=document.createElement("div");document.body.insertAdjacentElement("afterbegin",t),e.setDebug(t)}function o(){for(var t in c){var o=c[t];o.hasDisposed()||o.getProduct()===consts.Emitter.PRODUCT_IN_ARTICLE||o.getPlaymode()!==consts.playmode.VIEWPORT||(n(o),r(o),i(o),e(o))}}function a(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.getUniqId();c[i]||(c[i]=n)}}function s(e){var t=document.createElement("div");document.body.insertBefore(t,document.body.childNodes[0]);var n=e.getPosition(),i=n.left+window.scrollX,r=n.top+window.scrollY,o=2*e.getBlockingDistance(),a="rgba(0, 0, 255, 0.1)",s=l(r,i,o,a,e);t.appendChild(s)}function l(e,t,n,i,r){var o=document.createElement("div");return o.className="minPoint",o.style.position="absolute",o.style.width=n+"px",o.style.height=n+"px",o.style.top=e+"px",o.style.left=t+"px",o.style.zIndex=1e7,o.style.backgroundColor=i,o.style.transform="translate(-50%,-50%)",o.style.border="dotted green",o.style.borderRadius="50%",o.style.display="flex",o.style.alignItems="center",o.style.alignContent="center",o.style.justifyContent="center",o.style.textShadow="0 0 10px white",o.style.fontSize="20px",o.style.pointerEvents="none",o.style.textAlign="center",o.innerHTML="radius: "+n+"<br/>rank: "+r.getRank(),o}var c={};return setInterval(o,2e3),{draw:a,drawStatic:s}}com.services=com.services||{},com.services.BlockingDistance=com.services.BlockingDistance||{},com.services.BlockingDistance.DocumentRadiusPainterFactory=e}(),function(){function e(){}com.services=com.services||{},com.services.BlockingDistance=com.services.BlockingDistance||{},com.services.BlockingDistance.NotActivatedBlockingDistance=e,e.prototype.calculate=function(e){e.forEach(function(e){e.setState(consts.APVStates.Active)})}}(),function(){function e(e,a,s,l,c){t=e,n=a,i=s,r=l,o=c,this.lastKnownUrl=location.href}var t=null,n=null,i=null,r=null,o=null;com.services=com.services||{},com.services.inArticlePlacers=com.services.inArticlePlacers||{},com.services.inArticlePlacers.Base=e,com.services.inArticlePlacers.Placer=e,e.prototype.init=function(){this.startAPVFactory(),globalEvent.addEventListener(consts.Events.PLAYER_FOUND,this.newPlayerFoundHandler.bind(this)),globalEvent.addEventListener(consts.Events.VIDEOS_UPDATE,this.startAPVFactory.bind(this)),globalEvent.addEventListener(consts.Events.URL_MANIPULATION_INTERVAL_SERVICE,this.urlManipulationHandler.bind(this))},e.prototype.createInArticleApvWrapper=function(e){if(e){var t=o.add(e);t&&(utils.log("APV IN ARTICLE Wrapper will now be created. VideoId: "+e.getArticleData().getArticleId()+', selector: "'+e.getName()+'"'),new com.apv.APVWrapper(e))}},e.prototype.getName=function(){return"InArticle"},e.prototype.urlManipulationHandler=function(){this.startAPVFactory()},e.prototype.startAPVFactory=function(){if(utils.isPlacementEnabled(consts.Emitter.PRODUCT_IN_ARTICLE)){var e=this.getPlayersOnPage()||[];e instanceof NodeList&&(e=Array.prototype.slice.call(e));var t=Object.keys(e||{});if(0===t.length)return void this.listenToNewPlayerEvent();for(var n=0;n<t.length;n++)this.createInArticleByPlayer(e[t[n]])}},e.prototype.createInArticleByPlayer=function(e){var t=this.collectApvWrapperData(e);this.createInArticleApvWrapper(t)},e.prototype.newPlayerFoundHandler=function(e){},e.prototype.createDataObject=function(e){var t={};t.player=e;var n=this.getArticleData(e);if(n&&n.hasAPVByProduct(consts.Emitter.PRODUCT_IN_ARTICLE))return t.articleData=n,t},e.prototype.collectApvWrapperData=function(e){if(this.shouldPlayAPV(e)){var t=this.createDataObject(e);if(t)return this.createApvData(t)}},e.prototype.createApvData=function(e){var n=this.getContainerElement(e);n||t.logWarning("No container found on in article so... ;|  ");var i=new ApvData({articleData:e.articleData,elementSize:n,containerElement:n,product:consts.Emitter.PRODUCT_IN_ARTICLE,viewportMaskElement:this.getInarticleViewportMask(e),viewportObserver:this.getViewportElementsToObserve(e)});i.setName(this.getName());var r=this.getManualClick(e.player);return r&&i.setManualClick(r),i.setPlayerInstance(e.player),i},e.prototype.listenToNewPlayerEvent=function(){},e.prototype.getPlayersOnPage=function(){utils.logError("Have to implement method that returns all players' instances")},e.prototype.getArticleData=function(){utils.logError("getArticleData is not implemented")},e.prototype.shouldPlayAPV=function(e){return!0},e.prototype.getManualClick=function(){return null},e.prototype.getContainerElement=function(e){utils.logError("Have to implement method getContainerElement")},e.prototype.getInarticleViewportMask=function(){return configuration.getInArticleViewportMask()},e.prototype.getViewportElementsToObserve=function(){return[]}}(),function(){function e(i,r,o,a,s){t=i,n=a,e.__superCtor__.call(this,i,r,o,a,s)}var t=null,n=null,i=com.publisher.utils;utils["extends"](e,com.services.inArticlePlacers.Base),com.services.inArticlePlacers.Placer=e,e.prototype.createApvData=function(e){var n=this.getContainerElement(e);n||t.logWarning("No container found on in article so... ;|  ");var i=n.querySelector("img"),r=Math.floor(parseFloat(i.getAttribute("height"))/parseFloat(i.getAttribute("width"))*100),o=Math.floor(i.height/i.width*100),a=n;if(o<r){var s=Math.ceil(.56181*n.offsetWidth);a.style.height=s+"px"}var l=new ApvData({articleData:e.articleData,elementSize:a,containerElement:n,product:consts.Emitter.PRODUCT_IN_ARTICLE,viewportMaskElement:this.getInarticleViewportMask(e),viewportObserver:this.getViewportElementsToObserve(e)});l.setName(this.getName());var c=this.getManualClick(e.player);return c&&l.setManualClick(c),l.setPlayerInstance(e.player),l},e.prototype.init=function(){e.__super__.init.call(this),globalEvent.addEventListener(consts.Events.IN_ARTICLE_PLACER_DISPOSED,this.onInArticlePlacerDisposed.bind(this)),this._debounceStartAPVFactory=new com.utils.Debounce(250,this.startAPVFactory,this)},e.prototype.onInArticlePlacerDisposed=function(){this._debounceStartAPVFactory.start()},e.prototype.getName=function(){return"FoxSports InArticle"},e.prototype.getType=function(){return com.scrap.PlayerEnum.ThePlatformFoxSports},e.prototype.listenToPlayerData=function(e){var t=this,n=new MutationObserver(function(){i._getVideoId(e)&&(t.startAPVFactory.call(t),n.disconnect())});n.observe(e,{childList:!0,subtree:!0})},e.prototype.getPlayersOnPage=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.contains(e))return!0}return!1}if(i.isAMP()){var t=document.querySelectorAll("#player");return t}for(var n=[],r=document.querySelectorAll(".gallery-image-wrap"),o=0;o<r.length;o++){var a=r[o].querySelector(".image-placeholder"),s=a&&a.offsetParent;s&&n.push(r[o])}if("story"==i.getPageType()||"video"==i.getPageType()||"stories:articles"==i.getPageType())for(var l=document.querySelectorAll(".fs-player,.video-player-container"),c=0;c<l.length;c++){var u=l[c];e(u,r)||(i._getVideoId(u)?0!==u.getBoundingClientRect().height&&n.push(u):this.listenToPlayerData(u))}return n},e.prototype.getArticleData=function(e){var t=i._getVideoId(e),n=utils.urls.getLocationUrl();return e&&e.dataset&&e.dataset.playerConfig&&(n=JSON.parse(e.dataset.playerConfig).url),i.isAMP()&&(n=i.getVideoUrlFromAmpFrame()),articlesManager.getInArticleArticleData(t,utils.urls.getCanonicalURL(n))},e.prototype.getContainerElement=function(e){return e.player}}(),function(){function e(e){this.apvData=e,this._initElements(),this.apvData=null}com.apv=com.apv||{},com.apv.APVWrapper=e;var t=com.publisher.utils;e.prototype._createDomAdapter=function(){switch(this.apvData.getProduct()){case consts.Emitter.PRODUCT_APV:return com.apv.domAdapter.pubDomAdapter?new com.apv.domAdapter.pubDomAdapter:new com.apv.domAdapter.Base;case consts.Emitter.PRODUCT_IN_ARTICLE:if(t.getDomAdapter)return new(com.apv.inArticleDomAdapter[t.getDomAdapter()]);var e=Object.keys(com.apv.inArticleDomAdapter);return 1==e.length?new com.apv.inArticleDomAdapter[e[0]]:new com.apv.inArticleDomAdapter}},e.prototype._createPlaymode=function(){var e=com.apv.playmodes;switch(this.apvData.getPlaymode()){case consts.playmode.VIEWPORT:case consts.playmode.BLOCKINGHOVER:return new e.Viewport;case consts.playmode.HOVER:return new e.Hover}},e.prototype._initElements=function(){var e=new com.apv.players.ApvPlayerBase;e.init(this.apvData),this.apvData.setApvPlayer(e);var t=new com.apv.logos.LogoElmBase;t.init(this.apvData.getProduct()),this.apvData.setMinuteLogo(t);var n=this._createDomAdapter();if(!n)return utils.log("No DomAdapter found."),null;this.apvData.setDomAdapter(n),visibilityAnalyticsService.register(this.apvData);var i=this._createPlaymode(this.apvData);return i?(i.setDomAdapter(this.apvData),i.start(),void n.init(this.apvData)):(utils.log("No playmode found - probably unsupported browser."),null)}}(),function(){function e(e){for(var t=utils.cloneArray(e.getContainerElement().querySelectorAll("img,div[style*='background-image']")||[]),n=0;n<t.length;n++){var i=t[n];com.utils.ApvElementUtils.setElementAsReplaced(i)}com.utils.ApvElementUtils.setElementAsReplaced(e.getElementToReplace())}function t(e,t,o){n=e,i=t;var a=com.services.VideoGenerator.Base;r=new a(e,t,o),this.blockingDistanceService=blockingDistanceFactory.create(n),this._apvWrapperNotCreatedHash={},this._apvsOnPage=0,this.findReplaceableElementsAndPlaceVideos(),globalEvent.addEventListener(consts.Events.ONE_SECONDS_INTERVAL,this.findReplaceableElementsAndPlaceVideos,this)}com.services=com.services||{};var n=null,i=null,r=null;com.services.PlacementService=t,t.prototype.findReplaceableElementsAndPlaceVideos=function(){var e=r.getNewApvData();if(e&&(!e||0!=e.length)){var t=this;this.blockingDistanceService.calculate(e),e.forEach(function(e){if(!t._apvWrapperNotCreatedHash[e.getKey()]){switch(e.getState()){case consts.APVStates.Disposed:return;case consts.APVStates.Blocked:return void(configuration.getPlaymode()==consts.playmode.BLOCKINGHOVER&&(e.setState(consts.APVStates.Active),e.setPlaymode(consts.playmode.HOVER)))}t.createApvWrapper(e)}}),this.reportCounters()}},t.prototype.createApvWrapper=function(t){return this._apvsOnPage++>=n.getMaxApvsPerPage()?(this._apvWrapperNotCreatedHash[t.getKey()]=!0,void utils.log("Blocked APV creation. number of APVs on page exceeds limit. Max="+n.getMaxApvsPerPage())):(new com.apv.APVWrapper(t),e(t),utils.log("APV Wrapper Created. VideoId: "+t.getArticleData().getArticleId()),void this.reportCounters())},t.prototype.reportCounters=function(){var e=min._report||{APVs:-1,Watchers:-1};if(min._report={APVs:document.querySelectorAll("[data-apv_replaced]").length,NotCreated:Object.keys(this._apvWrapperNotCreatedHash).length,Watchers:document.querySelectorAll("[data-apv_watched]").length},(e.Watchers!==min._report.Watchers||e.NotCreated!==min._report.NotCreated||e.APVs!==min._report.APVs)&&document.body&&document.body.appendChild){var t="# of ApvData: "+i.getAmountOfApvDataOnPage();t+=min._report.NotCreated?" # of Apv not created due to max on page: "+min._report.NotCreated:" ",t+=min._report.Watchers?" # of Apvs that are watched: "+min._report.Watchers:" ",utils.log(t),this._htmlReport||(this._htmlReport=document.createElement("div"),this._htmlReport.setAttribute("id","minReport"),this._htmlReport.style.display="none",document.body.appendChild(this._htmlReport)),this._htmlReport.setAttribute("data-apvs",min._report.APVs),this._htmlReport.setAttribute("data-apvs-not-created",min._report.NotCreated),this._htmlReport.setAttribute("data-watchers",min._report.Watchers),this._htmlReport.setAttribute("data-test",testGroupService.isTestGroup())}}}(),utils.debugParamsOverrides();var cookiesService=new CookiesService(_cookieDomain),storageService=new StorageService(cookiesService),storageManager=StorageBufferManager.getInstance(storageService);if(storageManager){storageManager.setConfig(consts.cookiesKeysTable);var intevalService=new IntervalService;intevalService.init();var localStorageManager=new LocalStorageManager(localStorage),compatibilityFactory=new CompatibilityFactory,compatibility=compatibilityFactory.create(min.compatibility),sessionService=new SessionService(utils,storageManager),emitterService=new EmitterService(utils,storageManager,consts.Urls),sessionAnalyticsUsherFactory=new SessionAnalyticsUsherFactory(utils,storageManager,sessionService),testGroupService=new DailyTestGroupService(utils,window,cookiesService,globalEvent,min.debugParams[EnumDebugTools.FORCE_TEST],storageManager),configuration=new Configuration(min,utils,testGroupService),articleDataFactory=new ArticleDataFactory(utils,configuration),highlightsService=new HighlightsService(utils,localStorageManager,compatibility,configuration),articlesManager=new ArticlesManager(utils,configuration,compatibility,articleDataFactory,highlightsService),messageCompressionService=new MessageCompressionService,clickLogManager=new ClickLogManager(utils,storageManager,emitterService,messageCompressionService),placementDataFactory=new PlacementDataFactory,placementsManager=new PlacementsManager(utils,placementDataFactory,compatibility),analyticsService=new AnalyticsService(utils,testGroupService,compatibility,configuration,emitterService,sessionAnalyticsUsherFactory),serverDataLoader=new ServerDataLoader(compatibility,configuration),apvDataManager=new com.ApvDataManager,visibilityAnalyticsService=new com.analytics.ViewportAnalyticsService,simulator=new com.services.Simulation(configuration),blockingDistanceFactory=new com.services.BlockingDistance.Factory(configuration),placementService=null,dailyUserAnalyticsService=new DailyUserAnalyticsService(utils,testGroupService,compatibility,storageManager,cookiesService,timingPage,sessionService,configuration),minuteDispatchEventService=new MinuteDispatchEventService(utils,compatibility,configuration),clickByPointService=new ClickByPointService(configuration,utils,apvDataManager);sessionService.init();var MinuteMain=function(){function e(){utils.globalTasks.listenToWindowErrors(),utils.log(min.debugParams),t(),i()}function t(){if(min.debug===!0)n(),utils.consoleNative.log("Welcome to Minute "+min.ver+" "+min.debugParams[EnumDebugData.SCRIPT_HOSTNAME]);else{var e=min.config.config.general&&min.config.config.general.welcomeToMinuteSize;switch(e){case consts.WELCOME_TO_MINUTE_SIZE.OFF:break;case consts.WELCOME_TO_MINUTE_SIZE.SMALL:utils.consoleNative.log("Welcome to Minute "+min.ver+" ");break;default:n(),utils.consoleNative.log("Welcome to Minute "+min.ver+" "+min.debugParams[EnumDebugData.SCRIPT_HOSTNAME])}}}function n(){var e="font-size: 60px; color:#28c0d5; margin-left: 20px;text-shadow: 2px 2px #fbb907;";utils.consoleNative.log("%cMinute.ly",e);var t="Dynamic viewing experience created by Minute.ly. \nWe unlock your video's full potential.\nLearn more at http://minute.ly?utm_source=insp_elem \n\n\n";utils.consoleNative.log(t)}function i(){g=min.config,_min.config=null,compatibility.init(g.config),sessionAnalyticsUsherFactory.init(),configuration.init(g,compatibility,__env,min.debugParams[EnumDebugTools.ENABLE_BLOCKING_DISTANCE]),clickByPointService.init(),highlightsService.init(),visibilityAnalyticsService.init(),windowEventsService.init(),testGroupService.init(configuration.getTestGroupSize(),!1),com.utils.logger.setTestGroup(testGroupService.isTestGroup()),r(),o(),emitterService.flushAll()}function r(){return analyticsService.init(visibilityAnalyticsService),clientInitAnalytics.sendUrlReport(),compatibility.isBrowserSupported()?compatibility.isLPM()?void utils.log("Minute will shut down now due to LPM "+min.ver+" "+min.debugParams[EnumDebugData.SCRIPT_HOSTNAME]):compatibility.isDataSaverOn()?void utils.log("Minute will shut down now due to Data saver  "+min.ver+" "+min.debugParams[EnumDebugData.SCRIPT_HOSTNAME]):storageService.getLocalStorageInstance()?(dailyUserAnalyticsService.start(),articlesManager.init(g),p(),clickLogManager.init(),clicksAnalyticsService.sendDelayedClicks(),void placementsManager.init(configuration)):void utils.log("Local Storage and Session Storage are not supported. Disable Minute."):void utils.log("Minute is not supported "+min.ver+" "+min.debugParams[EnumDebugData.SCRIPT_HOSTNAME])}function o(){d=performance.now(),configuration.shouldWaitForLoadEvent()?(window.addEventListener("load",function(){setTimeout(function(){a()},0)}),window.performance&&window.performance.timing&&window.performance.timing.loadEventEnd>0&&a()):a()}function a(){if(!m){v=performance.now();var e=v-d;if(m=!0,c(),u(),s(),globalEvent.dispatchEvent(consts.Events.SYSTEM_RUNNING),configuration.shouldWaitForLoadEvent()&&e>.2){utils.log("core delayed: "+e);var t={url:encodeURIComponent(utils.urls.getLocationUrl()),user_agent:navigator.userAgent,source:compatibility.getAnalyticsSource(),publisher:configuration.getPublisherIdNumber(),category:"CoreDelayed",action:"Delayed",label:"seconds",value:Math.round(e)};emitterService.send(consts.Emitter.CUSTOM_EVENTS,t)}}}function s(){h||(h=new com.scrap.ScraperService,utils.log("Detector created"))}function l(){return!!utils.isPlacementEnabled(consts.Emitter.PRODUCT_IN_ARTICLE)&&!!configuration.isInArticlePlacerActive()}function c(){if(!l())return globalEvent.addEventListenerOnce(consts.Events.URL_MANIPULATION_INTERVAL_SERVICE,c),void utils.log("** InArticle is turned off in configuration or didnt pass filter");var e=new com.services.inArticlePlacers.Placer(utils,configuration,placementDataFactory,compatibility,apvDataManager);e.init()}function u(){return utils.isPlacementEnabled(consts.Emitter.PRODUCT_APV)?(simulator.init(),placementService=new com.services.PlacementService(configuration,apvDataManager,utils),!0):(utils.log("** Placement Disabled by configuration. See filter configuration. **"),!1)}function p(){if(!utils.urls.isUrlHomePage()&&l()){var e=utils.urls.getLocationUrl();return utils.isUrlFilterValid(e,configuration.getFilterScraper())?void(articlesManager.hasInArticleArticleDataForUrl(e)||""==e||serverDataLoader.loadNextArticle({onSuccess:articlesManager.appendVideos,videosFallback:!1})):void utils.log("** Missing Article Data blocked by scraper filter URL. **")}}var d,h=null,g=null,m=!1,v=0;e()},main=new MinuteMain;return min}}(window._minDebug||_min||{});