(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{1109:function(e,t,o){"use strict";o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return f}));var n=o(4),c=o(5),r=o(47);var d=o(290);function l(){const e=Object(c.getConfig)();Object(r.b)(e.cookies.loginCookieName,{path:"/",domain:e.domain}),Object(r.b)(e.cookies.fantasyCookieName,{path:"/",domain:e.domain}),Object(r.b)(e.cookies.loginCookieName,{path:"/",domain:".foxsports.com"}),Object(r.b)(e.cookies.fantasyCookieName,{path:"/",domain:".foxsports.com"}),e.cookies.xdCookie&&Object(r.b)(e.cookies.xdCookieName,{path:e.cookies.xdPath,domain:e.cookies.xdDomain})}function f(data,e){const t=Object(c.getConfig)();if(t.useAuthCookies&&null!==data&&data.Authenticated){l();const o=data.Cookies;let c;if(null!=o)for(const e of o){const o=e.Name,d=e.Value,l=e.Expires,f=new Date(l);c=f;const v=o===t.cookies.fantasyCookieName?e.Domain:t.domain,O={expires:f,path:e.Path,domain:v};Object(r.c)(o,d,O),Object(n.debugConsole)("JWT verified on registration server, cookie written successfully"),Object(n.debugConsole)("WISUpdateCookies(): Cookie created")}t.cookies.xdCookie&&Object(d.c)(e.profileId,e.accessToken,c)}}},1183:function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n,c=o(5),r=o(4);!function(e){e[e.UserNotFound=404]="UserNotFound",e[e.UnexpectedError=403]="UnexpectedError",e[e.InvalidJWT=400]="InvalidJWT"}(n||(n={}));class d{constructor(e,t){switch(this.responseJSON=t,e){case 404:this.code=n.UserNotFound,this.message="User not found.";break;case 403:this.code=n.UnexpectedError,this.message="Authentication Error.";break;case 400:this.code=n.InvalidJWT,this.message="Authentication Error.";break;default:this.code=n.UnexpectedError,this.message=`Unexpected error ${e}`}}}function l(data){const e=Object(c.getConfig)().accounts.registrationServerApi+"login";Object(r.debugConsole)("CIN LOGIN CALL: "+e);const t=new Headers;return t.set("Content-Type","application/json"),fetch(e,{body:JSON.stringify(data),headers:t,method:"POST"}).then((e=>{if(e.ok)return e.json();throw e})).catch((e=>{throw new d(e.status,e.responseJSON)}))}},1381:function(e,t,o){"use strict";o.r(t),o.d(t,"logoutUser",(function(){return w})),o.d(t,"logoutUserIfNeeded",(function(){return C}));var n=o(146),c=o(1109),r=o(4),d=o(151),l=o(704),f=o(5),v=o(7),O=o(112),h=o(296),j=o(111),m=function(e,t,o,n){return new(o||(o=Promise))((function(c,r){function d(e){try{f(n.next(e))}catch(e){r(e)}}function l(e){try{f(n.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(d,l)}f((n=n.apply(e,t||[])).next())}))};function w(e,t){return m(this,void 0,void 0,(function*(){Object(v.isUserLoggedInFSCOM)()&&(k(),yield Promise.all([Object(n.eventSignOut)(),e?Promise.resolve():S()]),t&&window.location.reload(!0))}))}function C(){return m(this,void 0,void 0,(function*(){const e=Object(f.getConfig)();if(Object(v.isLoginTokenExpired)())return Object(r.debugConsole)("logoutUserIfNeeded(): jwt expired"),void w(!0,!0);e.useAuthCookies&&(Object(h.b)()?Object(v.getUserId)()||(k(),window.location.reload(!0)):Object(v.isUserLoggedInFSCOM)()&&(yield S(),k(),window.location.reload(!0)))}))}function y(){const e=Object(v.getFoxAccessToken)();return e?Object(d.logout)(e):Promise.resolve()}function S(){return m(this,void 0,void 0,(function*(){try{const e=yield Promise.all([y(),Object(l.favoritesCleanup)()]);Object(r.debugConsole)("DCG API logout: ",e)}catch(e){Object(r.debugConsole)("DCG API logout ERROR: ",e)}}))}function k(){Object(f.getConfig)().useAuthCookies&&Object(h.b)()&&(Object(r.debugConsole)("logoutCleanup(): removing cookies"),Object(c.a)()),Object(r.debugConsole)("logoutCleanup(): removing LS and Entitlements"),Object(j.b)(),Object(O.b)(),Object(v.populateState)()}},541:function(e,t,o){"use strict";o.r(t);var n=o(4),c=o(7),r=o(5),d=o(1183),l=o(842),f=o(290),v=o(111),O=o(1109),h=o(347),j=o(698),m=o(112),w=function(e,t,o,n){return new(o||(o=Promise))((function(c,r){function d(e){try{f(n.next(e))}catch(e){r(e)}}function l(e){try{f(n.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(d,l)}f((n=n.apply(e,t||[])).next())}))};function C(){if(!0===Object(f.b)()){const e=Object(r.getConfig)();Object(c.isUserLoggedInFSCOM)()?!0===e.cookies.xdCookieSync&&(Object(n.debugConsole)("accessToken"),Object(n.debugConsole)(Object(c.getSSOAccessToken)()),Object(n.debugConsole)(Object(c.getFoxAccessToken)()),Object(n.debugConsole)("profileId"),Object(n.debugConsole)(Object(c.getSSOProfileId)()),Object(n.debugConsole)(Object(c.getUserId)()),Object(n.debugConsole)("expiration"),Object(n.debugConsole)(Object(c.getSSOAccessTokenExpiration)()),Object(n.debugConsole)(Object(c.getAccessTokenExpiration)()),Object(c.getSSOAccessToken)()!==Object(c.getFoxAccessToken)()||(Object(c.getSSOProfileId)(),Object(c.getUserId)())):(Object(n.debugConsole)("SSO cookie found, logging into FSCOM"),function(){w(this,void 0,void 0,(function*(){Object(n.debugConsole)(`$getSSOAccessToken(): ${Object(c.getSSOAccessToken)()} -> parseJwt(getSSOAccessToken()):`,Object(h.a)(Object(c.getSSOAccessToken)()));const e=Object(c.getSSOAccessToken)();if(!e)throw new Error("XD Login Failed: Access token is undefined");if(!Object(c.getSSOProfileId)())throw new Error("XD Login Failed: Profile id is undefined");const t=Object(h.a)(e);if(!t||!t.exp)throw new Error("XD Login Failed: bad JWT");const o={accessToken:Object(c.getSSOAccessToken)(),expiration:t.exp,profileId:Object(c.getSSOProfileId)(),tokenExpiration:t.exp};try{!function(e,t){const o=Object(r.getConfig)();if(!0!==t.Authenticated)throw Object(n.debugConsole)("Cookie not created! Server authentication failed"),new Error("Unknown Error");if(o.useAuthCookies&&Object(O.b)(t,e),Object(v.e)(e),Object(j.removeStoredFavorites)(),Object(m.b)(),Object(c.isUserLoggedInMVPD)()){Object(v.a)()&&Object(v.d)(!0)}Object(c.populateState)()}(o,yield Object(d.a)(o)),Object(l.redirectFU)(window.location.href)}catch(e){const t=e?JSON.stringify(e):"unknown error";Object(n.debugConsole)("XDLogin failed: "+t)}}))}())}else if(Object(c.isUserLoggedInFSCOM)()){const e=Object(c.getUserId)(),t=Object(c.getFoxAccessToken)(),o=Object(c.getAccessTokenExpiration)();if(!e||!t||!o)return;const dt=new Date(1e3*parseInt(o.toString(),10));Object(f.c)(e,t,dt.toString()),Object(n.debugConsole)("Logged into FSCOM, with no SSO cookie, created SSO cookie")}}var y=o(1381),S=o(203),k=o(96),F=function(e,t,o,n){return new(o||(o=Promise))((function(c,r){function d(e){try{f(n.next(e))}catch(e){r(e)}}function l(e){try{f(n.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(d,l)}f((n=n.apply(e,t||[])).next())}))};const T=()=>F(void 0,void 0,void 0,(function*(){Object(c.isUserLoggedInMVPD)()&&!Object(c.isUserPVPAuthd)()?Object(k.checkMVPDExpiration)():Object(k.checkMVPDandLogin)(),Object(y.logoutUserIfNeeded)(),Object(n.debugConsole)("check anon user..."),yield Object(S.a)(),Object(n.debugConsole)("anon user handled"),C(),Object(n.debugConsole)("WIS registration ready"),Object(S.b)()}));"undefined"!=typeof document&&("complete"===document.readyState?T():window.addEventListener("load",T))},649:function(e,t,o){"use strict";function n(html){const template=document.createElement("template");return html=html.trim(),template.innerHTML=html,template.content.firstChild}var c;o.r(t),o.d(t,"messageTypeEnum",(function(){return c})),o.d(t,"addToast",(function(){return l})),o.d(t,"removeAllToasts",(function(){return f})),function(e){e[e.default=0]="default",e[e.changePassword=1]="changePassword",e[e.forgotPassword=2]="forgotPassword",e[e.mvpdLogout=3]="mvpdLogout",e[e.removeFavorite=4]="removeFavorite"}(c||(c={}));let r=1;const d=e=>`<div class="link-button">\n      <span class="link-text fs-14 cl-blish uc nowrap">${e}</span>\n  </div>`;function l(e){f();const t=`toastEl${r}`;r++;const o=e.titleMessage&&e.cancelButton?n((({message:e,action:t,actionText:o,titleMessage:n,cancelButton:c,noFade:r,containerClass:l},f)=>`<div class="toast-container double ${l||""}${r?" noFade":""}" id="${f}">\n  <div class="toast-content">\n    <div alt="close" class="close-icon"></div>\n    <div class="double-toast-msg">\n      <span class="toast-title-msg uc ff-sb fs-20">${n}</span>\n      <span class="toast-msg ff-h lh-1-pt-43 fs-14">${e}</span>\n    </div>\n    <div class="double-button">\n      ${t&&o?d(o):""}\n      <div class="link-button cancel">\n        <span class="link-text fs-14 cl-blish uc nowrap">${c}</span>\n      </div>\n    </div>\n  </div>\n</div>`)(e,t)):n((({message:e,titleMessage:t,action:o,actionText:n,noFade:r,messageType:l,containerClass:f},v)=>`<div class="toast-container ${f||""}${r?" noFade":""}${l&&l===c.changePassword?" change-pass":""}" id="${v}">\n  <div class="toast-content">\n    <div alt="close" class="close-icon"></div>\n    <div class="toast-msg-container">\n      ${t?`<div class="toast-title-msg uc ff-sb fs-20">${t}</div>`:""}\n      <div class="toast-msg ff-h lh-1-pt-43 fs-14">${e}</div>\n    </div>\n    ${o&&n?d(n):""}\n  </div>\n</div>`)(e,t));if(o){if(e.action){const t=o.querySelector(".link-button");t&&(t.onclick=e.action)}document.body.append(o),function(e){const t=document.getElementById(e),o=null==t?void 0:t.querySelector(".close-icon"),n=[].slice.call(null==t?void 0:t.getElementsByClassName("link-button"));o&&o.addEventListener("click",(()=>{f()}));(null==n?void 0:n.length)&&n.forEach((element=>{element.addEventListener("click",(()=>{f()}))}))}(t)}}function f(){const e=document.getElementsByClassName("toast-container");[].slice.call(e).forEach((element=>{element.remove()}))}},698:function(e,t,o){"use strict";o.r(t),o.d(t,"getStoredFavorites",(function(){return f})),o.d(t,"setStoredFavorites",(function(){return v})),o.d(t,"removeStoredFavorites",(function(){return O})),o.d(t,"getStoredAnonFavorites",(function(){return h})),o.d(t,"setStoredAnonFavorites",(function(){return j})),o.d(t,"removeStoredAnonFavorites",(function(){return m})),o.d(t,"getFavoriteLists",(function(){return C}));var n=o(5),c=o(54);const r=Object(n.getConfig)(),d=new c.LocalStorageWrapper(r.favoritesCacheKey,3,r.favoritesCacheDuration),l=new c.LocalStorageWrapper(r.favoritesCacheKey+"_anon",3);function f(){return d.getItem()}function v(e){d.setItem(e)}function O(){d.removeItem()}function h(){return l.getItem()}function j(e){l.setItem(e)}function m(){l.removeItem()}const w=new c.LocalStorageWrapper("_wis_favorite_lists",3);function C(e){if(!e){const data=w.getItem();if(data)return data}const t={favorites_athletes_list:[],favorites_sports_list:[],favorites_teams_list:[],favorites_content_list:[]},o=Object.keys(localStorage);return["league","athlete","team","show"].forEach((e=>{o.filter((t=>t.includes(`fav:${e}`))).forEach((o=>{const n=localStorage.getItem(o);if(n){const o=JSON.parse(n),c=o.item.webUrl,r=c.substring(c.lastIndexOf("/")+1,c.length);switch(e){case"league":t.favorites_sports_list.push(o.item.sportType);break;case"athlete":t.favorites_athletes_list.push(`${o.item.sportType}:${r.replace("-player","")}`);break;case"show":t.favorites_content_list.push(`${e}:${r}`);break;case"team":t.favorites_teams_list.push(`${o.item.sportType}:${r.replace("-team","")}`)}}}))})),w.setItem(t),t}},704:function(e,t,o){"use strict";o.r(t),o.d(t,"favoritesCleanup",(function(){return C})),o.d(t,"addFavoriteAsync",(function(){return S})),o.d(t,"removeFavoriteAsync",(function(){return k})),o.d(t,"getFavoritesAsyncWithThrottle",(function(){return F})),o.d(t,"saveFavoritesAsync",(function(){return T})),o.d(t,"getAllFavoriteLists",(function(){return E})),o.d(t,"addFavorite",(function(){return x})),o.d(t,"removeFavorite",(function(){return I})),o.d(t,"default",(function(){return U}));var n=o(4),c=o(275),r=o(698),d=o(730),l=o(5);function f(e,t,o,c,r){const d="Favorites API CALL: "+e+" ("+t+") ",f=r?JSON.stringify(r):void 0,v={"Content-Type":"application/json","x-api-key":Object(l.getConfig)().dpp.apiKey,authorization:`Bearer ${o}`};return fetch(e,{body:f,headers:Object.assign({},v,c),method:t}).then((e=>{if(e.ok)return e.json();throw e})).catch((e=>{throw Object(n.debugConsole)("API ERROR in "+d,e),e}))}var v=o(7),O=o(54),h=o(146),j=o(173),m=o(649),w=function(e,t,o,n){return new(o||(o=Promise))((function(c,r){function d(e){try{f(n.next(e))}catch(e){r(e)}}function l(e){try{f(n.throw(e))}catch(e){r(e)}}function f(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(d,l)}f((n=n.apply(e,t||[])).next())}))};function C(){Object(r.removeStoredFavorites)()}function y(){return Object(v.getFoxAccessToken)()||Object(v.getAnonAccessToken)()}function S(e){return w(this,void 0,void 0,(function*(){try{const t=yield A();return t.includes(e)?void Object(n.debugConsole)("addFavoriteAsync(): not adding favorite duplicate found"):(t.push(e),void T(t))}catch(e){return Object(n.debugConsole)(e),Promise.resolve("addFavoriteAsync(): favorite not added due to error")}}))}function k(e){return w(this,void 0,void 0,(function*(){try{const t=yield A();if(!t.includes(e))return void Object(n.debugConsole)("removeFavoriteAsync(): remove favorite failed");window&&window.localStorage&&window.localStorage.removeItem(`fav:${e}`);return void T(t.filter((element=>e!==element)))}catch(e){return Object(n.debugConsole)(e),Promise.resolve("removeFavoriteAsync(): favorite not removed due to error")}}))}const F=new c.a(A,[],"getFavoritesAsync").invoke;function T(e,t){return w(this,void 0,void 0,(function*(){try{const t=y();if(!e)return;if(!t)throw new Error("saveFavoritesAsync() no jwt");const o={favorites:[...e]};return yield function(e,t){if(e&&t)return f(Object(l.getConfig)().accounts.favApiPathDCG,"PUT",e,null,t);return Object(n.debugConsole)("saveFavoritesForUser() called with no JWT/Favorites"),Promise.resolve({favorites:[]})}(t,o),Object(r.setStoredFavorites)(e),void Object(d.notifyFavoritesSaved)(e)}catch(e){t&&t(),Object(n.debugConsole)(e)}}))}function A(e,t){return w(this,void 0,void 0,(function*(){try{const t=Object(r.getStoredFavorites)();if(!e&&t)return t;const o=y();if(!o)throw new Error("getFavoritesAsync() no jwt");const c=yield function(e){const t=Object(l.getConfig)();if(e)return Object(n.debugConsole)(t.accounts),f(t.accounts.favApiPathDCG,"GET",e,null,null);return Object(n.debugConsole)("getFavoritesForUser() called with no JWT"),Promise.resolve({favorites:[]})}(o);if(c&&c.favorites.length>=0){Object(n.debugConsole)("Favorites API response"),Object(n.debugConsole)(JSON.stringify(c));const e=c.favorites;return Object(r.setStoredFavorites)(e),e}{Object(n.debugConsole)("No favs for user");const e=[];return Object(r.setStoredFavorites)(e),[]}}catch(e){return t&&t(e),Object(r.removeStoredFavorites)(),[]}}))}function E(){return Object(r.getFavoriteLists)()}function x(e,t=""){return w(this,void 0,void 0,(function*(){yield S(e);const o=yield U(e);P(t,o,h.eventAddedFavorites),Object(m.addToast)({containerClass:"add-favorite",message:`${null==o?void 0:o.name} - Added to your favorites.`,messageType:m.messageTypeEnum.default,titleMessage:"AWESOME!"}),Object(r.getFavoriteLists)(!0)}))}function I(e,t=""){return w(this,void 0,void 0,(function*(){const o=yield U(e);return new Promise((n=>{Object(m.addToast)({action:()=>w(this,void 0,void 0,(function*(){yield k(e),P(t,o,h.eventRemovedFavorites),Object(r.getFavoriteLists)(!0),n()})),actionText:"YES, REMOVE",cancelButton:"CANCEL",message:`Are you sure you want to remove ${null==o?void 0:o.name} from your favorites?`,messageType:m.messageTypeEnum.removeFavorite,titleMessage:"REMOVE FAVORITE?"})}))}))}function P(e,t,o){if(!t)return;o({actionLocation:e,favoriteType:t.contentType,favoriteUpdate:t.name,sportType:t.sportType})}function U(e){return w(this,void 0,void 0,(function*(){const t=(o=`fav:${e}`,new O.LocalStorageWrapper(o,2,1440));var o;const data=t.getItem();if(data){if(!data.favoriteUri)throw new Error(`corrupted favorite cache data: ${t.cacheKey}`);return data}const c=e.split(":");try{const{name:o,imageUrl:n,imageType:d,entityLink:l,favoriteTitle:f,favoriteSubtitle:v,template:template,textColor:O}=yield Object(j.exploreEntity)(c[0],c[1]);if(!o||!l)return;const{webUrl:h,contentType:m,analyticsSport:w}=l,C={contentType:m,favoriteSubtitle:v,favoriteTitle:f,favoriteUri:e,imageType:d,imageUrl:n,name:o,sportType:w,template:template,textColor:O,webUrl:h};return t.setItem(C),Object(r.getFavoriteLists)(!0),C}catch(e){Object(n.debugConsole)(e)}return null}))}},730:function(e,t,o){"use strict";function n(e){const t=new CustomEvent("favorites-saved",{detail:e});window.dispatchEvent(t)}function c(e){window.addEventListener("favorites-saved",(t=>{e(t.detail)}))}o.r(t),o.d(t,"notifyFavoritesSaved",(function(){return n})),o.d(t,"getNotifiedFavoritesSaved",(function(){return c}))},842:function(e,t,o){"use strict";o.r(t),o.d(t,"redirectFU",(function(){return r})),o.d(t,"gotoMVPDLoginPage",(function(){return d}));var n=o(5),c=o(4);function r(e){if(!e)return void Object(c.debugConsole)("redirectFU() no defaultPath, return early");let t=new URL(window.location.href).searchParams.get("fu");t=null==t?e:decodeURIComponent(t),window.location.href===t?window.location.reload(!0):window.location.replace(t)}function d(e){const t=Object(n.getConfig)(),o=window.location,c=o.protocol+"//"+o.host,r=new URL(t.mvpdLoginPageUrl,c);e&&r.searchParams.set("fu",e),window.location.href=r.toString()}}}]);