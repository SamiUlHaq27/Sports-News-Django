(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{1510:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return h}));var o=n(5),r=n(4);const c={"content-type":"application/json"};function d(e){var t;return(t=e,function(e,t,data,n){const o=data?JSON.stringify(data):void 0;return fetch(e,{body:o,headers:n,method:t,mode:"cors"}).then((e=>{if(e.ok)return Object(r.debugConsole)(e),e.json();throw e})).catch((e=>{throw e}))}(Object(o.getConfig)().dpp.newsletterMidpointUrl,"POST",t,c)).then((e=>e.requestID?Promise.resolve():Promise.reject("There is no requestId in api response")))}const l=new(n(54).LocalStorageWrapper)(Object(o.getConfig)().userNewsletterCacheKey,1,void 0);function v(){return l.getItem()}var f=function(e,t,n,o){return new(n||(n=Promise))((function(r,c){function d(e){try{v(o.next(e))}catch(e){c(e)}}function l(e){try{v(o.throw(e))}catch(e){c(e)}}function v(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,l)}v((o=o.apply(e,t||[])).next())}))};function m(e,t){return f(this,void 0,void 0,(function*(){if(h(e))return Object(r.debugConsole)("User is already registered"),Promise.resolve(!0);if(!e)return Promise.reject("There is no email address to be registered.");{const o=function(e){return e?"foxsports_newsletter_checkbox_web_en-US":"foxsports_newsletter_web_en-US"}(t),r={email:e,platform:o,prospect:"foxsports",url:window.location.href};try{yield d(r);const e=v(),t={emailAddresses:e&&e.emailAddresses?[...e.emailAddresses,r.email]:[r.email]};return n=t,l.setItem(n),!0}catch(e){return!1}}var n}))}function h(e){const t=v();return!!(t&&t.emailAddresses&&t.emailAddresses.length)&&(!e||t.emailAddresses.includes(e))}},539:function(e,t,n){"use strict";n.r(t),n.d(t,"registrationPublic",(function(){return w}));var o=n(5),r=n(7),c=n(288),d=n(1510),l=n(280),v=n(842),f=n(31),m=n(4),h=n(704),y=n(96);const w={getAnonProfileId:()=>Object(r.getUserIdAnon)(),getDeviceID:()=>Object(r.getDeviceID)(),getFavoriteLists:()=>Object(h.getAllFavoriteLists)(),getFavoritesAsync:()=>Object(h.getFavoritesAsyncWithThrottle)(),getJWT:e=>Object(l.getJWT)(e),getMVPDDetails:()=>Object(f.b)(Object(o.getConfig)().userMVPDDetailsCacheKey),getUserMVPDMetadata:()=>Object(r.getUserMVPDMetadata)(),getPPVAccountData:e=>Object(c.getPPVAccountData)(e),getProfileId:()=>Object(r.getUserId)(),getUserEntitlements:()=>Object(c.getUserEntitlements)(),gotoMVPDLoginPage:e=>Object(v.gotoMVPDLoginPage)(e),isRegisteredNewsletter:()=>Object(d.a)(""),isUserLoggedIn:()=>Object(r.isUserLoggedInFSCOM)(),mvpdLogout:()=>Object(y.mvpdLogout)(),saveFavoritesAsync:e=>Object(h.saveFavoritesAsync)(e),checkpvpAuth:()=>Object(y.checkpvpAuth)(),refreshState:()=>Object(r.populateState)()};window.wisRegistration=w,Object(m.debugConsole)("wisRegistration is defined")},649:function(e,t,n){"use strict";function o(html){const template=document.createElement("template");return html=html.trim(),template.innerHTML=html,template.content.firstChild}var r;n.r(t),n.d(t,"messageTypeEnum",(function(){return r})),n.d(t,"addToast",(function(){return l})),n.d(t,"removeAllToasts",(function(){return v})),function(e){e[e.default=0]="default",e[e.changePassword=1]="changePassword",e[e.forgotPassword=2]="forgotPassword",e[e.mvpdLogout=3]="mvpdLogout",e[e.removeFavorite=4]="removeFavorite"}(r||(r={}));let c=1;const d=e=>`<div class="link-button">\n      <span class="link-text fs-14 cl-blish uc nowrap">${e}</span>\n  </div>`;function l(e){v();const t=`toastEl${c}`;c++;const n=e.titleMessage&&e.cancelButton?o((({message:e,action:t,actionText:n,titleMessage:o,cancelButton:r,noFade:c,containerClass:l},v)=>`<div class="toast-container double ${l||""}${c?" noFade":""}" id="${v}">\n  <div class="toast-content">\n    <div alt="close" class="close-icon"></div>\n    <div class="double-toast-msg">\n      <span class="toast-title-msg uc ff-sb fs-20">${o}</span>\n      <span class="toast-msg ff-h lh-1-pt-43 fs-14">${e}</span>\n    </div>\n    <div class="double-button">\n      ${t&&n?d(n):""}\n      <div class="link-button cancel">\n        <span class="link-text fs-14 cl-blish uc nowrap">${r}</span>\n      </div>\n    </div>\n  </div>\n</div>`)(e,t)):o((({message:e,titleMessage:t,action:n,actionText:o,noFade:c,messageType:l,containerClass:v},f)=>`<div class="toast-container ${v||""}${c?" noFade":""}${l&&l===r.changePassword?" change-pass":""}" id="${f}">\n  <div class="toast-content">\n    <div alt="close" class="close-icon"></div>\n    <div class="toast-msg-container">\n      ${t?`<div class="toast-title-msg uc ff-sb fs-20">${t}</div>`:""}\n      <div class="toast-msg ff-h lh-1-pt-43 fs-14">${e}</div>\n    </div>\n    ${n&&o?d(o):""}\n  </div>\n</div>`)(e,t));if(n){if(e.action){const t=n.querySelector(".link-button");t&&(t.onclick=e.action)}document.body.append(n),function(e){const t=document.getElementById(e),n=null==t?void 0:t.querySelector(".close-icon"),o=[].slice.call(null==t?void 0:t.getElementsByClassName("link-button"));n&&n.addEventListener("click",(()=>{v()}));(null==o?void 0:o.length)&&o.forEach((element=>{element.addEventListener("click",(()=>{v()}))}))}(t)}}function v(){const e=document.getElementsByClassName("toast-container");[].slice.call(e).forEach((element=>{element.remove()}))}},698:function(e,t,n){"use strict";n.r(t),n.d(t,"getStoredFavorites",(function(){return v})),n.d(t,"setStoredFavorites",(function(){return f})),n.d(t,"removeStoredFavorites",(function(){return m})),n.d(t,"getStoredAnonFavorites",(function(){return h})),n.d(t,"setStoredAnonFavorites",(function(){return y})),n.d(t,"removeStoredAnonFavorites",(function(){return w})),n.d(t,"getFavoriteLists",(function(){return j}));var o=n(5),r=n(54);const c=Object(o.getConfig)(),d=new r.LocalStorageWrapper(c.favoritesCacheKey,3,c.favoritesCacheDuration),l=new r.LocalStorageWrapper(c.favoritesCacheKey+"_anon",3);function v(){return d.getItem()}function f(e){d.setItem(e)}function m(){d.removeItem()}function h(){return l.getItem()}function y(e){l.setItem(e)}function w(){l.removeItem()}const O=new r.LocalStorageWrapper("_wis_favorite_lists",3);function j(e){if(!e){const data=O.getItem();if(data)return data}const t={favorites_athletes_list:[],favorites_sports_list:[],favorites_teams_list:[],favorites_content_list:[]},n=Object.keys(localStorage);return["league","athlete","team","show"].forEach((e=>{n.filter((t=>t.includes(`fav:${e}`))).forEach((n=>{const o=localStorage.getItem(n);if(o){const n=JSON.parse(o),r=n.item.webUrl,c=r.substring(r.lastIndexOf("/")+1,r.length);switch(e){case"league":t.favorites_sports_list.push(n.item.sportType);break;case"athlete":t.favorites_athletes_list.push(`${n.item.sportType}:${c.replace("-player","")}`);break;case"show":t.favorites_content_list.push(`${e}:${c}`);break;case"team":t.favorites_teams_list.push(`${n.item.sportType}:${c.replace("-team","")}`)}}}))})),O.setItem(t),t}},704:function(e,t,n){"use strict";n.r(t),n.d(t,"favoritesCleanup",(function(){return j})),n.d(t,"addFavoriteAsync",(function(){return A})),n.d(t,"removeFavoriteAsync",(function(){return C})),n.d(t,"getFavoritesAsyncWithThrottle",(function(){return P})),n.d(t,"saveFavoritesAsync",(function(){return T})),n.d(t,"getAllFavoriteLists",(function(){return E})),n.d(t,"addFavorite",(function(){return L})),n.d(t,"removeFavorite",(function(){return I})),n.d(t,"default",(function(){return U}));var o=n(4),r=n(275),c=n(698),d=n(730),l=n(5);function v(e,t,n,r,c){const d="Favorites API CALL: "+e+" ("+t+") ",v=c?JSON.stringify(c):void 0,f={"Content-Type":"application/json","x-api-key":Object(l.getConfig)().dpp.apiKey,authorization:`Bearer ${n}`};return fetch(e,{body:v,headers:Object.assign({},f,r),method:t}).then((e=>{if(e.ok)return e.json();throw e})).catch((e=>{throw Object(o.debugConsole)("API ERROR in "+d,e),e}))}var f=n(7),m=n(54),h=n(146),y=n(173),w=n(649),O=function(e,t,n,o){return new(n||(n=Promise))((function(r,c){function d(e){try{v(o.next(e))}catch(e){c(e)}}function l(e){try{v(o.throw(e))}catch(e){c(e)}}function v(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,l)}v((o=o.apply(e,t||[])).next())}))};function j(){Object(c.removeStoredFavorites)()}function F(){return Object(f.getFoxAccessToken)()||Object(f.getAnonAccessToken)()}function A(e){return O(this,void 0,void 0,(function*(){try{const t=yield S();return t.includes(e)?void Object(o.debugConsole)("addFavoriteAsync(): not adding favorite duplicate found"):(t.push(e),void T(t))}catch(e){return Object(o.debugConsole)(e),Promise.resolve("addFavoriteAsync(): favorite not added due to error")}}))}function C(e){return O(this,void 0,void 0,(function*(){try{const t=yield S();if(!t.includes(e))return void Object(o.debugConsole)("removeFavoriteAsync(): remove favorite failed");window&&window.localStorage&&window.localStorage.removeItem(`fav:${e}`);return void T(t.filter((element=>e!==element)))}catch(e){return Object(o.debugConsole)(e),Promise.resolve("removeFavoriteAsync(): favorite not removed due to error")}}))}const P=new r.a(S,[],"getFavoritesAsync").invoke;function T(e,t){return O(this,void 0,void 0,(function*(){try{const t=F();if(!e)return;if(!t)throw new Error("saveFavoritesAsync() no jwt");const n={favorites:[...e]};return yield function(e,t){if(e&&t)return v(Object(l.getConfig)().accounts.favApiPathDCG,"PUT",e,null,t);return Object(o.debugConsole)("saveFavoritesForUser() called with no JWT/Favorites"),Promise.resolve({favorites:[]})}(t,n),Object(c.setStoredFavorites)(e),void Object(d.notifyFavoritesSaved)(e)}catch(e){t&&t(),Object(o.debugConsole)(e)}}))}function S(e,t){return O(this,void 0,void 0,(function*(){try{const t=Object(c.getStoredFavorites)();if(!e&&t)return t;const n=F();if(!n)throw new Error("getFavoritesAsync() no jwt");const r=yield function(e){const t=Object(l.getConfig)();if(e)return Object(o.debugConsole)(t.accounts),v(t.accounts.favApiPathDCG,"GET",e,null,null);return Object(o.debugConsole)("getFavoritesForUser() called with no JWT"),Promise.resolve({favorites:[]})}(n);if(r&&r.favorites.length>=0){Object(o.debugConsole)("Favorites API response"),Object(o.debugConsole)(JSON.stringify(r));const e=r.favorites;return Object(c.setStoredFavorites)(e),e}{Object(o.debugConsole)("No favs for user");const e=[];return Object(c.setStoredFavorites)(e),[]}}catch(e){return t&&t(e),Object(c.removeStoredFavorites)(),[]}}))}function E(){return Object(c.getFavoriteLists)()}function L(e,t=""){return O(this,void 0,void 0,(function*(){yield A(e);const n=yield U(e);$(t,n,h.eventAddedFavorites),Object(w.addToast)({containerClass:"add-favorite",message:`${null==n?void 0:n.name} - Added to your favorites.`,messageType:w.messageTypeEnum.default,titleMessage:"AWESOME!"}),Object(c.getFavoriteLists)(!0)}))}function I(e,t=""){return O(this,void 0,void 0,(function*(){const n=yield U(e);return new Promise((o=>{Object(w.addToast)({action:()=>O(this,void 0,void 0,(function*(){yield C(e),$(t,n,h.eventRemovedFavorites),Object(c.getFavoriteLists)(!0),o()})),actionText:"YES, REMOVE",cancelButton:"CANCEL",message:`Are you sure you want to remove ${null==n?void 0:n.name} from your favorites?`,messageType:w.messageTypeEnum.removeFavorite,titleMessage:"REMOVE FAVORITE?"})}))}))}function $(e,t,n){if(!t)return;n({actionLocation:e,favoriteType:t.contentType,favoriteUpdate:t.name,sportType:t.sportType})}function U(e){return O(this,void 0,void 0,(function*(){const t=(n=`fav:${e}`,new m.LocalStorageWrapper(n,2,1440));var n;const data=t.getItem();if(data){if(!data.favoriteUri)throw new Error(`corrupted favorite cache data: ${t.cacheKey}`);return data}const r=e.split(":");try{const{name:n,imageUrl:o,imageType:d,entityLink:l,favoriteTitle:v,favoriteSubtitle:f,template:template,textColor:m}=yield Object(y.exploreEntity)(r[0],r[1]);if(!n||!l)return;const{webUrl:h,contentType:w,analyticsSport:O}=l,j={contentType:w,favoriteSubtitle:f,favoriteTitle:v,favoriteUri:e,imageType:d,imageUrl:o,name:n,sportType:O,template:template,textColor:m,webUrl:h};return t.setItem(j),Object(c.getFavoriteLists)(!0),j}catch(e){Object(o.debugConsole)(e)}return null}))}},730:function(e,t,n){"use strict";function o(e){const t=new CustomEvent("favorites-saved",{detail:e});window.dispatchEvent(t)}function r(e){window.addEventListener("favorites-saved",(t=>{e(t.detail)}))}n.r(t),n.d(t,"notifyFavoritesSaved",(function(){return o})),n.d(t,"getNotifiedFavoritesSaved",(function(){return r}))},842:function(e,t,n){"use strict";n.r(t),n.d(t,"redirectFU",(function(){return c})),n.d(t,"gotoMVPDLoginPage",(function(){return d}));var o=n(5),r=n(4);function c(e){if(!e)return void Object(r.debugConsole)("redirectFU() no defaultPath, return early");let t=new URL(window.location.href).searchParams.get("fu");t=null==t?e:decodeURIComponent(t),window.location.href===t?window.location.reload(!0):window.location.replace(t)}function d(e){const t=Object(o.getConfig)(),n=window.location,r=n.protocol+"//"+n.host,c=new URL(t.mvpdLoginPageUrl,r);e&&c.searchParams.set("fu",e),window.location.href=c.toString()}}}]);